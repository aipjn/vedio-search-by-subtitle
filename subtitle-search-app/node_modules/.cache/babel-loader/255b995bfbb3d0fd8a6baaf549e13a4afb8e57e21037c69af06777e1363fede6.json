{"ast":null,"code":"var _jsxFileName = \"/Users/h0270/Documents/code/ai-vedio/create_video/subtitle-search-app/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\n// 子页面组件\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SearchPage = ({\n  API_BASE_URL,\n  query,\n  setQuery,\n  searchResults,\n  setSearchResults,\n  loading,\n  setLoading,\n  apiStatus,\n  error,\n  setError,\n  selectedResult,\n  setSelectedResult,\n  videoUrl,\n  setVideoUrl,\n  isVideoLoading,\n  setIsVideoLoading,\n  handleSearch,\n  handleGenerateClip,\n  formatTime,\n  formatEpisode,\n  highlightText\n}) => {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"search-area\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: query,\n            onChange: e => setQuery(e.target.value),\n            placeholder: \"\\u8F93\\u5165\\u8981\\u641C\\u7D22\\u7684\\u5B57\\u5E55\\u5185\\u5BB9...\",\n            disabled: apiStatus !== 'connected'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading || apiStatus !== 'connected',\n            children: loading ? '搜索中...' : '搜索'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-area\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"results-area\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"\\u641C\\u7D22\\u7ED3\\u679C \", searchResults.length > 0 && `(${searchResults.length})`]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\",\n          children: \"\\u641C\\u7D22\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"results-list\",\n          children: searchResults.map((result, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: selectedResult === result ? 'selected' : '',\n            onClick: () => handleGenerateClip(result),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"result-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"episode\",\n                children: formatEpisode(result.episode)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: [formatTime(result.start_seconds), \" - \", formatTime(result.end_seconds)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"subtitle-text\",\n              dangerouslySetInnerHTML: {\n                __html: highlightText(result.text, query)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"video-area\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u89C6\\u9891\\u64AD\\u653E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), selectedResult ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-player\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u96C6\\u6570:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 20\n              }, this), \" \", formatEpisode(selectedResult.episode)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u65F6\\u95F4\\u6BB5:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 20\n              }, this), \" \", formatTime(selectedResult.start_seconds), \" - \", formatTime(selectedResult.end_seconds)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u5B57\\u5E55\\u5185\\u5BB9:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 20\n              }, this), \" \", selectedResult.text]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this), isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-video\",\n            children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 17\n          }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            autoPlay: true,\n            className: \"video-element\",\n            src: videoUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-placeholder\",\n            children: selectedResult ? '准备生成视频片段...' : '请从左侧选择一个搜索结果'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-placeholder\",\n          children: \"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u641C\\u7D22\\u7ED3\\u679C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n// 成语接龙游戏组件\n_c = SearchPage;\nconst ChainGamePage = ({\n  API_BASE_URL,\n  apiStatus,\n  formatTime,\n  formatEpisode\n}) => {\n  _s();\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: {\n          count: 8\n        }\n      });\n      if (response.data && response.data.sentences) {\n        setCurrentPrompts(response.data.sentences);\n      } else {\n        setGameError('获取提示句子失败');\n      }\n    } catch (error) {\n      console.error('获取提示句子错误:', error);\n      setGameError('无法获取提示句子，请确保API服务正常运行');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async subtitle => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n      if (response.data.success) {\n        const clipUrl = `${API_BASE_URL}${response.data.video_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = prompt => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([{\n      ...sentence,\n      step: 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n\n  // 选择下一个句子\n  const selectNextSentence = option => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {\n      ...sentence,\n      step: gameLog.length + 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取下一步选项\n  const fetchNextOptions = async text => {\n    if (!text) return;\n    setLoadingNextOptions(true);\n    setGameError(null);\n    try {\n      // 获取最后一个字，排除语气词\n      let lastChar = getLastValidChar(text);\n      if (!lastChar) {\n        setGameError('无法识别有效的结尾字符');\n        setLoadingNextOptions(false);\n        return;\n      }\n      console.log(`正在查找以\"${lastChar}\"开头的句子...`);\n      const response = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(`^${lastChar}`)}&use_regex=true`);\n      if (!response.ok) {\n        throw new Error(`API请求失败: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data && data.results) {\n        console.log(`API返回了 ${data.results.length} 条结果`);\n\n        // 过滤结果，保留3-8个字的句子\n        const filteredResults = data.results.filter(item => {\n          const cleanText = item.text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n          return cleanText.length >= 3 && cleanText.length <= 8;\n        });\n        console.log(`过滤后还有 ${filteredResults.length} 条结果`);\n        if (filteredResults.length === 0) {\n          // 如果没有找到结果，尝试不使用正则表达式的精确查询\n          console.log(`尝试使用精确查询搜索以\"${lastChar}\"开头的句子`);\n          const fallbackResponse = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(lastChar)}`);\n          const fallbackData = await fallbackResponse.json();\n          if (fallbackData && fallbackData.results) {\n            console.log(`精确查询返回了 ${fallbackData.results.length} 条结果`);\n            // 手动过滤以lastChar开头的结果\n            const manualFilteredResults = fallbackData.results.filter(item => {\n              return item.text.startsWith(lastChar) && item.text.length >= 3 && item.text.length <= 8;\n            });\n            if (manualFilteredResults.length > 0) {\n              console.log(`手动过滤后找到 ${manualFilteredResults.length} 条结果`);\n              // 随机选择最多8个结果\n              const shuffled = [...manualFilteredResults].sort(() => 0.5 - Math.random());\n              setNextOptions(shuffled.slice(0, 8));\n              setLoadingNextOptions(false);\n              return;\n            }\n          }\n          setGameError(`没有找到以\"${lastChar}\"开头的句子`);\n        } else {\n          // 随机选择最多8个结果\n          const shuffled = [...filteredResults].sort(() => 0.5 - Math.random());\n          setNextOptions(shuffled.slice(0, 8));\n        }\n      } else {\n        setGameError('获取接续句子失败');\n      }\n    } catch (error) {\n      console.error('获取接续句子错误:', error);\n      setGameError(`查询错误: ${error.message}`);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = text => {\n    if (!text || text.length === 0) return null;\n\n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchNextOptions(currentSentence.text);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      return;\n    }\n\n    // 删除最后一步\n    const newLog = gameLog.slice(0, -1);\n    const newClipUrls = clipUrls.slice(0, -1);\n    setGameLog(newLog);\n    setClipUrls(newClipUrls);\n    setCurrentSentence(newLog[newLog.length - 1]);\n    fetchNextOptions(newLog[newLog.length - 1].text);\n  };\n\n  // 导出合并视频\n  const exportMergedVideo = async () => {\n    // 只从gameLog中获取选中的视频URL，而不是使用clipUrls\n    const selectedClipUrls = gameLog.map(entry => entry.clipUrl).filter(url => url);\n    if (selectedClipUrls.length === 0) {\n      setGameError('没有可导出的视频');\n      return;\n    }\n    setIsExportingVideo(true);\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: selectedClipUrls\n      });\n      if (response.data.success) {\n        // 触发下载\n        const a = document.createElement('a');\n        a.href = `${API_BASE_URL}${response.data.merged_video_url}`;\n        a.download = '甄嬛传接龙.mp4';\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      } else {\n        setGameError('导出视频失败');\n      }\n    } catch (error) {\n      console.error('导出视频错误:', error);\n      setGameError('导出视频失败，请确保服务器正常运行');\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chain-game-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startNewGame,\n        className: \"new-game-btn\",\n        disabled: apiStatus !== 'connected',\n        children: \"\\u65B0\\u6E38\\u620F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this), gameStarted && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goBackOneStep,\n        className: \"back-btn\",\n        disabled: gameLog.length === 0,\n        children: \"\\u4E0A\\u4E00\\u6B65\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this), clipUrls.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: exportMergedVideo,\n        className: \"export-btn\",\n        disabled: isExportingVideo,\n        children: isExportingVideo ? '导出中...' : '导出接龙视频'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 7\n    }, this), gameError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: gameError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-candidates\",\n        children: [!gameStarted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"start-game-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u9009\\u62E9\\u5F00\\u59CB\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              className: \"refresh-btn\",\n              disabled: loadingPrompts || apiStatus !== 'connected',\n              children: \"\\u6362\\u4E00\\u6279\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 15\n          }, this), loadingPrompts ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"\\u52A0\\u8F7D\\u63D0\\u793A\\u53E5\\u5B50\\u4E2D...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"prompts-list\",\n            children: currentPrompts.map((prompt, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => selectStartSentence(prompt),\n              className: selectedOption === prompt ? 'prompt-item selected' : 'prompt-item',\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-text\",\n                children: prompt.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 480,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(prompt.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 482,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(prompt.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `sentence-type ${analyzeSentenceType(prompt.text)}`,\n                  children: analyzeSentenceType(prompt.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 17\n          }, this), currentPrompts.length === 0 && !loadingPrompts && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-prompts\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u6CA1\\u6709\\u53EF\\u7528\\u7684\\u63D0\\u793A\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: fetchRandomPrompts,\n              disabled: apiStatus !== 'connected',\n              children: \"\\u91CD\\u65B0\\u83B7\\u53D6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"current-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u5F53\\u524D\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"current-sentence\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-text\",\n                children: currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 509,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 510,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"next-hint\",\n                children: [\"\\u4E0B\\u4E00\\u53E5\\u9700\\u4EE5\\u300C\", getLastValidChar(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text), \"\\u300D\\u5B57\\u5F00\\u5934\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 512,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 504,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"next-options-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u53EF\\u9009\\u63A5\\u7EED\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 520,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: refreshNextOptions,\n                className: \"refresh-btn\",\n                disabled: loadingNextOptions,\n                children: \"\\u6362\\u4E00\\u6279\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 17\n            }, this), loadingNextOptions ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading\",\n              children: \"\\u52A0\\u8F7D\\u63A5\\u7EED\\u53E5\\u5B50\\u4E2D...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"options-list\",\n              children: nextOptions.map((option, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => selectNextSentence(option),\n                className: selectedOption === option ? 'option-item selected' : 'option-item',\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-text\",\n                  children: option.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 540,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"episode\",\n                    children: formatEpisode(option.episode)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 542,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"time\",\n                    children: formatTime(option.start_seconds)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 543,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `sentence-type ${analyzeSentenceType(option.text)}`,\n                    children: analyzeSentenceType(option.text)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 544,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 541,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 535,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 19\n            }, this), nextOptions.length === 0 && !loadingNextOptions && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-options\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u6CA1\\u6709\\u627E\\u5230\\u5408\\u9002\\u7684\\u63A5\\u7EED\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 552,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startNewGame,\n                children: \"\\u91CD\\u65B0\\u5F00\\u59CB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 553,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 551,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 518,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"game-log-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u63A5\\u9F99\\u8BB0\\u5F55\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 13\n          }, this), gameLog.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"game-log-list\",\n            children: gameLog.map((log, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"log-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-text\",\n                children: log.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 567,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(log.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 569,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(log.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 570,\n                  columnNumber: 23\n                }, this), log.clipUrl && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"clip-info\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"video-icon\",\n                    children: \"\\uD83C\\uDFAC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 573,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 572,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 568,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 566,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-log\",\n            children: \"\\u5C1A\\u672A\\u5F00\\u59CB\\u6E38\\u620F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-video-preview\",\n        children: [isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirm-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-sentence\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-text\",\n              children: selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"episode\",\n                children: formatEpisode(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.episode)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 593,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: formatTime(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.start_seconds)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 592,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-preview\",\n            children: isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-video\",\n              children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 600,\n              columnNumber: 19\n            }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n              controls: true,\n              autoPlay: true,\n              className: \"video-element\",\n              src: videoUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"video-placeholder\",\n              children: \"\\u51C6\\u5907\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 609,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"confirm-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"confirm-btn\",\n              onClick: gameStarted ? confirmNextSentence : confirmStartSentence,\n              disabled: isVideoLoading || !videoUrl,\n              children: \"\\u786E\\u8BA4\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 614,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cancel-btn\",\n              onClick: cancelSelection,\n              children: \"\\u53D6\\u6D88\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 621,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 613,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 589,\n          columnNumber: 13\n        }, this), !isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u89C6\\u9891\\u9884\\u89C8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 632,\n            columnNumber: 15\n          }, this), isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-video\",\n            children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 17\n          }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            autoPlay: true,\n            className: \"video-element\",\n            src: videoUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 636,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-placeholder large\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u9009\\u62E9\\u540E\\u5C06\\u5728\\u6B64\\u5904\\u9884\\u89C8\\u89C6\\u9891\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 646,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 631,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 423,\n    columnNumber: 5\n  }, this);\n};\n\n// 押韵游戏组件\n_s(ChainGamePage, \"DSGmDA/o7e5g8ybEfanXrQdRqqs=\");\n_c2 = ChainGamePage;\nconst RhymeGamePage = ({\n  API_BASE_URL,\n  apiStatus,\n  formatTime,\n  formatEpisode\n}) => {\n  _s2();\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: {\n          count: 8\n        }\n      });\n      if (response.data && response.data.sentences) {\n        setCurrentPrompts(response.data.sentences);\n      } else {\n        setGameError('获取提示句子失败');\n      }\n    } catch (error) {\n      console.error('获取提示句子错误:', error);\n      setGameError('无法获取提示句子，请确保API服务正常运行');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async subtitle => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n      if (response.data.success) {\n        const clipUrl = `${API_BASE_URL}${response.data.video_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = prompt => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([{\n      ...sentence,\n      step: 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchRhymingOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n\n  // 选择下一个句子\n  const selectNextSentence = option => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {\n      ...sentence,\n      step: gameLog.length + 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchRhymingOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取押韵选项\n  const fetchRhymingOptions = async text => {\n    if (!text) return;\n    setLoadingNextOptions(true);\n    setGameError(null);\n    try {\n      // 获取最后一个字的拼音，用于押韵\n      const lastChar = getLastValidChar(text);\n      if (!lastChar) {\n        setGameError('无法识别有效的结尾字符');\n        setLoadingNextOptions(false);\n        return;\n      }\n      console.log(`正在查找与\"${lastChar}\"押韵的句子...`);\n\n      // 调用押韵API\n      const response = await axios.get(`${API_BASE_URL}/api/rhyming_sentences`, {\n        params: {\n          text: text,\n          min_length: 3,\n          max_length: 8,\n          limit: 8\n        }\n      });\n      if (response.data && response.data.sentences) {\n        console.log(`API返回了 ${response.data.sentences.length} 条押韵结果`);\n        setNextOptions(response.data.sentences);\n      } else {\n        setGameError('获取押韵句子失败：无结果返回');\n        setNextOptions([]);\n      }\n    } catch (error) {\n      console.error('获取押韵句子错误:', error);\n      setGameError(`查询错误: ${error.message}`);\n      setNextOptions([]);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = text => {\n    if (!text || text.length === 0) return null;\n\n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchRhymingOptions(currentSentence.text);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n\n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n\n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n\n      // 重新获取选项\n      fetchRhymingOptions(prevSentence.text);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    setIsExportingVideo(true);\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      if (response.data.success) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.video_url}`;\n\n        // 创建下载链接\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '押韵视频.mp4';\n        link.click();\n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + error.message);\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chain-game-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startNewGame,\n        className: \"new-game-btn\",\n        disabled: apiStatus !== 'connected',\n        children: \"\\u65B0\\u6E38\\u620F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 937,\n        columnNumber: 9\n      }, this), gameLog.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: goBackOneStep,\n          className: \"back-btn\",\n          disabled: isConfirmMode,\n          children: \"\\u4E0A\\u4E00\\u6B65\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 947,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportMergedVideo,\n          className: \"export-btn\",\n          disabled: gameLog.length < 2 || isExportingVideo,\n          children: isExportingVideo ? '导出中...' : '导出押韵视频'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 955,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 936,\n      columnNumber: 7\n    }, this), gameError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-error\",\n      children: gameError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 967,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-candidates\",\n        children: [!gameStarted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"start-game-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u9009\\u62E9\\u5F00\\u59CB\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 976,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              className: \"refresh-btn\",\n              disabled: loadingPrompts || apiStatus !== 'connected',\n              children: \"\\u6362\\u4E00\\u6279\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 977,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 975,\n            columnNumber: 15\n          }, this), loadingPrompts ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"\\u52A0\\u8F7D\\u63D0\\u793A\\u53E5\\u5B50\\u4E2D...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 987,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"prompts-list\",\n            children: currentPrompts.map((prompt, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => selectStartSentence(prompt),\n              className: selectedOption === prompt ? 'prompt-item selected' : 'prompt-item',\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-text\",\n                children: prompt.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 996,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(prompt.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 998,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(prompt.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 999,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `sentence-type ${analyzeSentenceType(prompt.text)}`,\n                  children: analyzeSentenceType(prompt.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1000,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 997,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 991,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 989,\n            columnNumber: 17\n          }, this), currentPrompts.length === 0 && !loadingPrompts && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-prompts\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u6CA1\\u6709\\u53EF\\u7528\\u7684\\u63D0\\u793A\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1009,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              children: \"\\u91CD\\u65B0\\u83B7\\u53D6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1010,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1008,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 974,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"current-sentence-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u5F53\\u524D\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1018,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1017,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"current-sentence\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-text\",\n                children: currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1022,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1024,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1025,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1023,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-type-tag\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: analyzeSentenceType(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text),\n                  children: analyzeSentenceType(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1028,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1027,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1021,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1016,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"next-options-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u62BC\\u97F5\\u9009\\u9879\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1035,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: refreshNextOptions,\n                className: \"refresh-btn\",\n                disabled: loadingNextOptions,\n                children: \"\\u6362\\u4E00\\u6279\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1036,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1034,\n              columnNumber: 17\n            }, this), loadingNextOptions ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading\",\n              children: \"\\u52A0\\u8F7D\\u62BC\\u97F5\\u53E5\\u5B50\\u4E2D...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1046,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"options-list\",\n              children: nextOptions.map((option, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => selectNextSentence(option),\n                className: selectedOption === option ? 'option-item selected' : 'option-item',\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-text\",\n                  children: option.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1055,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"episode\",\n                    children: formatEpisode(option.episode)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1057,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"time\",\n                    children: formatTime(option.start_seconds)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1058,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `sentence-type ${analyzeSentenceType(option.text)}`,\n                    children: analyzeSentenceType(option.text)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1059,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1056,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1050,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1048,\n              columnNumber: 19\n            }, this), nextOptions.length === 0 && !loadingNextOptions && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"empty-options\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u6CA1\\u6709\\u627E\\u5230\\u5408\\u9002\\u7684\\u62BC\\u97F5\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1068,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startNewGame,\n                children: \"\\u91CD\\u65B0\\u5F00\\u59CB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1069,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1067,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1033,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"game-log-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u62BC\\u97F5\\u8BB0\\u5F55\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1078,\n            columnNumber: 13\n          }, this), gameLog.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"game-log-list\",\n            children: gameLog.map((log, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"log-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-text\",\n                children: log.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1083,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(log.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1085,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(log.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1086,\n                  columnNumber: 23\n                }, this), log.clipUrl && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"clip-info\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"video-icon\",\n                    children: \"\\uD83C\\uDFAC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1089,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1088,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1084,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1082,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1080,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-log\",\n            children: \"\\u5C1A\\u672A\\u5F00\\u59CB\\u6E38\\u620F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1097,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1077,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 972,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-video-preview\",\n        children: [isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirm-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-sentence\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-text\",\n              children: selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1107,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"episode\",\n                children: formatEpisode(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.episode)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1109,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: formatTime(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.start_seconds)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1110,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1108,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1106,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-preview\",\n            children: isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-video\",\n              children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1116,\n              columnNumber: 19\n            }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n              controls: true,\n              autoPlay: true,\n              className: \"video-element\",\n              src: videoUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1118,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"video-placeholder\",\n              children: \"\\u51C6\\u5907\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1125,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1114,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"confirm-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"confirm-btn\",\n              onClick: gameStarted ? confirmNextSentence : confirmStartSentence,\n              disabled: isVideoLoading || !videoUrl,\n              children: \"\\u786E\\u8BA4\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1130,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cancel-btn\",\n              onClick: cancelSelection,\n              children: \"\\u53D6\\u6D88\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1137,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1129,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1105,\n          columnNumber: 13\n        }, this), !isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u89C6\\u9891\\u9884\\u89C8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1148,\n            columnNumber: 15\n          }, this), isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-video\",\n            children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1150,\n            columnNumber: 17\n          }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            autoPlay: true,\n            className: \"video-element\",\n            src: videoUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1152,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-placeholder large\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1161,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u9009\\u62E9\\u540E\\u5C06\\u5728\\u6B64\\u5904\\u9884\\u89C8\\u89C6\\u9891\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1162,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1160,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1159,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1147,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 970,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 935,\n    columnNumber: 5\n  }, this);\n};\n\n// 分析句子类型 - 全局辅助函数\n_s2(RhymeGamePage, \"DSGmDA/o7e5g8ybEfanXrQdRqqs=\");\n_c3 = RhymeGamePage;\nconst analyzeSentenceType = text => {\n  if (!text) return '普通句';\n\n  // 判断是否为问句\n  if (text.includes('?') || text.includes('？') || text.includes('吗') || text.includes('呢')) {\n    return '疑问句';\n  }\n\n  // 判断是否为命令句\n  const commandWords = ['去', '来', '给我', '快', '立刻', '马上', '传'];\n  if (commandWords.some(word => text.includes(word))) {\n    return '命令句';\n  }\n\n  // 判断情感色彩\n  const positiveWords = ['好', '愿意', '可以', '是', '对', '喜欢', '爱', '高兴'];\n  const negativeWords = ['不', '没', '别', '莫', '拒绝', '难过', '恨', '讨厌'];\n  if (positiveWords.some(word => text.includes(word))) {\n    return '积极句';\n  }\n  if (negativeWords.some(word => text.includes(word))) {\n    return '消极句';\n  }\n  return '普通句';\n};\n\n// 奇妙对话组件\nconst DialogueGamePage = ({\n  API_BASE_URL,\n  apiStatus,\n  formatTime,\n  formatEpisode\n}) => {\n  _s3();\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: {\n          count: 8\n        }\n      });\n      if (response.data && response.data.sentences) {\n        setCurrentPrompts(response.data.sentences);\n      } else {\n        setGameError('获取提示句子失败');\n      }\n    } catch (error) {\n      console.error('获取提示句子错误:', error);\n      setGameError('无法获取提示句子，请确保API服务正常运行');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async subtitle => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n      if (response.data.success) {\n        const clipUrl = `${API_BASE_URL}${response.data.video_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = prompt => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([{\n      ...sentence,\n      step: 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchDialogueResponses(sentence);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n\n  // 选择下一个句子\n  const selectNextSentence = option => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {\n      ...sentence,\n      step: gameLog.length + 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchDialogueResponses(sentence);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取对话回应选项\n  const fetchDialogueResponses = async sentence => {\n    if (!sentence) return;\n    setLoadingNextOptions(true);\n    setGameError(null);\n    try {\n      console.log(`正在查找对\"${sentence.text}\"的有趣回应...`);\n\n      // 调用后端API查询对话回应\n      const response = await axios.post(`${API_BASE_URL}/api/dialogue_responses`, {\n        sentence_id: sentence.id,\n        sentence_text: sentence.text,\n        episode: sentence.episode\n      });\n      if (response.data && response.data.results) {\n        console.log(`API返回了 ${response.data.results.length} 条对话回应`);\n        setNextOptions(response.data.results);\n      } else {\n        setGameError('获取对话回应失败：无结果返回');\n        setNextOptions([]);\n      }\n    } catch (error) {\n      console.error('获取对话回应错误:', error);\n      setGameError(`获取对话回应失败: ${error.message}`);\n      setNextOptions([]);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchDialogueResponses(currentSentence);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n\n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n\n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n\n      // 重新获取选项\n      fetchDialogueResponses(prevSentence);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    setIsExportingVideo(true);\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      if (response.data.success) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.video_url}`;\n\n        // 创建下载链接\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '奇妙对话视频.mp4';\n        link.click();\n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + error.message);\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chain-game-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startNewGame,\n        className: \"new-game-btn\",\n        disabled: apiStatus !== 'connected',\n        children: \"\\u65B0\\u6E38\\u620F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1462,\n        columnNumber: 9\n      }, this), gameLog.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: goBackOneStep,\n          className: \"back-btn\",\n          disabled: isConfirmMode,\n          children: \"\\u4E0A\\u4E00\\u6B65\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1472,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportMergedVideo,\n          className: \"export-btn\",\n          disabled: gameLog.length < 2 || isExportingVideo,\n          children: isExportingVideo ? '导出中...' : '导出对话视频'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1480,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1461,\n      columnNumber: 7\n    }, this), gameError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-error\",\n      children: gameError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1492,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-candidates\",\n        children: [!gameStarted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"start-game-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u9009\\u62E9\\u5F00\\u59CB\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1501,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              className: \"refresh-btn\",\n              disabled: loadingPrompts || apiStatus !== 'connected',\n              children: \"\\u6362\\u4E00\\u6279\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1502,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1500,\n            columnNumber: 15\n          }, this), loadingPrompts ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"\\u52A0\\u8F7D\\u63D0\\u793A\\u53E5\\u5B50\\u4E2D...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1512,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"prompts-list\",\n            children: currentPrompts.map((prompt, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => selectStartSentence(prompt),\n              className: selectedOption === prompt ? 'prompt-item selected' : 'prompt-item',\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-text\",\n                children: prompt.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1521,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(prompt.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1523,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(prompt.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1524,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `sentence-type ${analyzeSentenceType(prompt.text)}`,\n                  children: analyzeSentenceType(prompt.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1525,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1522,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1516,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1514,\n            columnNumber: 17\n          }, this), currentPrompts.length === 0 && !loadingPrompts && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-prompts\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u6CA1\\u6709\\u53EF\\u7528\\u7684\\u63D0\\u793A\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1534,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              children: \"\\u91CD\\u65B0\\u83B7\\u53D6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1535,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1533,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1499,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"current-sentence-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u5F53\\u524D\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1543,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1542,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"current-sentence\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-text\",\n                children: currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1547,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1549,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1550,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1548,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-type-tag\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: analyzeSentenceType(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text),\n                  children: analyzeSentenceType(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1553,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1552,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1546,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1541,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"next-options-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u6709\\u8DA3\\u56DE\\u5E94\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1560,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: refreshNextOptions,\n                className: \"refresh-btn\",\n                disabled: loadingNextOptions,\n                children: \"\\u6362\\u4E00\\u6279\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1561,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1559,\n              columnNumber: 17\n            }, this), loadingNextOptions ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading\",\n              children: \"\\u67E5\\u627E\\u6709\\u8DA3\\u56DE\\u5E94\\u4E2D...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1571,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"options-list\",\n              children: nextOptions.map((option, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => selectNextSentence(option),\n                className: selectedOption === option ? 'option-item selected' : 'option-item',\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-text\",\n                  children: option.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1580,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"episode\",\n                    children: formatEpisode(option.episode)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1582,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"time\",\n                    children: formatTime(option.start_seconds)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1583,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `sentence-type ${analyzeSentenceType(option.text)}`,\n                    children: analyzeSentenceType(option.text)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1584,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1581,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1575,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1573,\n              columnNumber: 19\n            }, this), nextOptions.length === 0 && !loadingNextOptions && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"empty-options\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u6CA1\\u6709\\u627E\\u5230\\u5408\\u9002\\u7684\\u56DE\\u5E94\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1593,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startNewGame,\n                children: \"\\u91CD\\u65B0\\u5F00\\u59CB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1594,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1592,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1558,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"game-log-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u5BF9\\u8BDD\\u8BB0\\u5F55\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1603,\n            columnNumber: 13\n          }, this), gameLog.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"game-log-list\",\n            children: gameLog.map((log, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"log-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-text\",\n                children: log.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1608,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(log.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1610,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(log.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1611,\n                  columnNumber: 23\n                }, this), log.clipUrl && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"clip-info\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"video-icon\",\n                    children: \"\\uD83C\\uDFAC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1614,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1613,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1609,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1607,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1605,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-log\",\n            children: \"\\u5C1A\\u672A\\u5F00\\u59CB\\u5BF9\\u8BDD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1622,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1602,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1497,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-video-preview\",\n        children: [isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirm-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-sentence\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-text\",\n              children: selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1632,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"episode\",\n                children: formatEpisode(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.episode)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1634,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: formatTime(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.start_seconds)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1635,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1633,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1631,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-preview\",\n            children: isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-video\",\n              children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1641,\n              columnNumber: 19\n            }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n              controls: true,\n              autoPlay: true,\n              className: \"video-element\",\n              src: videoUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1643,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"video-placeholder\",\n              children: \"\\u51C6\\u5907\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1650,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1639,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"confirm-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"confirm-btn\",\n              onClick: gameStarted ? confirmNextSentence : confirmStartSentence,\n              disabled: isVideoLoading || !videoUrl,\n              children: \"\\u786E\\u8BA4\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1655,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cancel-btn\",\n              onClick: cancelSelection,\n              children: \"\\u53D6\\u6D88\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1662,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1654,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1630,\n          columnNumber: 13\n        }, this), !isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u89C6\\u9891\\u9884\\u89C8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1673,\n            columnNumber: 15\n          }, this), isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-video\",\n            children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1675,\n            columnNumber: 17\n          }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            autoPlay: true,\n            className: \"video-element\",\n            src: videoUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1677,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-placeholder large\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1686,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u9009\\u62E9\\u540E\\u5C06\\u5728\\u6B64\\u5904\\u9884\\u89C8\\u89C6\\u9891\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1687,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1685,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1684,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1672,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1628,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1495,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1460,\n    columnNumber: 5\n  }, this);\n};\n_s3(DialogueGamePage, \"DSGmDA/o7e5g8ybEfanXrQdRqqs=\");\n_c4 = DialogueGamePage;\nfunction App() {\n  _s4();\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [selectedResult, setSelectedResult] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [apiStatus, setApiStatus] = useState({\n    loading: true,\n    error: null,\n    data: null\n  });\n  const [activePage, setActivePage] = useState('search'); // 'search' 或 'chain-game' or 'rhyme-game' or 'dialogue-game'\n\n  // API 相关配置\n  const API_BASE_URL = 'http://localhost:8089';\n\n  // 检查API状态\n  useEffect(() => {\n    const checkApiStatus = async () => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/status`);\n        if (response.ok) {\n          const data = await response.json();\n          setApiStatus({\n            loading: false,\n            error: null,\n            data\n          });\n          console.log(\"API状态:\", data);\n        } else {\n          setApiStatus({\n            loading: false,\n            error: '无法连接到API服务',\n            data: null\n          });\n        }\n      } catch (error) {\n        console.error(\"API连接错误:\", error);\n        setApiStatus({\n          loading: false,\n          error: '无法连接到API服务',\n          data: null\n        });\n      }\n    };\n    checkApiStatus();\n  }, []);\n  const handleSearch = async e => {\n    e.preventDefault();\n    if (!query.trim()) {\n      setError('请输入搜索内容');\n      return;\n    }\n    setLoading(true);\n    setError('');\n    setResults([]);\n    setSelectedResult(null);\n    setVideoUrl('');\n    try {\n      // 构建查询URL\n      const queryParams = new URLSearchParams({\n        query: query.trim()\n      }).toString();\n      const response = await fetch(`${API_BASE_URL}/api/search?${queryParams}`);\n      if (response.ok) {\n        const data = await response.json();\n        setResults(data.results || []);\n        if (data.results && data.results.length === 0) {\n          setError('没有找到匹配的结果');\n        }\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || '搜索失败');\n      }\n    } catch (error) {\n      console.error('搜索失败:', error);\n      setError('搜索请求失败，请检查网络连接');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleGenerateClip = async result => {\n    if (!result) return;\n    setSelectedResult(result);\n    setLoading(true);\n    setError('');\n    setVideoUrl('');\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/generate_clip`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          episode: result.episode,\n          start_time: result.start_seconds,\n          end_time: result.end_seconds,\n          context_seconds: 3 // 上下文秒数\n        })\n      });\n      if (response.ok) {\n        const data = await response.json();\n        if (data.success) {\n          // 确保视频URL包含完整的基础URL\n          const fullVideoUrl = data.video_url.startsWith('http') ? data.video_url : `${API_BASE_URL}${data.video_url}`;\n          setVideoUrl(fullVideoUrl);\n        } else {\n          setError(data.error || '视频片段生成失败');\n        }\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || '请求失败');\n      }\n    } catch (error) {\n      console.error('生成视频片段失败:', error);\n      setError('请求失败，请检查网络连接');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 格式化时间显示\n  const formatTime = seconds => {\n    if (seconds === undefined || seconds === null) return '00:00:00';\n    const hours = Math.floor(seconds / 3600);\n    const mins = Math.floor(seconds % 3600 / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // 格式化集数显示\n  const formatEpisode = episode => {\n    if (!episode) return '';\n    return episode.replace('后宫·甄嬛传', '第') + '集';\n  };\n\n  // 高亮显示匹配文本\n  const highlightText = (text, query) => {\n    if (!query || !text) return text;\n    try {\n      const regex = new RegExp(query, 'gi');\n      return text.replace(regex, match => `<mark>${match}</mark>`);\n    } catch (e) {\n      return text;\n    }\n  };\n\n  // 切换页面\n  const switchPage = page => {\n    setActivePage(page);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u5B57\\u5E55\\u67E5\\u8BE2\\u4E0E\\u89C6\\u9891\\u751F\\u6210\\u7CFB\\u7EDF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1853,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `api-status ${apiStatus.loading ? 'checking' : apiStatus.error ? 'error' : 'connected'}`,\n        children: apiStatus.loading ? '检查API连接中...' : apiStatus.error ? '无法连接到API服务，请确保后端服务已启动' : apiStatus.data ? `API服务已连接 (已加载 ${apiStatus.data.loaded_episodes} 集, ${apiStatus.data.total_subtitles} 条字幕)` : 'API状态未知'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1855,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"main-nav\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: activePage === 'search' ? 'active' : '',\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => switchPage('search'),\n              children: \"\\u5B57\\u5E55\\u641C\\u7D22\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1862,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1861,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: activePage === 'chain-game' ? 'active' : '',\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => switchPage('chain-game'),\n              children: \"\\u5B57\\u5E55\\u63A5\\u9F99\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1865,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1864,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: activePage === 'rhyme-game' ? 'active' : '',\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => switchPage('rhyme-game'),\n              children: \"\\u5B57\\u5E55\\u62BC\\u97F5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1868,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1867,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: activePage === 'dialogue-game' ? 'active' : '',\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => switchPage('dialogue-game'),\n              children: \"\\u5947\\u5999\\u5BF9\\u8BDD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1871,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1870,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1860,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1859,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1852,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"App-main\",\n      children: [activePage === 'search' && /*#__PURE__*/_jsxDEV(SearchPage, {\n        API_BASE_URL: API_BASE_URL,\n        query: query,\n        setQuery: setQuery,\n        searchResults: results,\n        setSearchResults: setResults,\n        loading: loading,\n        setLoading: setLoading,\n        apiStatus: apiStatus.loading ? 'checking' : apiStatus.error ? 'error' : 'connected',\n        error: error,\n        setError: setError,\n        selectedResult: selectedResult,\n        setSelectedResult: setSelectedResult,\n        videoUrl: videoUrl,\n        setVideoUrl: setVideoUrl,\n        isVideoLoading: loading,\n        setIsVideoLoading: setLoading,\n        handleSearch: handleSearch,\n        handleGenerateClip: handleGenerateClip,\n        formatTime: formatTime,\n        formatEpisode: formatEpisode,\n        highlightText: highlightText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1879,\n        columnNumber: 11\n      }, this), activePage === 'chain-game' && /*#__PURE__*/_jsxDEV(ChainGamePage, {\n        API_BASE_URL: API_BASE_URL,\n        apiStatus: apiStatus.loading ? 'checking' : apiStatus.error ? 'error' : 'connected',\n        formatTime: formatTime,\n        formatEpisode: formatEpisode\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1905,\n        columnNumber: 11\n      }, this), activePage === 'rhyme-game' && /*#__PURE__*/_jsxDEV(RhymeGamePage, {\n        API_BASE_URL: API_BASE_URL,\n        apiStatus: apiStatus.loading ? 'checking' : apiStatus.error ? 'error' : 'connected',\n        formatTime: formatTime,\n        formatEpisode: formatEpisode\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1914,\n        columnNumber: 11\n      }, this), activePage === 'dialogue-game' && /*#__PURE__*/_jsxDEV(DialogueGamePage, {\n        API_BASE_URL: API_BASE_URL,\n        apiStatus: apiStatus.loading ? 'checking' : apiStatus.error ? 'error' : 'connected',\n        formatTime: formatTime,\n        formatEpisode: formatEpisode\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1923,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1877,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"App-footer\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u5B57\\u5E55\\u6570\\u636E\\u6765\\u6E90\\u4E8E\\u300A\\u540E\\u5BAB\\xB7\\u7504\\u5B1B\\u4F20\\u300B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1933,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1932,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1851,\n    columnNumber: 5\n  }, this);\n}\n_s4(App, \"7xBxEL9/nUI7UNJABkZjB7zMSq4=\");\n_c5 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"SearchPage\");\n$RefreshReg$(_c2, \"ChainGamePage\");\n$RefreshReg$(_c3, \"RhymeGamePage\");\n$RefreshReg$(_c4, \"DialogueGamePage\");\n$RefreshReg$(_c5, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","SearchPage","API_BASE_URL","query","setQuery","searchResults","setSearchResults","loading","setLoading","apiStatus","error","setError","selectedResult","setSelectedResult","videoUrl","setVideoUrl","isVideoLoading","setIsVideoLoading","handleSearch","handleGenerateClip","formatTime","formatEpisode","highlightText","children","className","onSubmit","type","value","onChange","e","target","placeholder","disabled","fileName","_jsxFileName","lineNumber","columnNumber","length","map","result","index","onClick","episode","start_seconds","end_seconds","dangerouslySetInnerHTML","__html","text","controls","autoPlay","src","_c","ChainGamePage","_s","gameStarted","setGameStarted","currentPrompts","setCurrentPrompts","loadingPrompts","setLoadingPrompts","gameLog","setGameLog","currentSentence","setCurrentSentence","nextOptions","setNextOptions","loadingNextOptions","setLoadingNextOptions","gameError","setGameError","selectedOption","setSelectedOption","isExportingVideo","setIsExportingVideo","clipUrls","setClipUrls","isConfirmMode","setIsConfirmMode","fetchRandomPrompts","response","get","params","count","data","sentences","console","refreshRandomPrompts","generateVideoClip","subtitle","post","start_time","end_time","context_seconds","success","clipUrl","video_url","selectStartSentence","prompt","confirmStartSentence","sentence","step","fetchNextOptions","cancelSelection","selectNextSentence","option","confirmNextSentence","lastChar","getLastValidChar","log","fetch","encodeURIComponent","ok","Error","status","json","results","filteredResults","filter","item","cleanText","replace","fallbackResponse","fallbackData","manualFilteredResults","startsWith","shuffled","sort","Math","random","slice","message","refreshNextOptions","goBackOneStep","newLog","newClipUrls","exportMergedVideo","selectedClipUrls","entry","url","clip_urls","a","document","createElement","href","merged_video_url","download","body","appendChild","click","removeChild","startNewGame","analyzeSentenceType","_c2","RhymeGamePage","_s2","fetchRhymingOptions","min_length","max_length","limit","pop","prevSentence","mergedVideoUrl","link","_c3","includes","commandWords","some","word","positiveWords","negativeWords","DialogueGamePage","_s3","fetchDialogueResponses","sentence_id","id","sentence_text","_c4","App","_s4","setResults","setApiStatus","activePage","setActivePage","checkApiStatus","preventDefault","trim","queryParams","URLSearchParams","toString","errorData","method","headers","JSON","stringify","fullVideoUrl","seconds","undefined","hours","floor","mins","secs","padStart","regex","RegExp","match","switchPage","page","loaded_episodes","total_subtitles","_c5","$RefreshReg$"],"sources":["/Users/h0270/Documents/code/ai-vedio/create_video/subtitle-search-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\n// 子页面组件\nconst SearchPage = ({ \n  API_BASE_URL, \n  query, \n  setQuery, \n  searchResults,\n  setSearchResults,\n  loading,\n  setLoading,\n  apiStatus,\n  error,\n  setError,\n  selectedResult,\n  setSelectedResult,\n  videoUrl,\n  setVideoUrl,\n  isVideoLoading,\n  setIsVideoLoading,\n  handleSearch,\n  handleGenerateClip,\n  formatTime,\n  formatEpisode,\n  highlightText\n}) => {\n  return (\n    <>\n      <section className=\"search-area\">\n        <form onSubmit={handleSearch}>\n          <div className=\"search-box\">\n            <input\n              type=\"text\"\n              value={query}\n              onChange={(e) => setQuery(e.target.value)}\n              placeholder=\"输入要搜索的字幕内容...\"\n              disabled={apiStatus !== 'connected'}\n            />\n            <button \n              type=\"submit\" \n              disabled={loading || apiStatus !== 'connected'}\n            >\n              {loading ? '搜索中...' : '搜索'}\n            </button>\n          </div>\n        </form>\n\n        {error && <div className=\"error-message\">{error}</div>}\n      </section>\n\n      <div className=\"content-area\">\n        <section className=\"results-area\">\n          <h2>搜索结果 {searchResults.length > 0 && `(${searchResults.length})`}</h2>\n          \n          {loading ? (\n            <div className=\"loading\">搜索中，请稍候...</div>\n          ) : (\n            <ul className=\"results-list\">\n              {searchResults.map((result, index) => (\n                <li \n                  key={index} \n                  className={selectedResult === result ? 'selected' : ''}\n                  onClick={() => handleGenerateClip(result)}\n                >\n                  <div className=\"result-header\">\n                    <span className=\"episode\">{formatEpisode(result.episode)}</span>\n                    <span className=\"time\">{formatTime(result.start_seconds)} - {formatTime(result.end_seconds)}</span>\n                  </div>\n                  <div \n                    className=\"subtitle-text\"\n                    dangerouslySetInnerHTML={{__html: highlightText(result.text, query)}}\n                  />\n                </li>\n              ))}\n            </ul>\n          )}\n        </section>\n\n        <section className=\"video-area\">\n          <h2>视频播放</h2>\n          {selectedResult ? (\n            <div className=\"video-player\">\n              <div className=\"video-info\">\n                <p><strong>集数:</strong> {formatEpisode(selectedResult.episode)}</p>\n                <p><strong>时间段:</strong> {formatTime(selectedResult.start_seconds)} - {formatTime(selectedResult.end_seconds)}</p>\n                <p><strong>字幕内容:</strong> {selectedResult.text}</p>\n              </div>\n              \n              {isVideoLoading ? (\n                <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder\">\n                  {selectedResult ? '准备生成视频片段...' : '请从左侧选择一个搜索结果'}\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"video-placeholder\">\n              请从左侧选择一个搜索结果\n            </div>\n          )}\n        </section>\n      </div>\n    </>\n  );\n};\n\n// 成语接龙游戏组件\nconst ChainGamePage = ({ \n  API_BASE_URL, \n  apiStatus,\n  formatTime,\n  formatEpisode\n}) => {\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: { count: 8 }\n      });\n      \n      if (response.data && response.data.sentences) {\n        setCurrentPrompts(response.data.sentences);\n      } else {\n        setGameError('获取提示句子失败');\n      }\n    } catch (error) {\n      console.error('获取提示句子错误:', error);\n      setGameError('无法获取提示句子，请确保API服务正常运行');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async (subtitle) => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n\n      if (response.data.success) {\n        const clipUrl = `${API_BASE_URL}${response.data.video_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = (prompt) => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([{...sentence, step: 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n  \n  // 选择下一个句子\n  const selectNextSentence = (option) => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {...sentence, step: gameLog.length + 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取下一步选项\n  const fetchNextOptions = async (text) => {\n    if (!text) return;\n    \n    setLoadingNextOptions(true);\n    setGameError(null);\n    \n    try {\n      // 获取最后一个字，排除语气词\n      let lastChar = getLastValidChar(text);\n      \n      if (!lastChar) {\n        setGameError('无法识别有效的结尾字符');\n        setLoadingNextOptions(false);\n        return;\n      }\n      \n      console.log(`正在查找以\"${lastChar}\"开头的句子...`);\n      \n      const response = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(`^${lastChar}`)}&use_regex=true`);\n      \n      if (!response.ok) {\n        throw new Error(`API请求失败: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      \n      if (data && data.results) {\n        console.log(`API返回了 ${data.results.length} 条结果`);\n        \n        // 过滤结果，保留3-8个字的句子\n        const filteredResults = data.results.filter(item => {\n          const cleanText = item.text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n          return cleanText.length >= 3 && cleanText.length <= 8;\n        });\n        \n        console.log(`过滤后还有 ${filteredResults.length} 条结果`);\n        \n        if (filteredResults.length === 0) {\n          // 如果没有找到结果，尝试不使用正则表达式的精确查询\n          console.log(`尝试使用精确查询搜索以\"${lastChar}\"开头的句子`);\n          const fallbackResponse = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(lastChar)}`);\n          const fallbackData = await fallbackResponse.json();\n          \n          if (fallbackData && fallbackData.results) {\n            console.log(`精确查询返回了 ${fallbackData.results.length} 条结果`);\n            // 手动过滤以lastChar开头的结果\n            const manualFilteredResults = fallbackData.results.filter(item => {\n              return item.text.startsWith(lastChar) && \n                     item.text.length >= 3 && \n                     item.text.length <= 8;\n            });\n            \n            if (manualFilteredResults.length > 0) {\n              console.log(`手动过滤后找到 ${manualFilteredResults.length} 条结果`);\n              // 随机选择最多8个结果\n              const shuffled = [...manualFilteredResults].sort(() => 0.5 - Math.random());\n              setNextOptions(shuffled.slice(0, 8));\n              setLoadingNextOptions(false);\n              return;\n            }\n          }\n          \n          setGameError(`没有找到以\"${lastChar}\"开头的句子`);\n        } else {\n          // 随机选择最多8个结果\n          const shuffled = [...filteredResults].sort(() => 0.5 - Math.random());\n          setNextOptions(shuffled.slice(0, 8));\n        }\n      } else {\n        setGameError('获取接续句子失败');\n      }\n    } catch (error) {\n      console.error('获取接续句子错误:', error);\n      setGameError(`查询错误: ${error.message}`);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = (text) => {\n    if (!text || text.length === 0) return null;\n    \n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchNextOptions(currentSentence.text);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      return;\n    }\n    \n    // 删除最后一步\n    const newLog = gameLog.slice(0, -1);\n    const newClipUrls = clipUrls.slice(0, -1);\n    setGameLog(newLog);\n    setClipUrls(newClipUrls);\n    setCurrentSentence(newLog[newLog.length - 1]);\n    fetchNextOptions(newLog[newLog.length - 1].text);\n  };\n\n  // 导出合并视频\n  const exportMergedVideo = async () => {\n    // 只从gameLog中获取选中的视频URL，而不是使用clipUrls\n    const selectedClipUrls = gameLog.map(entry => entry.clipUrl).filter(url => url);\n    \n    if (selectedClipUrls.length === 0) {\n      setGameError('没有可导出的视频');\n      return;\n    }\n    \n    setIsExportingVideo(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: selectedClipUrls\n      });\n      \n      if (response.data.success) {\n        // 触发下载\n        const a = document.createElement('a');\n        a.href = `${API_BASE_URL}${response.data.merged_video_url}`;\n        a.download = '甄嬛传接龙.mp4';\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      } else {\n        setGameError('导出视频失败');\n      }\n    } catch (error) {\n      console.error('导出视频错误:', error);\n      setGameError('导出视频失败，请确保服务器正常运行');\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n\n  return (\n    <div className=\"chain-game-container\">\n      <div className=\"game-controls\">\n        <button \n          onClick={startNewGame}\n          className=\"new-game-btn\"\n          disabled={apiStatus !== 'connected'}\n        >\n          新游戏\n        </button>\n        {gameStarted && (\n          <button \n            onClick={goBackOneStep}\n            className=\"back-btn\"\n            disabled={gameLog.length === 0}\n          >\n            上一步\n          </button>\n        )}\n        {clipUrls.length > 1 && (\n          <button\n            onClick={exportMergedVideo}\n            className=\"export-btn\"\n            disabled={isExportingVideo}\n          >\n            {isExportingVideo ? '导出中...' : '导出接龙视频'}\n          </button>\n        )}\n      </div>\n      \n      {gameError && <div className=\"error-message\">{gameError}</div>}\n      \n      <div className=\"game-content\">\n        {/* 左侧：候选词区域 */}\n        <div className=\"game-candidates\">\n          {!gameStarted ? (\n            <div className=\"start-game-section\">\n              <div className=\"section-header\">\n                <h2>选择开始句子</h2>\n                <button \n                  onClick={refreshRandomPrompts}\n                  className=\"refresh-btn\"\n                  disabled={loadingPrompts || apiStatus !== 'connected'}\n                >\n                  换一批\n                </button>\n              </div>\n              \n              {loadingPrompts ? (\n                <div className=\"loading\">加载提示句子中...</div>\n              ) : (\n                <ul className=\"prompts-list\">\n                  {currentPrompts.map((prompt, index) => (\n                    <li \n                      key={index} \n                      onClick={() => selectStartSentence(prompt)}\n                      className={selectedOption === prompt ? 'prompt-item selected' : 'prompt-item'}\n                    >\n                      <div className=\"prompt-text\">{prompt.text}</div>\n                      <div className=\"prompt-info\">\n                        <span className=\"episode\">{formatEpisode(prompt.episode)}</span>\n                        <span className=\"time\">{formatTime(prompt.start_seconds)}</span>\n                        <span className={`sentence-type ${analyzeSentenceType(prompt.text)}`}>{analyzeSentenceType(prompt.text)}</span>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              )}\n              {currentPrompts.length === 0 && !loadingPrompts && (\n                <div className=\"no-prompts\">\n                  <p>没有可用的提示句子</p>\n                  <button \n                    onClick={fetchRandomPrompts}\n                    disabled={apiStatus !== 'connected'}\n                  >\n                    重新获取\n                  </button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              <div className=\"current-section\">\n                <h2>当前句子</h2>\n                <div className=\"current-sentence\">\n                  <div className=\"current-text\">{currentSentence?.text}</div>\n                  <div className=\"current-info\">\n                    <span className=\"episode\">{formatEpisode(currentSentence?.episode)}</span>\n                    <span className=\"time\">{formatTime(currentSentence?.start_seconds)}</span>\n                  </div>\n                  <div className=\"next-hint\">\n                    下一句需以「{getLastValidChar(currentSentence?.text)}」字开头\n                  </div>\n                </div>\n              </div>\n                \n              <div className=\"next-options-section\">\n                <div className=\"section-header\">\n                  <h2>可选接续</h2>\n                  <button \n                    onClick={refreshNextOptions}\n                    className=\"refresh-btn\"\n                    disabled={loadingNextOptions}\n                  >\n                    换一批\n                  </button>\n                </div>\n                \n                {loadingNextOptions ? (\n                  <div className=\"loading\">加载接续句子中...</div>\n                ) : (\n                  <ul className=\"options-list\">\n                    {nextOptions.map((option, index) => (\n                      <li \n                        key={index}\n                        onClick={() => selectNextSentence(option)}\n                        className={selectedOption === option ? 'option-item selected' : 'option-item'}\n                      >\n                        <div className=\"option-text\">{option.text}</div>\n                        <div className=\"option-info\">\n                          <span className=\"episode\">{formatEpisode(option.episode)}</span>\n                          <span className=\"time\">{formatTime(option.start_seconds)}</span>\n                          <span className={`sentence-type ${analyzeSentenceType(option.text)}`}>{analyzeSentenceType(option.text)}</span>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n                {nextOptions.length === 0 && !loadingNextOptions && (\n                  <div className=\"no-options\">\n                    <p>没有找到合适的接续句子</p>\n                    <button onClick={startNewGame}>重新开始</button>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* 接龙记录 */}\n          <div className=\"game-log-section\">\n            <h2>接龙记录</h2>\n            {gameLog.length > 0 ? (\n              <ol className=\"game-log-list\">\n                {gameLog.map((log, index) => (\n                  <li key={index} className=\"log-item\">\n                    <div className=\"log-text\">{log.text}</div>\n                    <div className=\"log-info\">\n                      <span className=\"episode\">{formatEpisode(log.episode)}</span>\n                      <span className=\"time\">{formatTime(log.start_seconds)}</span>\n                      {log.clipUrl && (\n                        <span className=\"clip-info\">\n                          <i className=\"video-icon\">🎬</i>\n                        </span>\n                      )}\n                    </div>\n                  </li>\n                ))}\n              </ol>\n            ) : (\n              <div className=\"empty-log\">尚未开始游戏</div>\n            )}\n          </div>\n        </div>\n\n        {/* 右侧：视频预览区域 */}\n        <div className=\"game-video-preview\">\n          {isConfirmMode && (\n            <div className=\"confirm-section\">\n              <div className=\"selected-sentence\">\n                <div className=\"selected-text\">{selectedOption?.text}</div>\n                <div className=\"selected-info\">\n                  <span className=\"episode\">{formatEpisode(selectedOption?.episode)}</span>\n                  <span className=\"time\">{formatTime(selectedOption?.start_seconds)}</span>\n                </div>\n              </div>\n              \n              <div className=\"video-preview\">\n                {isVideoLoading ? (\n                  <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n                ) : videoUrl ? (\n                  <video \n                    controls \n                    autoPlay \n                    className=\"video-element\"\n                    src={videoUrl}\n                  />\n                ) : (\n                  <div className=\"video-placeholder\">准备生成视频片段...</div>\n                )}\n              </div>\n              \n              <div className=\"confirm-buttons\">\n                <button \n                  className=\"confirm-btn\"\n                  onClick={gameStarted ? confirmNextSentence : confirmStartSentence}\n                  disabled={isVideoLoading || !videoUrl}\n                >\n                  确认选择\n                </button>\n                <button \n                  className=\"cancel-btn\"\n                  onClick={cancelSelection}\n                >\n                  取消选择\n                </button>\n              </div>\n            </div>\n          )}\n          {!isConfirmMode && (\n            <div className=\"video-section\">\n              <h2>视频预览</h2>\n              {isVideoLoading ? (\n                <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder large\">\n                  <div className=\"placeholder-text\">\n                    <p>请从左侧选择一个句子</p>\n                    <p>选择后将在此处预览视频</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// 押韵游戏组件\nconst RhymeGamePage = ({ \n  API_BASE_URL, \n  apiStatus,\n  formatTime,\n  formatEpisode\n}) => {\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: { count: 8 }\n      });\n      \n      if (response.data && response.data.sentences) {\n        setCurrentPrompts(response.data.sentences);\n      } else {\n        setGameError('获取提示句子失败');\n      }\n    } catch (error) {\n      console.error('获取提示句子错误:', error);\n      setGameError('无法获取提示句子，请确保API服务正常运行');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async (subtitle) => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n\n      if (response.data.success) {\n        const clipUrl = `${API_BASE_URL}${response.data.video_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = (prompt) => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([{...sentence, step: 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchRhymingOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n  \n  // 选择下一个句子\n  const selectNextSentence = (option) => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {...sentence, step: gameLog.length + 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchRhymingOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取押韵选项\n  const fetchRhymingOptions = async (text) => {\n    if (!text) return;\n    \n    setLoadingNextOptions(true);\n    setGameError(null);\n    \n    try {\n      // 获取最后一个字的拼音，用于押韵\n      const lastChar = getLastValidChar(text);\n      \n      if (!lastChar) {\n        setGameError('无法识别有效的结尾字符');\n        setLoadingNextOptions(false);\n        return;\n      }\n      \n      console.log(`正在查找与\"${lastChar}\"押韵的句子...`);\n      \n      // 调用押韵API\n      const response = await axios.get(`${API_BASE_URL}/api/rhyming_sentences`, {\n        params: {\n          text: text,\n          min_length: 3,\n          max_length: 8,\n          limit: 8\n        }\n      });\n      \n      if (response.data && response.data.sentences) {\n        console.log(`API返回了 ${response.data.sentences.length} 条押韵结果`);\n        setNextOptions(response.data.sentences);\n      } else {\n        setGameError('获取押韵句子失败：无结果返回');\n        setNextOptions([]);\n      }\n    } catch (error) {\n      console.error('获取押韵句子错误:', error);\n      setGameError(`查询错误: ${error.message}`);\n      setNextOptions([]);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = (text) => {\n    if (!text || text.length === 0) return null;\n    \n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchRhymingOptions(currentSentence.text);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n      \n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n      \n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n      \n      // 重新获取选项\n      fetchRhymingOptions(prevSentence.text);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    \n    setIsExportingVideo(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      \n      if (response.data.success) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.video_url}`;\n        \n        // 创建下载链接\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '押韵视频.mp4';\n        link.click();\n        \n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + error.message);\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n\n  return (\n    <div className=\"chain-game-container\">\n      <div className=\"game-controls\">\n        <button \n          onClick={startNewGame}\n          className=\"new-game-btn\"\n          disabled={apiStatus !== 'connected'}\n        >\n          新游戏\n        </button>\n        \n        {gameLog.length > 0 && (\n          <>\n            <button \n              onClick={goBackOneStep}\n              className=\"back-btn\"\n              disabled={isConfirmMode}\n            >\n              上一步\n            </button>\n            \n            <button \n              onClick={exportMergedVideo}\n              className=\"export-btn\"\n              disabled={gameLog.length < 2 || isExportingVideo}\n            >\n              {isExportingVideo ? '导出中...' : '导出押韵视频'}\n            </button>\n          </>\n        )}\n      </div>\n      \n      {gameError && (\n        <div className=\"game-error\">{gameError}</div>\n      )}\n      \n      <div className=\"game-content\">\n        {/* 左侧：候选词区域 */}\n        <div className=\"game-candidates\">\n          {!gameStarted ? (\n            <div className=\"start-game-section\">\n              <div className=\"section-header\">\n                <h2>选择开始句子</h2>\n                <button \n                  onClick={refreshRandomPrompts}\n                  className=\"refresh-btn\"\n                  disabled={loadingPrompts || apiStatus !== 'connected'}\n                >\n                  换一批\n                </button>\n              </div>\n              \n              {loadingPrompts ? (\n                <div className=\"loading\">加载提示句子中...</div>\n              ) : (\n                <ul className=\"prompts-list\">\n                  {currentPrompts.map((prompt, index) => (\n                    <li \n                      key={index} \n                      onClick={() => selectStartSentence(prompt)}\n                      className={selectedOption === prompt ? 'prompt-item selected' : 'prompt-item'}\n                    >\n                      <div className=\"prompt-text\">{prompt.text}</div>\n                      <div className=\"prompt-info\">\n                        <span className=\"episode\">{formatEpisode(prompt.episode)}</span>\n                        <span className=\"time\">{formatTime(prompt.start_seconds)}</span>\n                        <span className={`sentence-type ${analyzeSentenceType(prompt.text)}`}>{analyzeSentenceType(prompt.text)}</span>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              )}\n              \n              {currentPrompts.length === 0 && !loadingPrompts && (\n                <div className=\"empty-prompts\">\n                  <p>没有可用的提示句子</p>\n                  <button onClick={refreshRandomPrompts}>重新获取</button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              <div className=\"current-sentence-section\">\n                <div className=\"section-header\">\n                  <h2>当前句子</h2>\n                </div>\n                \n                <div className=\"current-sentence\">\n                  <div className=\"sentence-text\">{currentSentence?.text}</div>\n                  <div className=\"sentence-info\">\n                    <span className=\"episode\">{formatEpisode(currentSentence?.episode)}</span>\n                    <span className=\"time\">{formatTime(currentSentence?.start_seconds)}</span>\n                  </div>\n                  <div className=\"sentence-type-tag\">\n                    <span className={analyzeSentenceType(currentSentence?.text)}>{analyzeSentenceType(currentSentence?.text)}</span>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"next-options-section\">\n                <div className=\"section-header\">\n                  <h2>押韵选项</h2>\n                  <button \n                    onClick={refreshNextOptions}\n                    className=\"refresh-btn\"\n                    disabled={loadingNextOptions}\n                  >\n                    换一批\n                  </button>\n                </div>\n                \n                {loadingNextOptions ? (\n                  <div className=\"loading\">加载押韵句子中...</div>\n                ) : (\n                  <ul className=\"options-list\">\n                    {nextOptions.map((option, index) => (\n                      <li \n                        key={index}\n                        onClick={() => selectNextSentence(option)}\n                        className={selectedOption === option ? 'option-item selected' : 'option-item'}\n                      >\n                        <div className=\"option-text\">{option.text}</div>\n                        <div className=\"option-info\">\n                          <span className=\"episode\">{formatEpisode(option.episode)}</span>\n                          <span className=\"time\">{formatTime(option.start_seconds)}</span>\n                          <span className={`sentence-type ${analyzeSentenceType(option.text)}`}>{analyzeSentenceType(option.text)}</span>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n                \n                {nextOptions.length === 0 && !loadingNextOptions && (\n                  <div className=\"empty-options\">\n                    <p>没有找到合适的押韵句子</p>\n                    <button onClick={startNewGame}>重新开始</button>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* 接龙记录 */}\n          <div className=\"game-log-section\">\n            <h2>押韵记录</h2>\n            {gameLog.length > 0 ? (\n              <ol className=\"game-log-list\">\n                {gameLog.map((log, index) => (\n                  <li key={index} className=\"log-item\">\n                    <div className=\"log-text\">{log.text}</div>\n                    <div className=\"log-info\">\n                      <span className=\"episode\">{formatEpisode(log.episode)}</span>\n                      <span className=\"time\">{formatTime(log.start_seconds)}</span>\n                      {log.clipUrl && (\n                        <span className=\"clip-info\">\n                          <i className=\"video-icon\">🎬</i>\n                        </span>\n                      )}\n                    </div>\n                  </li>\n                ))}\n              </ol>\n            ) : (\n              <div className=\"empty-log\">尚未开始游戏</div>\n            )}\n          </div>\n        </div>\n\n        {/* 右侧：视频预览区域 */}\n        <div className=\"game-video-preview\">\n          {isConfirmMode && (\n            <div className=\"confirm-section\">\n              <div className=\"selected-sentence\">\n                <div className=\"selected-text\">{selectedOption?.text}</div>\n                <div className=\"selected-info\">\n                  <span className=\"episode\">{formatEpisode(selectedOption?.episode)}</span>\n                  <span className=\"time\">{formatTime(selectedOption?.start_seconds)}</span>\n                </div>\n              </div>\n              \n              <div className=\"video-preview\">\n                {isVideoLoading ? (\n                  <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n                ) : videoUrl ? (\n                  <video \n                    controls \n                    autoPlay \n                    className=\"video-element\"\n                    src={videoUrl}\n                  />\n                ) : (\n                  <div className=\"video-placeholder\">准备生成视频片段...</div>\n                )}\n              </div>\n              \n              <div className=\"confirm-buttons\">\n                <button \n                  className=\"confirm-btn\"\n                  onClick={gameStarted ? confirmNextSentence : confirmStartSentence}\n                  disabled={isVideoLoading || !videoUrl}\n                >\n                  确认选择\n                </button>\n                <button \n                  className=\"cancel-btn\"\n                  onClick={cancelSelection}\n                >\n                  取消选择\n                </button>\n              </div>\n            </div>\n          )}\n          {!isConfirmMode && (\n            <div className=\"video-section\">\n              <h2>视频预览</h2>\n              {isVideoLoading ? (\n                <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder large\">\n                  <div className=\"placeholder-text\">\n                    <p>请从左侧选择一个句子</p>\n                    <p>选择后将在此处预览视频</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// 分析句子类型 - 全局辅助函数\nconst analyzeSentenceType = (text) => {\n  if (!text) return '普通句';\n  \n  // 判断是否为问句\n  if (text.includes('?') || text.includes('？') || text.includes('吗') || text.includes('呢')) {\n    return '疑问句';\n  }\n  \n  // 判断是否为命令句\n  const commandWords = ['去', '来', '给我', '快', '立刻', '马上', '传'];\n  if (commandWords.some(word => text.includes(word))) {\n    return '命令句';\n  }\n  \n  // 判断情感色彩\n  const positiveWords = ['好', '愿意', '可以', '是', '对', '喜欢', '爱', '高兴'];\n  const negativeWords = ['不', '没', '别', '莫', '拒绝', '难过', '恨', '讨厌'];\n  \n  if (positiveWords.some(word => text.includes(word))) {\n    return '积极句';\n  }\n  \n  if (negativeWords.some(word => text.includes(word))) {\n    return '消极句';\n  }\n  \n  return '普通句';\n};\n\n// 奇妙对话组件\nconst DialogueGamePage = ({ \n  API_BASE_URL, \n  apiStatus,\n  formatTime,\n  formatEpisode\n}) => {\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: { count: 8 }\n      });\n      \n      if (response.data && response.data.sentences) {\n        setCurrentPrompts(response.data.sentences);\n      } else {\n        setGameError('获取提示句子失败');\n      }\n    } catch (error) {\n      console.error('获取提示句子错误:', error);\n      setGameError('无法获取提示句子，请确保API服务正常运行');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async (subtitle) => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n\n      if (response.data.success) {\n        const clipUrl = `${API_BASE_URL}${response.data.video_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = (prompt) => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([{...sentence, step: 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchDialogueResponses(sentence);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n  \n  // 选择下一个句子\n  const selectNextSentence = (option) => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {...sentence, step: gameLog.length + 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchDialogueResponses(sentence);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取对话回应选项\n  const fetchDialogueResponses = async (sentence) => {\n    if (!sentence) return;\n    \n    setLoadingNextOptions(true);\n    setGameError(null);\n    \n    try {\n      console.log(`正在查找对\"${sentence.text}\"的有趣回应...`);\n      \n      // 调用后端API查询对话回应\n      const response = await axios.post(`${API_BASE_URL}/api/dialogue_responses`, {\n        sentence_id: sentence.id,\n        sentence_text: sentence.text,\n        episode: sentence.episode\n      });\n      \n      if (response.data && response.data.results) {\n        console.log(`API返回了 ${response.data.results.length} 条对话回应`);\n        setNextOptions(response.data.results);\n      } else {\n        setGameError('获取对话回应失败：无结果返回');\n        setNextOptions([]);\n      }\n    } catch (error) {\n      console.error('获取对话回应错误:', error);\n      setGameError(`获取对话回应失败: ${error.message}`);\n      setNextOptions([]);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchDialogueResponses(currentSentence);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n      \n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n      \n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n      \n      // 重新获取选项\n      fetchDialogueResponses(prevSentence);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    \n    setIsExportingVideo(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      \n      if (response.data.success) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.video_url}`;\n        \n        // 创建下载链接\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '奇妙对话视频.mp4';\n        link.click();\n        \n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + error.message);\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n\n  return (\n    <div className=\"chain-game-container\">\n      <div className=\"game-controls\">\n        <button \n          onClick={startNewGame}\n          className=\"new-game-btn\"\n          disabled={apiStatus !== 'connected'}\n        >\n          新游戏\n        </button>\n        \n        {gameLog.length > 0 && (\n          <>\n            <button \n              onClick={goBackOneStep}\n              className=\"back-btn\"\n              disabled={isConfirmMode}\n            >\n              上一步\n            </button>\n            \n            <button \n              onClick={exportMergedVideo}\n              className=\"export-btn\"\n              disabled={gameLog.length < 2 || isExportingVideo}\n            >\n              {isExportingVideo ? '导出中...' : '导出对话视频'}\n            </button>\n          </>\n        )}\n      </div>\n      \n      {gameError && (\n        <div className=\"game-error\">{gameError}</div>\n      )}\n      \n      <div className=\"game-content\">\n        {/* 左侧：候选词区域 */}\n        <div className=\"game-candidates\">\n          {!gameStarted ? (\n            <div className=\"start-game-section\">\n              <div className=\"section-header\">\n                <h2>选择开始句子</h2>\n                <button \n                  onClick={refreshRandomPrompts}\n                  className=\"refresh-btn\"\n                  disabled={loadingPrompts || apiStatus !== 'connected'}\n                >\n                  换一批\n                </button>\n              </div>\n              \n              {loadingPrompts ? (\n                <div className=\"loading\">加载提示句子中...</div>\n              ) : (\n                <ul className=\"prompts-list\">\n                  {currentPrompts.map((prompt, index) => (\n                    <li \n                      key={index} \n                      onClick={() => selectStartSentence(prompt)}\n                      className={selectedOption === prompt ? 'prompt-item selected' : 'prompt-item'}\n                    >\n                      <div className=\"prompt-text\">{prompt.text}</div>\n                      <div className=\"prompt-info\">\n                        <span className=\"episode\">{formatEpisode(prompt.episode)}</span>\n                        <span className=\"time\">{formatTime(prompt.start_seconds)}</span>\n                        <span className={`sentence-type ${analyzeSentenceType(prompt.text)}`}>{analyzeSentenceType(prompt.text)}</span>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              )}\n              \n              {currentPrompts.length === 0 && !loadingPrompts && (\n                <div className=\"empty-prompts\">\n                  <p>没有可用的提示句子</p>\n                  <button onClick={refreshRandomPrompts}>重新获取</button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              <div className=\"current-sentence-section\">\n                <div className=\"section-header\">\n                  <h2>当前句子</h2>\n                </div>\n                \n                <div className=\"current-sentence\">\n                  <div className=\"sentence-text\">{currentSentence?.text}</div>\n                  <div className=\"sentence-info\">\n                    <span className=\"episode\">{formatEpisode(currentSentence?.episode)}</span>\n                    <span className=\"time\">{formatTime(currentSentence?.start_seconds)}</span>\n                  </div>\n                  <div className=\"sentence-type-tag\">\n                    <span className={analyzeSentenceType(currentSentence?.text)}>{analyzeSentenceType(currentSentence?.text)}</span>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"next-options-section\">\n                <div className=\"section-header\">\n                  <h2>有趣回应</h2>\n                  <button \n                    onClick={refreshNextOptions}\n                    className=\"refresh-btn\"\n                    disabled={loadingNextOptions}\n                  >\n                    换一批\n                  </button>\n                </div>\n                \n                {loadingNextOptions ? (\n                  <div className=\"loading\">查找有趣回应中...</div>\n                ) : (\n                  <ul className=\"options-list\">\n                    {nextOptions.map((option, index) => (\n                      <li \n                        key={index}\n                        onClick={() => selectNextSentence(option)}\n                        className={selectedOption === option ? 'option-item selected' : 'option-item'}\n                      >\n                        <div className=\"option-text\">{option.text}</div>\n                        <div className=\"option-info\">\n                          <span className=\"episode\">{formatEpisode(option.episode)}</span>\n                          <span className=\"time\">{formatTime(option.start_seconds)}</span>\n                          <span className={`sentence-type ${analyzeSentenceType(option.text)}`}>{analyzeSentenceType(option.text)}</span>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n                \n                {nextOptions.length === 0 && !loadingNextOptions && (\n                  <div className=\"empty-options\">\n                    <p>没有找到合适的回应句子</p>\n                    <button onClick={startNewGame}>重新开始</button>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* 对话记录 */}\n          <div className=\"game-log-section\">\n            <h2>对话记录</h2>\n            {gameLog.length > 0 ? (\n              <ol className=\"game-log-list\">\n                {gameLog.map((log, index) => (\n                  <li key={index} className=\"log-item\">\n                    <div className=\"log-text\">{log.text}</div>\n                    <div className=\"log-info\">\n                      <span className=\"episode\">{formatEpisode(log.episode)}</span>\n                      <span className=\"time\">{formatTime(log.start_seconds)}</span>\n                      {log.clipUrl && (\n                        <span className=\"clip-info\">\n                          <i className=\"video-icon\">🎬</i>\n                        </span>\n                      )}\n                    </div>\n                  </li>\n                ))}\n              </ol>\n            ) : (\n              <div className=\"empty-log\">尚未开始对话</div>\n            )}\n          </div>\n        </div>\n\n        {/* 右侧：视频预览区域 */}\n        <div className=\"game-video-preview\">\n          {isConfirmMode && (\n            <div className=\"confirm-section\">\n              <div className=\"selected-sentence\">\n                <div className=\"selected-text\">{selectedOption?.text}</div>\n                <div className=\"selected-info\">\n                  <span className=\"episode\">{formatEpisode(selectedOption?.episode)}</span>\n                  <span className=\"time\">{formatTime(selectedOption?.start_seconds)}</span>\n                </div>\n              </div>\n              \n              <div className=\"video-preview\">\n                {isVideoLoading ? (\n                  <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n                ) : videoUrl ? (\n                  <video \n                    controls \n                    autoPlay \n                    className=\"video-element\"\n                    src={videoUrl}\n                  />\n                ) : (\n                  <div className=\"video-placeholder\">准备生成视频片段...</div>\n                )}\n              </div>\n              \n              <div className=\"confirm-buttons\">\n                <button \n                  className=\"confirm-btn\"\n                  onClick={gameStarted ? confirmNextSentence : confirmStartSentence}\n                  disabled={isVideoLoading || !videoUrl}\n                >\n                  确认选择\n                </button>\n                <button \n                  className=\"cancel-btn\"\n                  onClick={cancelSelection}\n                >\n                  取消选择\n                </button>\n              </div>\n            </div>\n          )}\n          {!isConfirmMode && (\n            <div className=\"video-section\">\n              <h2>视频预览</h2>\n              {isVideoLoading ? (\n                <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder large\">\n                  <div className=\"placeholder-text\">\n                    <p>请从左侧选择一个句子</p>\n                    <p>选择后将在此处预览视频</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nfunction App() {\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [selectedResult, setSelectedResult] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [apiStatus, setApiStatus] = useState({loading: true, error: null, data: null});\n  const [activePage, setActivePage] = useState('search'); // 'search' 或 'chain-game' or 'rhyme-game' or 'dialogue-game'\n  \n  // API 相关配置\n  const API_BASE_URL = 'http://localhost:8089';\n  \n  // 检查API状态\n  useEffect(() => {\n    const checkApiStatus = async () => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/status`);\n        \n        if (response.ok) {\n          const data = await response.json();\n          setApiStatus({loading: false, error: null, data});\n          console.log(\"API状态:\", data);\n        } else {\n          setApiStatus({loading: false, error: '无法连接到API服务', data: null});\n        }\n      } catch (error) {\n        console.error(\"API连接错误:\", error);\n        setApiStatus({loading: false, error: '无法连接到API服务', data: null});\n      }\n    };\n    \n    checkApiStatus();\n  }, []);\n  \n  const handleSearch = async (e) => {\n    e.preventDefault();\n    if (!query.trim()) {\n      setError('请输入搜索内容');\n      return;\n    }\n    \n    setLoading(true);\n    setError('');\n    setResults([]);\n    setSelectedResult(null);\n    setVideoUrl('');\n    \n    try {\n      // 构建查询URL\n      const queryParams = new URLSearchParams({\n        query: query.trim()\n      }).toString();\n      \n      const response = await fetch(`${API_BASE_URL}/api/search?${queryParams}`);\n      \n      if (response.ok) {\n        const data = await response.json();\n        setResults(data.results || []);\n        if (data.results && data.results.length === 0) {\n          setError('没有找到匹配的结果');\n        }\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || '搜索失败');\n      }\n    } catch (error) {\n      console.error('搜索失败:', error);\n      setError('搜索请求失败，请检查网络连接');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleGenerateClip = async (result) => {\n    if (!result) return;\n    \n    setSelectedResult(result);\n    setLoading(true);\n    setError('');\n    setVideoUrl('');\n    \n    try {\n      const response = await fetch(`${API_BASE_URL}/api/generate_clip`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          episode: result.episode,\n          start_time: result.start_seconds,\n          end_time: result.end_seconds,\n          context_seconds: 3 // 上下文秒数\n        })\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        if (data.success) {\n          // 确保视频URL包含完整的基础URL\n          const fullVideoUrl = data.video_url.startsWith('http') \n            ? data.video_url \n            : `${API_BASE_URL}${data.video_url}`;\n          setVideoUrl(fullVideoUrl);\n        } else {\n          setError(data.error || '视频片段生成失败');\n        }\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || '请求失败');\n      }\n    } catch (error) {\n      console.error('生成视频片段失败:', error);\n      setError('请求失败，请检查网络连接');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // 格式化时间显示\n  const formatTime = (seconds) => {\n    if (seconds === undefined || seconds === null) return '00:00:00';\n    const hours = Math.floor(seconds / 3600);\n    const mins = Math.floor((seconds % 3600) / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // 格式化集数显示\n  const formatEpisode = (episode) => {\n    if (!episode) return '';\n    return episode.replace('后宫·甄嬛传', '第') + '集';\n  };\n\n  // 高亮显示匹配文本\n  const highlightText = (text, query) => {\n    if (!query || !text) return text;\n    \n    try {\n      const regex = new RegExp(query, 'gi');\n      return text.replace(regex, match => `<mark>${match}</mark>`);\n    } catch (e) {\n      return text;\n    }\n  };\n\n  // 切换页面\n  const switchPage = (page) => {\n    setActivePage(page);\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>字幕查询与视频生成系统</h1>\n        \n        <div className={`api-status ${apiStatus.loading ? 'checking' : apiStatus.error ? 'error' : 'connected'}`}>\n          {apiStatus.loading ? '检查API连接中...' : apiStatus.error ? '无法连接到API服务，请确保后端服务已启动' : apiStatus.data ? `API服务已连接 (已加载 ${apiStatus.data.loaded_episodes} 集, ${apiStatus.data.total_subtitles} 条字幕)` : 'API状态未知'}\n        </div>\n        \n        <nav className=\"main-nav\">\n          <ul>\n            <li className={activePage === 'search' ? 'active' : ''}>\n              <button onClick={() => switchPage('search')}>字幕搜索</button>\n            </li>\n            <li className={activePage === 'chain-game' ? 'active' : ''}>\n              <button onClick={() => switchPage('chain-game')}>字幕接龙</button>\n            </li>\n            <li className={activePage === 'rhyme-game' ? 'active' : ''}>\n              <button onClick={() => switchPage('rhyme-game')}>字幕押韵</button>\n            </li>\n            <li className={activePage === 'dialogue-game' ? 'active' : ''}>\n              <button onClick={() => switchPage('dialogue-game')}>奇妙对话</button>\n            </li>\n          </ul>\n        </nav>\n      </header>\n      \n      <main className=\"App-main\">\n        {activePage === 'search' && (\n          <SearchPage \n            API_BASE_URL={API_BASE_URL}\n            query={query}\n            setQuery={setQuery}\n            searchResults={results}\n            setSearchResults={setResults}\n            loading={loading}\n            setLoading={setLoading}\n            apiStatus={apiStatus.loading ? 'checking' : apiStatus.error ? 'error' : 'connected'}\n            error={error}\n            setError={setError}\n            selectedResult={selectedResult}\n            setSelectedResult={setSelectedResult}\n            videoUrl={videoUrl}\n            setVideoUrl={setVideoUrl}\n            isVideoLoading={loading}\n            setIsVideoLoading={setLoading}\n            handleSearch={handleSearch}\n            handleGenerateClip={handleGenerateClip}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n            highlightText={highlightText}\n          />\n        )}\n        \n        {activePage === 'chain-game' && (\n          <ChainGamePage \n            API_BASE_URL={API_BASE_URL}\n            apiStatus={apiStatus.loading ? 'checking' : apiStatus.error ? 'error' : 'connected'}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n          />\n        )}\n        \n        {activePage === 'rhyme-game' && (\n          <RhymeGamePage \n            API_BASE_URL={API_BASE_URL}\n            apiStatus={apiStatus.loading ? 'checking' : apiStatus.error ? 'error' : 'connected'}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n          />\n        )}\n        \n        {activePage === 'dialogue-game' && (\n          <DialogueGamePage \n            API_BASE_URL={API_BASE_URL}\n            apiStatus={apiStatus.loading ? 'checking' : apiStatus.error ? 'error' : 'connected'}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n          />\n        )}\n      </main>\n      \n      <footer className=\"App-footer\">\n        <p>字幕数据来源于《后宫·甄嬛传》</p>\n      </footer>\n    </div>\n  );\n}\n\nexport default App; "],"mappings":";;;;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAO,WAAW;AAClB,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AACA,MAAMC,UAAU,GAAGA,CAAC;EAClBC,YAAY;EACZC,KAAK;EACLC,QAAQ;EACRC,aAAa;EACbC,gBAAgB;EAChBC,OAAO;EACPC,UAAU;EACVC,SAAS;EACTC,KAAK;EACLC,QAAQ;EACRC,cAAc;EACdC,iBAAiB;EACjBC,QAAQ;EACRC,WAAW;EACXC,cAAc;EACdC,iBAAiB;EACjBC,YAAY;EACZC,kBAAkB;EAClBC,UAAU;EACVC,aAAa;EACbC;AACF,CAAC,KAAK;EACJ,oBACExB,OAAA,CAAAE,SAAA;IAAAuB,QAAA,gBACEzB,OAAA;MAAS0B,SAAS,EAAC,aAAa;MAAAD,QAAA,gBAC9BzB,OAAA;QAAM2B,QAAQ,EAAEP,YAAa;QAAAK,QAAA,eAC3BzB,OAAA;UAAK0B,SAAS,EAAC,YAAY;UAAAD,QAAA,gBACzBzB,OAAA;YACE4B,IAAI,EAAC,MAAM;YACXC,KAAK,EAAExB,KAAM;YACbyB,QAAQ,EAAGC,CAAC,IAAKzB,QAAQ,CAACyB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;YAC1CI,WAAW,EAAC,iEAAe;YAC3BC,QAAQ,EAAEvB,SAAS,KAAK;UAAY;YAAAwB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrC,CAAC,eACFtC,OAAA;YACE4B,IAAI,EAAC,QAAQ;YACbM,QAAQ,EAAEzB,OAAO,IAAIE,SAAS,KAAK,WAAY;YAAAc,QAAA,EAE9ChB,OAAO,GAAG,QAAQ,GAAG;UAAI;YAAA0B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,EAEN1B,KAAK,iBAAIZ,OAAA;QAAK0B,SAAS,EAAC,eAAe;QAAAD,QAAA,EAAEb;MAAK;QAAAuB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/C,CAAC,eAEVtC,OAAA;MAAK0B,SAAS,EAAC,cAAc;MAAAD,QAAA,gBAC3BzB,OAAA;QAAS0B,SAAS,EAAC,cAAc;QAAAD,QAAA,gBAC/BzB,OAAA;UAAAyB,QAAA,GAAI,2BAAK,EAAClB,aAAa,CAACgC,MAAM,GAAG,CAAC,IAAI,IAAIhC,aAAa,CAACgC,MAAM,GAAG;QAAA;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,EAEtE7B,OAAO,gBACNT,OAAA;UAAK0B,SAAS,EAAC,SAAS;UAAAD,QAAA,EAAC;QAAU;UAAAU,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,gBAEzCtC,OAAA;UAAI0B,SAAS,EAAC,cAAc;UAAAD,QAAA,EACzBlB,aAAa,CAACiC,GAAG,CAAC,CAACC,MAAM,EAAEC,KAAK,kBAC/B1C,OAAA;YAEE0B,SAAS,EAAEZ,cAAc,KAAK2B,MAAM,GAAG,UAAU,GAAG,EAAG;YACvDE,OAAO,EAAEA,CAAA,KAAMtB,kBAAkB,CAACoB,MAAM,CAAE;YAAAhB,QAAA,gBAE1CzB,OAAA;cAAK0B,SAAS,EAAC,eAAe;cAAAD,QAAA,gBAC5BzB,OAAA;gBAAM0B,SAAS,EAAC,SAAS;gBAAAD,QAAA,EAAEF,aAAa,CAACkB,MAAM,CAACG,OAAO;cAAC;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eAChEtC,OAAA;gBAAM0B,SAAS,EAAC,MAAM;gBAAAD,QAAA,GAAEH,UAAU,CAACmB,MAAM,CAACI,aAAa,CAAC,EAAC,KAAG,EAACvB,UAAU,CAACmB,MAAM,CAACK,WAAW,CAAC;cAAA;gBAAAX,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChG,CAAC,eACNtC,OAAA;cACE0B,SAAS,EAAC,eAAe;cACzBqB,uBAAuB,EAAE;gBAACC,MAAM,EAAExB,aAAa,CAACiB,MAAM,CAACQ,IAAI,EAAE5C,KAAK;cAAC;YAAE;cAAA8B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtE,CAAC;UAAA,GAXGI,KAAK;YAAAP,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAYR,CACL;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CACL;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACM,CAAC,eAEVtC,OAAA;QAAS0B,SAAS,EAAC,YAAY;QAAAD,QAAA,gBAC7BzB,OAAA;UAAAyB,QAAA,EAAI;QAAI;UAAAU,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACZxB,cAAc,gBACbd,OAAA;UAAK0B,SAAS,EAAC,cAAc;UAAAD,QAAA,gBAC3BzB,OAAA;YAAK0B,SAAS,EAAC,YAAY;YAAAD,QAAA,gBACzBzB,OAAA;cAAAyB,QAAA,gBAAGzB,OAAA;gBAAAyB,QAAA,EAAQ;cAAG;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAACf,aAAa,CAACT,cAAc,CAAC8B,OAAO,CAAC;YAAA;cAAAT,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACnEtC,OAAA;cAAAyB,QAAA,gBAAGzB,OAAA;gBAAAyB,QAAA,EAAQ;cAAI;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAAChB,UAAU,CAACR,cAAc,CAAC+B,aAAa,CAAC,EAAC,KAAG,EAACvB,UAAU,CAACR,cAAc,CAACgC,WAAW,CAAC;YAAA;cAAAX,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eAClHtC,OAAA;cAAAyB,QAAA,gBAAGzB,OAAA;gBAAAyB,QAAA,EAAQ;cAAK;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAACxB,cAAc,CAACmC,IAAI;YAAA;cAAAd,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChD,CAAC,EAELpB,cAAc,gBACblB,OAAA;YAAK0B,SAAS,EAAC,eAAe;YAAAD,QAAA,EAAC;UAAc;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,GACjDtB,QAAQ,gBACVhB,OAAA;YACEkD,QAAQ;YACRC,QAAQ;YACRzB,SAAS,EAAC,eAAe;YACzB0B,GAAG,EAAEpC;UAAS;YAAAmB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACf,CAAC,gBAEFtC,OAAA;YAAK0B,SAAS,EAAC,mBAAmB;YAAAD,QAAA,EAC/BX,cAAc,GAAG,aAAa,GAAG;UAAc;YAAAqB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7C,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,gBAENtC,OAAA;UAAK0B,SAAS,EAAC,mBAAmB;UAAAD,QAAA,EAAC;QAEnC;UAAAU,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACM,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CAAC;EAAA,eACN,CAAC;AAEP,CAAC;;AAED;AAAAe,EAAA,GA/GMlD,UAAU;AAgHhB,MAAMmD,aAAa,GAAGA,CAAC;EACrBlD,YAAY;EACZO,SAAS;EACTW,UAAU;EACVC;AACF,CAAC,KAAK;EAAAgC,EAAA;EACJ,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAG7D,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC8D,cAAc,EAAEC,iBAAiB,CAAC,GAAG/D,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACgE,cAAc,EAAEC,iBAAiB,CAAC,GAAGjE,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACkE,OAAO,EAAEC,UAAU,CAAC,GAAGnE,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACoE,eAAe,EAAEC,kBAAkB,CAAC,GAAGrE,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAACsE,WAAW,EAAEC,cAAc,CAAC,GAAGvE,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACwE,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGzE,QAAQ,CAAC,KAAK,CAAC;EACnE,MAAM,CAAC0E,SAAS,EAAEC,YAAY,CAAC,GAAG3E,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACoB,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACsB,cAAc,EAAEC,iBAAiB,CAAC,GAAGvB,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAAC4E,cAAc,EAAEC,iBAAiB,CAAC,GAAG7E,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAAC8E,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG/E,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAACgF,QAAQ,EAAEC,WAAW,CAAC,GAAGjF,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACkF,aAAa,EAAEC,gBAAgB,CAAC,GAAGnF,QAAQ,CAAC,KAAK,CAAC;;EAEzD;EACA,MAAMoF,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACrCnB,iBAAiB,CAAC,IAAI,CAAC;IACvBU,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF,MAAMU,QAAQ,GAAG,MAAMnF,KAAK,CAACoF,GAAG,CAAC,GAAG9E,YAAY,uBAAuB,EAAE;QACvE+E,MAAM,EAAE;UAAEC,KAAK,EAAE;QAAE;MACrB,CAAC,CAAC;MAEF,IAAIH,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACC,SAAS,EAAE;QAC5C3B,iBAAiB,CAACsB,QAAQ,CAACI,IAAI,CAACC,SAAS,CAAC;MAC5C,CAAC,MAAM;QACLf,YAAY,CAAC,UAAU,CAAC;MAC1B;IACF,CAAC,CAAC,OAAO3D,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACjC2D,YAAY,CAAC,uBAAuB,CAAC;IACvC,CAAC,SAAS;MACRV,iBAAiB,CAAC,KAAK,CAAC;IAC1B;EACF,CAAC;;EAED;EACA,MAAM2B,oBAAoB,GAAGA,CAAA,KAAM;IACjC,IAAI7E,SAAS,KAAK,WAAW,IAAI,CAACiD,cAAc,EAAE;MAChDoB,kBAAkB,CAAC,CAAC;IACtB;EACF,CAAC;;EAED;EACA,MAAMS,iBAAiB,GAAG,MAAOC,QAAQ,IAAK;IAC5CvE,iBAAiB,CAAC,IAAI,CAAC;IACvBF,WAAW,CAAC,EAAE,CAAC;IACfsD,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF,MAAMU,QAAQ,GAAG,MAAMnF,KAAK,CAAC6F,IAAI,CAAC,GAAGvF,YAAY,oBAAoB,EAAE;QACrEwC,OAAO,EAAE8C,QAAQ,CAAC9C,OAAO;QACzBgD,UAAU,EAAEF,QAAQ,CAAC7C,aAAa;QAClCgD,QAAQ,EAAEH,QAAQ,CAAC5C,WAAW;QAC9BgD,eAAe,EAAE;MACnB,CAAC,CAAC;MAEF,IAAIb,QAAQ,CAACI,IAAI,CAACU,OAAO,EAAE;QACzB,MAAMC,OAAO,GAAG,GAAG5F,YAAY,GAAG6E,QAAQ,CAACI,IAAI,CAACY,SAAS,EAAE;QAC3DhF,WAAW,CAAC+E,OAAO,CAAC;QACpB,OAAOA,OAAO;MAChB,CAAC,MAAM;QACLzB,YAAY,CAAC,UAAU,CAAC;QACxB,OAAO,IAAI;MACb;IACF,CAAC,CAAC,OAAO3D,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACjC2D,YAAY,CAAC,wBAAwB,CAAC;MACtC,OAAO,IAAI;IACb,CAAC,SAAS;MACRpD,iBAAiB,CAAC,KAAK,CAAC;IAC1B;EACF,CAAC;;EAED;EACA,MAAM+E,mBAAmB,GAAIC,MAAM,IAAK;IACtC1B,iBAAiB,CAAC0B,MAAM,CAAC;IACzBpB,gBAAgB,CAAC,IAAI,CAAC;IACtBU,iBAAiB,CAACU,MAAM,CAAC;EAC3B,CAAC;;EAED;EACA,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;IACjC,MAAMC,QAAQ,GAAG7B,cAAc;IAC/B,IAAI,CAAC6B,QAAQ,EAAE;IAEfpC,kBAAkB,CAACoC,QAAQ,CAAC;IAC5BtC,UAAU,CAAC,CAAC;MAAC,GAAGsC,QAAQ;MAAEC,IAAI,EAAE,CAAC;MAAEN,OAAO,EAAEhF;IAAQ,CAAC,CAAC,CAAC;IACvD6D,WAAW,CAAC,CAAC,GAAGD,QAAQ,EAAE5D,QAAQ,CAAC,CAAC;IACpCyC,cAAc,CAAC,IAAI,CAAC;IACpB8C,gBAAgB,CAACF,QAAQ,CAACpD,IAAI,CAAC;IAC/B8B,gBAAgB,CAAC,KAAK,CAAC;IACvBN,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC;;EAED;EACA,MAAM+B,eAAe,GAAGA,CAAA,KAAM;IAC5BzB,gBAAgB,CAAC,KAAK,CAAC;IACvBN,iBAAiB,CAAC,IAAI,CAAC;IACvBxD,WAAW,CAAC,EAAE,CAAC;EACjB,CAAC;;EAED;EACA,MAAMwF,kBAAkB,GAAIC,MAAM,IAAK;IACrCjC,iBAAiB,CAACiC,MAAM,CAAC;IACzB3B,gBAAgB,CAAC,IAAI,CAAC;IACtBU,iBAAiB,CAACiB,MAAM,CAAC;EAC3B,CAAC;;EAED;EACA,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;IAChC,MAAMN,QAAQ,GAAG7B,cAAc;IAC/B,IAAI,CAAC6B,QAAQ,EAAE;IAEfpC,kBAAkB,CAACoC,QAAQ,CAAC;IAC5BtC,UAAU,CAAC,CAAC,GAAGD,OAAO,EAAE;MAAC,GAAGuC,QAAQ;MAAEC,IAAI,EAAExC,OAAO,CAACvB,MAAM,GAAG,CAAC;MAAEyD,OAAO,EAAEhF;IAAQ,CAAC,CAAC,CAAC;IACpF6D,WAAW,CAAC,CAAC,GAAGD,QAAQ,EAAE5D,QAAQ,CAAC,CAAC;IACpCuF,gBAAgB,CAACF,QAAQ,CAACpD,IAAI,CAAC;IAC/B8B,gBAAgB,CAAC,KAAK,CAAC;IACvBN,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC;;EAED;EACA,MAAM8B,gBAAgB,GAAG,MAAOtD,IAAI,IAAK;IACvC,IAAI,CAACA,IAAI,EAAE;IAEXoB,qBAAqB,CAAC,IAAI,CAAC;IAC3BE,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF;MACA,IAAIqC,QAAQ,GAAGC,gBAAgB,CAAC5D,IAAI,CAAC;MAErC,IAAI,CAAC2D,QAAQ,EAAE;QACbrC,YAAY,CAAC,aAAa,CAAC;QAC3BF,qBAAqB,CAAC,KAAK,CAAC;QAC5B;MACF;MAEAkB,OAAO,CAACuB,GAAG,CAAC,SAASF,QAAQ,WAAW,CAAC;MAEzC,MAAM3B,QAAQ,GAAG,MAAM8B,KAAK,CAAC,GAAG3G,YAAY,qBAAqB4G,kBAAkB,CAAC,IAAIJ,QAAQ,EAAE,CAAC,iBAAiB,CAAC;MAErH,IAAI,CAAC3B,QAAQ,CAACgC,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,YAAYjC,QAAQ,CAACkC,MAAM,EAAE,CAAC;MAChD;MAEA,MAAM9B,IAAI,GAAG,MAAMJ,QAAQ,CAACmC,IAAI,CAAC,CAAC;MAElC,IAAI/B,IAAI,IAAIA,IAAI,CAACgC,OAAO,EAAE;QACxB9B,OAAO,CAACuB,GAAG,CAAC,UAAUzB,IAAI,CAACgC,OAAO,CAAC9E,MAAM,MAAM,CAAC;;QAEhD;QACA,MAAM+E,eAAe,GAAGjC,IAAI,CAACgC,OAAO,CAACE,MAAM,CAACC,IAAI,IAAI;UAClD,MAAMC,SAAS,GAAGD,IAAI,CAACvE,IAAI,CAACyE,OAAO,CAAC,oBAAoB,EAAE,EAAE,CAAC;UAC7D,OAAOD,SAAS,CAAClF,MAAM,IAAI,CAAC,IAAIkF,SAAS,CAAClF,MAAM,IAAI,CAAC;QACvD,CAAC,CAAC;QAEFgD,OAAO,CAACuB,GAAG,CAAC,SAASQ,eAAe,CAAC/E,MAAM,MAAM,CAAC;QAElD,IAAI+E,eAAe,CAAC/E,MAAM,KAAK,CAAC,EAAE;UAChC;UACAgD,OAAO,CAACuB,GAAG,CAAC,eAAeF,QAAQ,QAAQ,CAAC;UAC5C,MAAMe,gBAAgB,GAAG,MAAMZ,KAAK,CAAC,GAAG3G,YAAY,qBAAqB4G,kBAAkB,CAACJ,QAAQ,CAAC,EAAE,CAAC;UACxG,MAAMgB,YAAY,GAAG,MAAMD,gBAAgB,CAACP,IAAI,CAAC,CAAC;UAElD,IAAIQ,YAAY,IAAIA,YAAY,CAACP,OAAO,EAAE;YACxC9B,OAAO,CAACuB,GAAG,CAAC,WAAWc,YAAY,CAACP,OAAO,CAAC9E,MAAM,MAAM,CAAC;YACzD;YACA,MAAMsF,qBAAqB,GAAGD,YAAY,CAACP,OAAO,CAACE,MAAM,CAACC,IAAI,IAAI;cAChE,OAAOA,IAAI,CAACvE,IAAI,CAAC6E,UAAU,CAAClB,QAAQ,CAAC,IAC9BY,IAAI,CAACvE,IAAI,CAACV,MAAM,IAAI,CAAC,IACrBiF,IAAI,CAACvE,IAAI,CAACV,MAAM,IAAI,CAAC;YAC9B,CAAC,CAAC;YAEF,IAAIsF,qBAAqB,CAACtF,MAAM,GAAG,CAAC,EAAE;cACpCgD,OAAO,CAACuB,GAAG,CAAC,WAAWe,qBAAqB,CAACtF,MAAM,MAAM,CAAC;cAC1D;cACA,MAAMwF,QAAQ,GAAG,CAAC,GAAGF,qBAAqB,CAAC,CAACG,IAAI,CAAC,MAAM,GAAG,GAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC;cAC3E/D,cAAc,CAAC4D,QAAQ,CAACI,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;cACpC9D,qBAAqB,CAAC,KAAK,CAAC;cAC5B;YACF;UACF;UAEAE,YAAY,CAAC,SAASqC,QAAQ,QAAQ,CAAC;QACzC,CAAC,MAAM;UACL;UACA,MAAMmB,QAAQ,GAAG,CAAC,GAAGT,eAAe,CAAC,CAACU,IAAI,CAAC,MAAM,GAAG,GAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC;UACrE/D,cAAc,CAAC4D,QAAQ,CAACI,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QACtC;MACF,CAAC,MAAM;QACL5D,YAAY,CAAC,UAAU,CAAC;MAC1B;IACF,CAAC,CAAC,OAAO3D,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACjC2D,YAAY,CAAC,SAAS3D,KAAK,CAACwH,OAAO,EAAE,CAAC;IACxC,CAAC,SAAS;MACR/D,qBAAqB,CAAC,KAAK,CAAC;IAC9B;EACF,CAAC;;EAED;EACA,MAAMwC,gBAAgB,GAAI5D,IAAI,IAAK;IACjC,IAAI,CAACA,IAAI,IAAIA,IAAI,CAACV,MAAM,KAAK,CAAC,EAAE,OAAO,IAAI;;IAE3C;IACA,MAAMkF,SAAS,GAAGxE,IAAI,CAACyE,OAAO,CAAC,oBAAoB,EAAE,EAAE,CAAC;IACxD,OAAOD,SAAS,CAAClF,MAAM,GAAG,CAAC,GAAGkF,SAAS,CAACA,SAAS,CAAClF,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI;EACtE,CAAC;;EAED;EACA,MAAM8F,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,IAAIrE,eAAe,IAAI,CAACI,kBAAkB,EAAE;MAC1CmC,gBAAgB,CAACvC,eAAe,CAACf,IAAI,CAAC;IACxC;EACF,CAAC;;EAED;EACA,MAAMqF,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAIxE,OAAO,CAACvB,MAAM,IAAI,CAAC,EAAE;MACvB;MACAkB,cAAc,CAAC,KAAK,CAAC;MACrBM,UAAU,CAAC,EAAE,CAAC;MACdE,kBAAkB,CAAC,IAAI,CAAC;MACxBE,cAAc,CAAC,EAAE,CAAC;MAClBU,WAAW,CAAC,EAAE,CAAC;MACf;IACF;;IAEA;IACA,MAAM0D,MAAM,GAAGzE,OAAO,CAACqE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACnC,MAAMK,WAAW,GAAG5D,QAAQ,CAACuD,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACzCpE,UAAU,CAACwE,MAAM,CAAC;IAClB1D,WAAW,CAAC2D,WAAW,CAAC;IACxBvE,kBAAkB,CAACsE,MAAM,CAACA,MAAM,CAAChG,MAAM,GAAG,CAAC,CAAC,CAAC;IAC7CgE,gBAAgB,CAACgC,MAAM,CAACA,MAAM,CAAChG,MAAM,GAAG,CAAC,CAAC,CAACU,IAAI,CAAC;EAClD,CAAC;;EAED;EACA,MAAMwF,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC;IACA,MAAMC,gBAAgB,GAAG5E,OAAO,CAACtB,GAAG,CAACmG,KAAK,IAAIA,KAAK,CAAC3C,OAAO,CAAC,CAACuB,MAAM,CAACqB,GAAG,IAAIA,GAAG,CAAC;IAE/E,IAAIF,gBAAgB,CAACnG,MAAM,KAAK,CAAC,EAAE;MACjCgC,YAAY,CAAC,UAAU,CAAC;MACxB;IACF;IAEAI,mBAAmB,CAAC,IAAI,CAAC;IACzBJ,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF,MAAMU,QAAQ,GAAG,MAAMnF,KAAK,CAAC6F,IAAI,CAAC,GAAGvF,YAAY,kBAAkB,EAAE;QACnEyI,SAAS,EAAEH;MACb,CAAC,CAAC;MAEF,IAAIzD,QAAQ,CAACI,IAAI,CAACU,OAAO,EAAE;QACzB;QACA,MAAM+C,CAAC,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;QACrCF,CAAC,CAACG,IAAI,GAAG,GAAG7I,YAAY,GAAG6E,QAAQ,CAACI,IAAI,CAAC6D,gBAAgB,EAAE;QAC3DJ,CAAC,CAACK,QAAQ,GAAG,WAAW;QACxBJ,QAAQ,CAACK,IAAI,CAACC,WAAW,CAACP,CAAC,CAAC;QAC5BA,CAAC,CAACQ,KAAK,CAAC,CAAC;QACTP,QAAQ,CAACK,IAAI,CAACG,WAAW,CAACT,CAAC,CAAC;MAC9B,CAAC,MAAM;QACLvE,YAAY,CAAC,QAAQ,CAAC;MACxB;IACF,CAAC,CAAC,OAAO3D,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;MAC/B2D,YAAY,CAAC,mBAAmB,CAAC;IACnC,CAAC,SAAS;MACRI,mBAAmB,CAAC,KAAK,CAAC;IAC5B;EACF,CAAC;;EAED;EACA,MAAM6E,YAAY,GAAGA,CAAA,KAAM;IACzBzF,UAAU,CAAC,EAAE,CAAC;IACdiB,kBAAkB,CAAC,CAAC;IACpBvB,cAAc,CAAC,KAAK,CAAC;IACrBQ,kBAAkB,CAAC,IAAI,CAAC;IACxBE,cAAc,CAAC,EAAE,CAAC;IAClBU,WAAW,CAAC,EAAE,CAAC;IACf5D,WAAW,CAAC,EAAE,CAAC;IACfwD,iBAAiB,CAAC,IAAI,CAAC;IACvBM,gBAAgB,CAAC,KAAK,CAAC;EACzB,CAAC;;EAED;EACAlF,SAAS,CAAC,MAAM;IACd,IAAIc,SAAS,KAAK,WAAW,EAAE;MAC7BqE,kBAAkB,CAAC,CAAC;IACtB;EACF,CAAC,EAAE,CAACrE,SAAS,CAAC,CAAC;EAEf,oBACEX,OAAA;IAAK0B,SAAS,EAAC,sBAAsB;IAAAD,QAAA,gBACnCzB,OAAA;MAAK0B,SAAS,EAAC,eAAe;MAAAD,QAAA,gBAC5BzB,OAAA;QACE2C,OAAO,EAAE6G,YAAa;QACtB9H,SAAS,EAAC,cAAc;QACxBQ,QAAQ,EAAEvB,SAAS,KAAK,WAAY;QAAAc,QAAA,EACrC;MAED;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EACRkB,WAAW,iBACVxD,OAAA;QACE2C,OAAO,EAAE2F,aAAc;QACvB5G,SAAS,EAAC,UAAU;QACpBQ,QAAQ,EAAE4B,OAAO,CAACvB,MAAM,KAAK,CAAE;QAAAd,QAAA,EAChC;MAED;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CACT,EACAsC,QAAQ,CAACrC,MAAM,GAAG,CAAC,iBAClBvC,OAAA;QACE2C,OAAO,EAAE8F,iBAAkB;QAC3B/G,SAAS,EAAC,YAAY;QACtBQ,QAAQ,EAAEwC,gBAAiB;QAAAjD,QAAA,EAE1BiD,gBAAgB,GAAG,QAAQ,GAAG;MAAQ;QAAAvC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjC,CACT;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAELgC,SAAS,iBAAItE,OAAA;MAAK0B,SAAS,EAAC,eAAe;MAAAD,QAAA,EAAE6C;IAAS;MAAAnC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eAE9DtC,OAAA;MAAK0B,SAAS,EAAC,cAAc;MAAAD,QAAA,gBAE3BzB,OAAA;QAAK0B,SAAS,EAAC,iBAAiB;QAAAD,QAAA,GAC7B,CAAC+B,WAAW,gBACXxD,OAAA;UAAK0B,SAAS,EAAC,oBAAoB;UAAAD,QAAA,gBACjCzB,OAAA;YAAK0B,SAAS,EAAC,gBAAgB;YAAAD,QAAA,gBAC7BzB,OAAA;cAAAyB,QAAA,EAAI;YAAM;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACftC,OAAA;cACE2C,OAAO,EAAE6C,oBAAqB;cAC9B9D,SAAS,EAAC,aAAa;cACvBQ,QAAQ,EAAE0B,cAAc,IAAIjD,SAAS,KAAK,WAAY;cAAAc,QAAA,EACvD;YAED;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,EAELsB,cAAc,gBACb5D,OAAA;YAAK0B,SAAS,EAAC,SAAS;YAAAD,QAAA,EAAC;UAAU;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,gBAEzCtC,OAAA;YAAI0B,SAAS,EAAC,cAAc;YAAAD,QAAA,EACzBiC,cAAc,CAAClB,GAAG,CAAC,CAAC2D,MAAM,EAAEzD,KAAK,kBAChC1C,OAAA;cAEE2C,OAAO,EAAEA,CAAA,KAAMuD,mBAAmB,CAACC,MAAM,CAAE;cAC3CzE,SAAS,EAAE8C,cAAc,KAAK2B,MAAM,GAAG,sBAAsB,GAAG,aAAc;cAAA1E,QAAA,gBAE9EzB,OAAA;gBAAK0B,SAAS,EAAC,aAAa;gBAAAD,QAAA,EAAE0E,MAAM,CAAClD;cAAI;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAChDtC,OAAA;gBAAK0B,SAAS,EAAC,aAAa;gBAAAD,QAAA,gBAC1BzB,OAAA;kBAAM0B,SAAS,EAAC,SAAS;kBAAAD,QAAA,EAAEF,aAAa,CAAC4E,MAAM,CAACvD,OAAO;gBAAC;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAChEtC,OAAA;kBAAM0B,SAAS,EAAC,MAAM;kBAAAD,QAAA,EAAEH,UAAU,CAAC6E,MAAM,CAACtD,aAAa;gBAAC;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAChEtC,OAAA;kBAAM0B,SAAS,EAAE,iBAAiB+H,mBAAmB,CAACtD,MAAM,CAAClD,IAAI,CAAC,EAAG;kBAAAxB,QAAA,EAAEgI,mBAAmB,CAACtD,MAAM,CAAClD,IAAI;gBAAC;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC5G,CAAC;YAAA,GATDI,KAAK;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAUR,CACL;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CACL,EACAoB,cAAc,CAACnB,MAAM,KAAK,CAAC,IAAI,CAACqB,cAAc,iBAC7C5D,OAAA;YAAK0B,SAAS,EAAC,YAAY;YAAAD,QAAA,gBACzBzB,OAAA;cAAAyB,QAAA,EAAG;YAAS;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eAChBtC,OAAA;cACE2C,OAAO,EAAEqC,kBAAmB;cAC5B9C,QAAQ,EAAEvB,SAAS,KAAK,WAAY;cAAAc,QAAA,EACrC;YAED;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,gBAENtC,OAAA,CAAAE,SAAA;UAAAuB,QAAA,gBACEzB,OAAA;YAAK0B,SAAS,EAAC,iBAAiB;YAAAD,QAAA,gBAC9BzB,OAAA;cAAAyB,QAAA,EAAI;YAAI;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACbtC,OAAA;cAAK0B,SAAS,EAAC,kBAAkB;cAAAD,QAAA,gBAC/BzB,OAAA;gBAAK0B,SAAS,EAAC,cAAc;gBAAAD,QAAA,EAAEuC,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEf;cAAI;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAC3DtC,OAAA;gBAAK0B,SAAS,EAAC,cAAc;gBAAAD,QAAA,gBAC3BzB,OAAA;kBAAM0B,SAAS,EAAC,SAAS;kBAAAD,QAAA,EAAEF,aAAa,CAACyC,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEpB,OAAO;gBAAC;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC1EtC,OAAA;kBAAM0B,SAAS,EAAC,MAAM;kBAAAD,QAAA,EAAEH,UAAU,CAAC0C,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEnB,aAAa;gBAAC;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvE,CAAC,eACNtC,OAAA;gBAAK0B,SAAS,EAAC,WAAW;gBAAAD,QAAA,GAAC,sCACnB,EAACoF,gBAAgB,CAAC7C,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEf,IAAI,CAAC,EAAC,0BACjD;cAAA;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAENtC,OAAA;YAAK0B,SAAS,EAAC,sBAAsB;YAAAD,QAAA,gBACnCzB,OAAA;cAAK0B,SAAS,EAAC,gBAAgB;cAAAD,QAAA,gBAC7BzB,OAAA;gBAAAyB,QAAA,EAAI;cAAI;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACbtC,OAAA;gBACE2C,OAAO,EAAE0F,kBAAmB;gBAC5B3G,SAAS,EAAC,aAAa;gBACvBQ,QAAQ,EAAEkC,kBAAmB;gBAAA3C,QAAA,EAC9B;cAED;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,EAEL8B,kBAAkB,gBACjBpE,OAAA;cAAK0B,SAAS,EAAC,SAAS;cAAAD,QAAA,EAAC;YAAU;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,gBAEzCtC,OAAA;cAAI0B,SAAS,EAAC,cAAc;cAAAD,QAAA,EACzByC,WAAW,CAAC1B,GAAG,CAAC,CAACkE,MAAM,EAAEhE,KAAK,kBAC7B1C,OAAA;gBAEE2C,OAAO,EAAEA,CAAA,KAAM8D,kBAAkB,CAACC,MAAM,CAAE;gBAC1ChF,SAAS,EAAE8C,cAAc,KAAKkC,MAAM,GAAG,sBAAsB,GAAG,aAAc;gBAAAjF,QAAA,gBAE9EzB,OAAA;kBAAK0B,SAAS,EAAC,aAAa;kBAAAD,QAAA,EAAEiF,MAAM,CAACzD;gBAAI;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAChDtC,OAAA;kBAAK0B,SAAS,EAAC,aAAa;kBAAAD,QAAA,gBAC1BzB,OAAA;oBAAM0B,SAAS,EAAC,SAAS;oBAAAD,QAAA,EAAEF,aAAa,CAACmF,MAAM,CAAC9D,OAAO;kBAAC;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAChEtC,OAAA;oBAAM0B,SAAS,EAAC,MAAM;oBAAAD,QAAA,EAAEH,UAAU,CAACoF,MAAM,CAAC7D,aAAa;kBAAC;oBAAAV,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAChEtC,OAAA;oBAAM0B,SAAS,EAAE,iBAAiB+H,mBAAmB,CAAC/C,MAAM,CAACzD,IAAI,CAAC,EAAG;oBAAAxB,QAAA,EAAEgI,mBAAmB,CAAC/C,MAAM,CAACzD,IAAI;kBAAC;oBAAAd,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5G,CAAC;cAAA,GATDI,KAAK;gBAAAP,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAUR,CACL;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CACL,EACA4B,WAAW,CAAC3B,MAAM,KAAK,CAAC,IAAI,CAAC6B,kBAAkB,iBAC9CpE,OAAA;cAAK0B,SAAS,EAAC,YAAY;cAAAD,QAAA,gBACzBzB,OAAA;gBAAAyB,QAAA,EAAG;cAAW;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eAClBtC,OAAA;gBAAQ2C,OAAO,EAAE6G,YAAa;gBAAA/H,QAAA,EAAC;cAAI;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzC,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA,eACN,CACH,eAGDtC,OAAA;UAAK0B,SAAS,EAAC,kBAAkB;UAAAD,QAAA,gBAC/BzB,OAAA;YAAAyB,QAAA,EAAI;UAAI;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EACZwB,OAAO,CAACvB,MAAM,GAAG,CAAC,gBACjBvC,OAAA;YAAI0B,SAAS,EAAC,eAAe;YAAAD,QAAA,EAC1BqC,OAAO,CAACtB,GAAG,CAAC,CAACsE,GAAG,EAAEpE,KAAK,kBACtB1C,OAAA;cAAgB0B,SAAS,EAAC,UAAU;cAAAD,QAAA,gBAClCzB,OAAA;gBAAK0B,SAAS,EAAC,UAAU;gBAAAD,QAAA,EAAEqF,GAAG,CAAC7D;cAAI;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAC1CtC,OAAA;gBAAK0B,SAAS,EAAC,UAAU;gBAAAD,QAAA,gBACvBzB,OAAA;kBAAM0B,SAAS,EAAC,SAAS;kBAAAD,QAAA,EAAEF,aAAa,CAACuF,GAAG,CAAClE,OAAO;gBAAC;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC7DtC,OAAA;kBAAM0B,SAAS,EAAC,MAAM;kBAAAD,QAAA,EAAEH,UAAU,CAACwF,GAAG,CAACjE,aAAa;gBAAC;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,EAC5DwE,GAAG,CAACd,OAAO,iBACVhG,OAAA;kBAAM0B,SAAS,EAAC,WAAW;kBAAAD,QAAA,eACzBzB,OAAA;oBAAG0B,SAAS,EAAC,YAAY;oBAAAD,QAAA,EAAC;kBAAE;oBAAAU,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5B,CACP;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC;YAAA,GAVCI,KAAK;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAWV,CACL;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC,gBAELtC,OAAA;YAAK0B,SAAS,EAAC,WAAW;YAAAD,QAAA,EAAC;UAAM;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CACvC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNtC,OAAA;QAAK0B,SAAS,EAAC,oBAAoB;QAAAD,QAAA,GAChCqD,aAAa,iBACZ9E,OAAA;UAAK0B,SAAS,EAAC,iBAAiB;UAAAD,QAAA,gBAC9BzB,OAAA;YAAK0B,SAAS,EAAC,mBAAmB;YAAAD,QAAA,gBAChCzB,OAAA;cAAK0B,SAAS,EAAC,eAAe;cAAAD,QAAA,EAAE+C,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEvB;YAAI;cAAAd,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC3DtC,OAAA;cAAK0B,SAAS,EAAC,eAAe;cAAAD,QAAA,gBAC5BzB,OAAA;gBAAM0B,SAAS,EAAC,SAAS;gBAAAD,QAAA,EAAEF,aAAa,CAACiD,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE5B,OAAO;cAAC;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACzEtC,OAAA;gBAAM0B,SAAS,EAAC,MAAM;gBAAAD,QAAA,EAAEH,UAAU,CAACkD,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE3B,aAAa;cAAC;gBAAAV,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAENtC,OAAA;YAAK0B,SAAS,EAAC,eAAe;YAAAD,QAAA,EAC3BP,cAAc,gBACblB,OAAA;cAAK0B,SAAS,EAAC,eAAe;cAAAD,QAAA,EAAC;YAAc;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,GACjDtB,QAAQ,gBACVhB,OAAA;cACEkD,QAAQ;cACRC,QAAQ;cACRzB,SAAS,EAAC,eAAe;cACzB0B,GAAG,EAAEpC;YAAS;cAAAmB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf,CAAC,gBAEFtC,OAAA;cAAK0B,SAAS,EAAC,mBAAmB;cAAAD,QAAA,EAAC;YAAW;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK;UACpD;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eAENtC,OAAA;YAAK0B,SAAS,EAAC,iBAAiB;YAAAD,QAAA,gBAC9BzB,OAAA;cACE0B,SAAS,EAAC,aAAa;cACvBiB,OAAO,EAAEa,WAAW,GAAGmD,mBAAmB,GAAGP,oBAAqB;cAClElE,QAAQ,EAAEhB,cAAc,IAAI,CAACF,QAAS;cAAAS,QAAA,EACvC;YAED;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTtC,OAAA;cACE0B,SAAS,EAAC,YAAY;cACtBiB,OAAO,EAAE6D,eAAgB;cAAA/E,QAAA,EAC1B;YAED;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,EACA,CAACwC,aAAa,iBACb9E,OAAA;UAAK0B,SAAS,EAAC,eAAe;UAAAD,QAAA,gBAC5BzB,OAAA;YAAAyB,QAAA,EAAI;UAAI;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EACZpB,cAAc,gBACblB,OAAA;YAAK0B,SAAS,EAAC,eAAe;YAAAD,QAAA,EAAC;UAAc;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,GACjDtB,QAAQ,gBACVhB,OAAA;YACEkD,QAAQ;YACRC,QAAQ;YACRzB,SAAS,EAAC,eAAe;YACzB0B,GAAG,EAAEpC;UAAS;YAAAmB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACf,CAAC,gBAEFtC,OAAA;YAAK0B,SAAS,EAAC,yBAAyB;YAAAD,QAAA,eACtCzB,OAAA;cAAK0B,SAAS,EAAC,kBAAkB;cAAAD,QAAA,gBAC/BzB,OAAA;gBAAAyB,QAAA,EAAG;cAAU;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eACjBtC,OAAA;gBAAAyB,QAAA,EAAG;cAAW;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;;AAED;AAAAiB,EAAA,CA5hBMD,aAAa;AAAAoG,GAAA,GAAbpG,aAAa;AA6hBnB,MAAMqG,aAAa,GAAGA,CAAC;EACrBvJ,YAAY;EACZO,SAAS;EACTW,UAAU;EACVC;AACF,CAAC,KAAK;EAAAqI,GAAA;EACJ,MAAM,CAACpG,WAAW,EAAEC,cAAc,CAAC,GAAG7D,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC8D,cAAc,EAAEC,iBAAiB,CAAC,GAAG/D,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACgE,cAAc,EAAEC,iBAAiB,CAAC,GAAGjE,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACkE,OAAO,EAAEC,UAAU,CAAC,GAAGnE,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACoE,eAAe,EAAEC,kBAAkB,CAAC,GAAGrE,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAACsE,WAAW,EAAEC,cAAc,CAAC,GAAGvE,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACwE,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGzE,QAAQ,CAAC,KAAK,CAAC;EACnE,MAAM,CAAC0E,SAAS,EAAEC,YAAY,CAAC,GAAG3E,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACoB,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACsB,cAAc,EAAEC,iBAAiB,CAAC,GAAGvB,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAAC4E,cAAc,EAAEC,iBAAiB,CAAC,GAAG7E,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAAC8E,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG/E,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAACgF,QAAQ,EAAEC,WAAW,CAAC,GAAGjF,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACkF,aAAa,EAAEC,gBAAgB,CAAC,GAAGnF,QAAQ,CAAC,KAAK,CAAC;;EAEzD;EACA,MAAMoF,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACrCnB,iBAAiB,CAAC,IAAI,CAAC;IACvBU,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF,MAAMU,QAAQ,GAAG,MAAMnF,KAAK,CAACoF,GAAG,CAAC,GAAG9E,YAAY,uBAAuB,EAAE;QACvE+E,MAAM,EAAE;UAAEC,KAAK,EAAE;QAAE;MACrB,CAAC,CAAC;MAEF,IAAIH,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACC,SAAS,EAAE;QAC5C3B,iBAAiB,CAACsB,QAAQ,CAACI,IAAI,CAACC,SAAS,CAAC;MAC5C,CAAC,MAAM;QACLf,YAAY,CAAC,UAAU,CAAC;MAC1B;IACF,CAAC,CAAC,OAAO3D,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACjC2D,YAAY,CAAC,uBAAuB,CAAC;IACvC,CAAC,SAAS;MACRV,iBAAiB,CAAC,KAAK,CAAC;IAC1B;EACF,CAAC;;EAED;EACA,MAAM2B,oBAAoB,GAAGA,CAAA,KAAM;IACjC,IAAI7E,SAAS,KAAK,WAAW,IAAI,CAACiD,cAAc,EAAE;MAChDoB,kBAAkB,CAAC,CAAC;IACtB;EACF,CAAC;;EAED;EACA,MAAMS,iBAAiB,GAAG,MAAOC,QAAQ,IAAK;IAC5CvE,iBAAiB,CAAC,IAAI,CAAC;IACvBF,WAAW,CAAC,EAAE,CAAC;IACfsD,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF,MAAMU,QAAQ,GAAG,MAAMnF,KAAK,CAAC6F,IAAI,CAAC,GAAGvF,YAAY,oBAAoB,EAAE;QACrEwC,OAAO,EAAE8C,QAAQ,CAAC9C,OAAO;QACzBgD,UAAU,EAAEF,QAAQ,CAAC7C,aAAa;QAClCgD,QAAQ,EAAEH,QAAQ,CAAC5C,WAAW;QAC9BgD,eAAe,EAAE;MACnB,CAAC,CAAC;MAEF,IAAIb,QAAQ,CAACI,IAAI,CAACU,OAAO,EAAE;QACzB,MAAMC,OAAO,GAAG,GAAG5F,YAAY,GAAG6E,QAAQ,CAACI,IAAI,CAACY,SAAS,EAAE;QAC3DhF,WAAW,CAAC+E,OAAO,CAAC;QACpB,OAAOA,OAAO;MAChB,CAAC,MAAM;QACLzB,YAAY,CAAC,UAAU,CAAC;QACxB,OAAO,IAAI;MACb;IACF,CAAC,CAAC,OAAO3D,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACjC2D,YAAY,CAAC,wBAAwB,CAAC;MACtC,OAAO,IAAI;IACb,CAAC,SAAS;MACRpD,iBAAiB,CAAC,KAAK,CAAC;IAC1B;EACF,CAAC;;EAED;EACA,MAAM+E,mBAAmB,GAAIC,MAAM,IAAK;IACtC1B,iBAAiB,CAAC0B,MAAM,CAAC;IACzBpB,gBAAgB,CAAC,IAAI,CAAC;IACtBU,iBAAiB,CAACU,MAAM,CAAC;EAC3B,CAAC;;EAED;EACA,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;IACjC,MAAMC,QAAQ,GAAG7B,cAAc;IAC/B,IAAI,CAAC6B,QAAQ,EAAE;IAEfpC,kBAAkB,CAACoC,QAAQ,CAAC;IAC5BtC,UAAU,CAAC,CAAC;MAAC,GAAGsC,QAAQ;MAAEC,IAAI,EAAE,CAAC;MAAEN,OAAO,EAAEhF;IAAQ,CAAC,CAAC,CAAC;IACvD6D,WAAW,CAAC,CAAC,GAAGD,QAAQ,EAAE5D,QAAQ,CAAC,CAAC;IACpCyC,cAAc,CAAC,IAAI,CAAC;IACpBoG,mBAAmB,CAACxD,QAAQ,CAACpD,IAAI,CAAC;IAClC8B,gBAAgB,CAAC,KAAK,CAAC;IACvBN,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC;;EAED;EACA,MAAM+B,eAAe,GAAGA,CAAA,KAAM;IAC5BzB,gBAAgB,CAAC,KAAK,CAAC;IACvBN,iBAAiB,CAAC,IAAI,CAAC;IACvBxD,WAAW,CAAC,EAAE,CAAC;EACjB,CAAC;;EAED;EACA,MAAMwF,kBAAkB,GAAIC,MAAM,IAAK;IACrCjC,iBAAiB,CAACiC,MAAM,CAAC;IACzB3B,gBAAgB,CAAC,IAAI,CAAC;IACtBU,iBAAiB,CAACiB,MAAM,CAAC;EAC3B,CAAC;;EAED;EACA,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;IAChC,MAAMN,QAAQ,GAAG7B,cAAc;IAC/B,IAAI,CAAC6B,QAAQ,EAAE;IAEfpC,kBAAkB,CAACoC,QAAQ,CAAC;IAC5BtC,UAAU,CAAC,CAAC,GAAGD,OAAO,EAAE;MAAC,GAAGuC,QAAQ;MAAEC,IAAI,EAAExC,OAAO,CAACvB,MAAM,GAAG,CAAC;MAAEyD,OAAO,EAAEhF;IAAQ,CAAC,CAAC,CAAC;IACpF6D,WAAW,CAAC,CAAC,GAAGD,QAAQ,EAAE5D,QAAQ,CAAC,CAAC;IACpC6I,mBAAmB,CAACxD,QAAQ,CAACpD,IAAI,CAAC;IAClC8B,gBAAgB,CAAC,KAAK,CAAC;IACvBN,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC;;EAED;EACA,MAAMoF,mBAAmB,GAAG,MAAO5G,IAAI,IAAK;IAC1C,IAAI,CAACA,IAAI,EAAE;IAEXoB,qBAAqB,CAAC,IAAI,CAAC;IAC3BE,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF;MACA,MAAMqC,QAAQ,GAAGC,gBAAgB,CAAC5D,IAAI,CAAC;MAEvC,IAAI,CAAC2D,QAAQ,EAAE;QACbrC,YAAY,CAAC,aAAa,CAAC;QAC3BF,qBAAqB,CAAC,KAAK,CAAC;QAC5B;MACF;MAEAkB,OAAO,CAACuB,GAAG,CAAC,SAASF,QAAQ,WAAW,CAAC;;MAEzC;MACA,MAAM3B,QAAQ,GAAG,MAAMnF,KAAK,CAACoF,GAAG,CAAC,GAAG9E,YAAY,wBAAwB,EAAE;QACxE+E,MAAM,EAAE;UACNlC,IAAI,EAAEA,IAAI;UACV6G,UAAU,EAAE,CAAC;UACbC,UAAU,EAAE,CAAC;UACbC,KAAK,EAAE;QACT;MACF,CAAC,CAAC;MAEF,IAAI/E,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACC,SAAS,EAAE;QAC5CC,OAAO,CAACuB,GAAG,CAAC,UAAU7B,QAAQ,CAACI,IAAI,CAACC,SAAS,CAAC/C,MAAM,QAAQ,CAAC;QAC7D4B,cAAc,CAACc,QAAQ,CAACI,IAAI,CAACC,SAAS,CAAC;MACzC,CAAC,MAAM;QACLf,YAAY,CAAC,gBAAgB,CAAC;QAC9BJ,cAAc,CAAC,EAAE,CAAC;MACpB;IACF,CAAC,CAAC,OAAOvD,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACjC2D,YAAY,CAAC,SAAS3D,KAAK,CAACwH,OAAO,EAAE,CAAC;MACtCjE,cAAc,CAAC,EAAE,CAAC;IACpB,CAAC,SAAS;MACRE,qBAAqB,CAAC,KAAK,CAAC;IAC9B;EACF,CAAC;;EAED;EACA,MAAMwC,gBAAgB,GAAI5D,IAAI,IAAK;IACjC,IAAI,CAACA,IAAI,IAAIA,IAAI,CAACV,MAAM,KAAK,CAAC,EAAE,OAAO,IAAI;;IAE3C;IACA,MAAMkF,SAAS,GAAGxE,IAAI,CAACyE,OAAO,CAAC,oBAAoB,EAAE,EAAE,CAAC;IACxD,OAAOD,SAAS,CAAClF,MAAM,GAAG,CAAC,GAAGkF,SAAS,CAACA,SAAS,CAAClF,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI;EACtE,CAAC;;EAED;EACA,MAAM8F,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,IAAIrE,eAAe,IAAI,CAACI,kBAAkB,EAAE;MAC1CyF,mBAAmB,CAAC7F,eAAe,CAACf,IAAI,CAAC;IAC3C;EACF,CAAC;;EAED;EACA,MAAMqF,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAIxE,OAAO,CAACvB,MAAM,IAAI,CAAC,EAAE;MACvB;MACAkB,cAAc,CAAC,KAAK,CAAC;MACrBM,UAAU,CAAC,EAAE,CAAC;MACdE,kBAAkB,CAAC,IAAI,CAAC;MACxBE,cAAc,CAAC,EAAE,CAAC;MAClBU,WAAW,CAAC,EAAE,CAAC;MACf5D,WAAW,CAAC,EAAE,CAAC;MACf+D,kBAAkB,CAAC,CAAC;IACtB,CAAC,MAAM;MACL;MACA,MAAMuD,MAAM,GAAG,CAAC,GAAGzE,OAAO,CAAC;MAC3ByE,MAAM,CAAC0B,GAAG,CAAC,CAAC;MACZlG,UAAU,CAACwE,MAAM,CAAC;;MAElB;MACA,MAAM2B,YAAY,GAAG3B,MAAM,CAACA,MAAM,CAAChG,MAAM,GAAG,CAAC,CAAC;MAC9C0B,kBAAkB,CAACiG,YAAY,CAAC;;MAEhC;MACA,MAAM1B,WAAW,GAAG,CAAC,GAAG5D,QAAQ,CAAC;MACjC4D,WAAW,CAACyB,GAAG,CAAC,CAAC;MACjBpF,WAAW,CAAC2D,WAAW,CAAC;;MAExB;MACAqB,mBAAmB,CAACK,YAAY,CAACjH,IAAI,CAAC;IACxC;EACF,CAAC;;EAED;EACA,MAAMwF,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI7D,QAAQ,CAACrC,MAAM,KAAK,CAAC,EAAE;IAE3BoC,mBAAmB,CAAC,IAAI,CAAC;IACzBJ,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF,MAAMU,QAAQ,GAAG,MAAMnF,KAAK,CAAC6F,IAAI,CAAC,GAAGvF,YAAY,kBAAkB,EAAE;QACnEyI,SAAS,EAAEjE;MACb,CAAC,CAAC;MAEF,IAAIK,QAAQ,CAACI,IAAI,CAACU,OAAO,EAAE;QACzB,MAAMoE,cAAc,GAAG,GAAG/J,YAAY,GAAG6E,QAAQ,CAACI,IAAI,CAACY,SAAS,EAAE;;QAElE;QACA,MAAMmE,IAAI,GAAGrB,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;QACxCoB,IAAI,CAACnB,IAAI,GAAGkB,cAAc;QAC1BC,IAAI,CAACjB,QAAQ,GAAG,UAAU;QAC1BiB,IAAI,CAACd,KAAK,CAAC,CAAC;QAEZ/D,OAAO,CAACuB,GAAG,CAAC,cAAc,CAAC;MAC7B,CAAC,MAAM;QACLvC,YAAY,CAAC,UAAU,IAAIU,QAAQ,CAACI,IAAI,CAACzE,KAAK,IAAI,MAAM,CAAC,CAAC;MAC5D;IACF,CAAC,CAAC,OAAOA,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;MAC/B2D,YAAY,CAAC,YAAY,GAAG3D,KAAK,CAACwH,OAAO,CAAC;IAC5C,CAAC,SAAS;MACRzD,mBAAmB,CAAC,KAAK,CAAC;IAC5B;EACF,CAAC;;EAED;EACA,MAAM6E,YAAY,GAAGA,CAAA,KAAM;IACzBzF,UAAU,CAAC,EAAE,CAAC;IACdiB,kBAAkB,CAAC,CAAC;IACpBvB,cAAc,CAAC,KAAK,CAAC;IACrBQ,kBAAkB,CAAC,IAAI,CAAC;IACxBE,cAAc,CAAC,EAAE,CAAC;IAClBU,WAAW,CAAC,EAAE,CAAC;IACf5D,WAAW,CAAC,EAAE,CAAC;IACfwD,iBAAiB,CAAC,IAAI,CAAC;IACvBM,gBAAgB,CAAC,KAAK,CAAC;EACzB,CAAC;;EAED;EACAlF,SAAS,CAAC,MAAM;IACd,IAAIc,SAAS,KAAK,WAAW,EAAE;MAC7BqE,kBAAkB,CAAC,CAAC;IACtB;EACF,CAAC,EAAE,CAACrE,SAAS,CAAC,CAAC;EAEf,oBACEX,OAAA;IAAK0B,SAAS,EAAC,sBAAsB;IAAAD,QAAA,gBACnCzB,OAAA;MAAK0B,SAAS,EAAC,eAAe;MAAAD,QAAA,gBAC5BzB,OAAA;QACE2C,OAAO,EAAE6G,YAAa;QACtB9H,SAAS,EAAC,cAAc;QACxBQ,QAAQ,EAAEvB,SAAS,KAAK,WAAY;QAAAc,QAAA,EACrC;MAED;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EAERwB,OAAO,CAACvB,MAAM,GAAG,CAAC,iBACjBvC,OAAA,CAAAE,SAAA;QAAAuB,QAAA,gBACEzB,OAAA;UACE2C,OAAO,EAAE2F,aAAc;UACvB5G,SAAS,EAAC,UAAU;UACpBQ,QAAQ,EAAE4C,aAAc;UAAArD,QAAA,EACzB;QAED;UAAAU,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAETtC,OAAA;UACE2C,OAAO,EAAE8F,iBAAkB;UAC3B/G,SAAS,EAAC,YAAY;UACtBQ,QAAQ,EAAE4B,OAAO,CAACvB,MAAM,GAAG,CAAC,IAAImC,gBAAiB;UAAAjD,QAAA,EAEhDiD,gBAAgB,GAAG,QAAQ,GAAG;QAAQ;UAAAvC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjC,CAAC;MAAA,eACT,CACH;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAELgC,SAAS,iBACRtE,OAAA;MAAK0B,SAAS,EAAC,YAAY;MAAAD,QAAA,EAAE6C;IAAS;MAAAnC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAC7C,eAEDtC,OAAA;MAAK0B,SAAS,EAAC,cAAc;MAAAD,QAAA,gBAE3BzB,OAAA;QAAK0B,SAAS,EAAC,iBAAiB;QAAAD,QAAA,GAC7B,CAAC+B,WAAW,gBACXxD,OAAA;UAAK0B,SAAS,EAAC,oBAAoB;UAAAD,QAAA,gBACjCzB,OAAA;YAAK0B,SAAS,EAAC,gBAAgB;YAAAD,QAAA,gBAC7BzB,OAAA;cAAAyB,QAAA,EAAI;YAAM;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACftC,OAAA;cACE2C,OAAO,EAAE6C,oBAAqB;cAC9B9D,SAAS,EAAC,aAAa;cACvBQ,QAAQ,EAAE0B,cAAc,IAAIjD,SAAS,KAAK,WAAY;cAAAc,QAAA,EACvD;YAED;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,EAELsB,cAAc,gBACb5D,OAAA;YAAK0B,SAAS,EAAC,SAAS;YAAAD,QAAA,EAAC;UAAU;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,gBAEzCtC,OAAA;YAAI0B,SAAS,EAAC,cAAc;YAAAD,QAAA,EACzBiC,cAAc,CAAClB,GAAG,CAAC,CAAC2D,MAAM,EAAEzD,KAAK,kBAChC1C,OAAA;cAEE2C,OAAO,EAAEA,CAAA,KAAMuD,mBAAmB,CAACC,MAAM,CAAE;cAC3CzE,SAAS,EAAE8C,cAAc,KAAK2B,MAAM,GAAG,sBAAsB,GAAG,aAAc;cAAA1E,QAAA,gBAE9EzB,OAAA;gBAAK0B,SAAS,EAAC,aAAa;gBAAAD,QAAA,EAAE0E,MAAM,CAAClD;cAAI;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAChDtC,OAAA;gBAAK0B,SAAS,EAAC,aAAa;gBAAAD,QAAA,gBAC1BzB,OAAA;kBAAM0B,SAAS,EAAC,SAAS;kBAAAD,QAAA,EAAEF,aAAa,CAAC4E,MAAM,CAACvD,OAAO;gBAAC;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAChEtC,OAAA;kBAAM0B,SAAS,EAAC,MAAM;kBAAAD,QAAA,EAAEH,UAAU,CAAC6E,MAAM,CAACtD,aAAa;gBAAC;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAChEtC,OAAA;kBAAM0B,SAAS,EAAE,iBAAiB+H,mBAAmB,CAACtD,MAAM,CAAClD,IAAI,CAAC,EAAG;kBAAAxB,QAAA,EAAEgI,mBAAmB,CAACtD,MAAM,CAAClD,IAAI;gBAAC;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC5G,CAAC;YAAA,GATDI,KAAK;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAUR,CACL;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CACL,EAEAoB,cAAc,CAACnB,MAAM,KAAK,CAAC,IAAI,CAACqB,cAAc,iBAC7C5D,OAAA;YAAK0B,SAAS,EAAC,eAAe;YAAAD,QAAA,gBAC5BzB,OAAA;cAAAyB,QAAA,EAAG;YAAS;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eAChBtC,OAAA;cAAQ2C,OAAO,EAAE6C,oBAAqB;cAAA/D,QAAA,EAAC;YAAI;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjD,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,gBAENtC,OAAA,CAAAE,SAAA;UAAAuB,QAAA,gBACEzB,OAAA;YAAK0B,SAAS,EAAC,0BAA0B;YAAAD,QAAA,gBACvCzB,OAAA;cAAK0B,SAAS,EAAC,gBAAgB;cAAAD,QAAA,eAC7BzB,OAAA;gBAAAyB,QAAA,EAAI;cAAI;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC,eAENtC,OAAA;cAAK0B,SAAS,EAAC,kBAAkB;cAAAD,QAAA,gBAC/BzB,OAAA;gBAAK0B,SAAS,EAAC,eAAe;gBAAAD,QAAA,EAAEuC,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEf;cAAI;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAC5DtC,OAAA;gBAAK0B,SAAS,EAAC,eAAe;gBAAAD,QAAA,gBAC5BzB,OAAA;kBAAM0B,SAAS,EAAC,SAAS;kBAAAD,QAAA,EAAEF,aAAa,CAACyC,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEpB,OAAO;gBAAC;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC1EtC,OAAA;kBAAM0B,SAAS,EAAC,MAAM;kBAAAD,QAAA,EAAEH,UAAU,CAAC0C,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEnB,aAAa;gBAAC;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvE,CAAC,eACNtC,OAAA;gBAAK0B,SAAS,EAAC,mBAAmB;gBAAAD,QAAA,eAChCzB,OAAA;kBAAM0B,SAAS,EAAE+H,mBAAmB,CAACzF,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEf,IAAI,CAAE;kBAAAxB,QAAA,EAAEgI,mBAAmB,CAACzF,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEf,IAAI;gBAAC;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC7G,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAENtC,OAAA;YAAK0B,SAAS,EAAC,sBAAsB;YAAAD,QAAA,gBACnCzB,OAAA;cAAK0B,SAAS,EAAC,gBAAgB;cAAAD,QAAA,gBAC7BzB,OAAA;gBAAAyB,QAAA,EAAI;cAAI;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACbtC,OAAA;gBACE2C,OAAO,EAAE0F,kBAAmB;gBAC5B3G,SAAS,EAAC,aAAa;gBACvBQ,QAAQ,EAAEkC,kBAAmB;gBAAA3C,QAAA,EAC9B;cAED;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,EAEL8B,kBAAkB,gBACjBpE,OAAA;cAAK0B,SAAS,EAAC,SAAS;cAAAD,QAAA,EAAC;YAAU;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,gBAEzCtC,OAAA;cAAI0B,SAAS,EAAC,cAAc;cAAAD,QAAA,EACzByC,WAAW,CAAC1B,GAAG,CAAC,CAACkE,MAAM,EAAEhE,KAAK,kBAC7B1C,OAAA;gBAEE2C,OAAO,EAAEA,CAAA,KAAM8D,kBAAkB,CAACC,MAAM,CAAE;gBAC1ChF,SAAS,EAAE8C,cAAc,KAAKkC,MAAM,GAAG,sBAAsB,GAAG,aAAc;gBAAAjF,QAAA,gBAE9EzB,OAAA;kBAAK0B,SAAS,EAAC,aAAa;kBAAAD,QAAA,EAAEiF,MAAM,CAACzD;gBAAI;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAChDtC,OAAA;kBAAK0B,SAAS,EAAC,aAAa;kBAAAD,QAAA,gBAC1BzB,OAAA;oBAAM0B,SAAS,EAAC,SAAS;oBAAAD,QAAA,EAAEF,aAAa,CAACmF,MAAM,CAAC9D,OAAO;kBAAC;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAChEtC,OAAA;oBAAM0B,SAAS,EAAC,MAAM;oBAAAD,QAAA,EAAEH,UAAU,CAACoF,MAAM,CAAC7D,aAAa;kBAAC;oBAAAV,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAChEtC,OAAA;oBAAM0B,SAAS,EAAE,iBAAiB+H,mBAAmB,CAAC/C,MAAM,CAACzD,IAAI,CAAC,EAAG;oBAAAxB,QAAA,EAAEgI,mBAAmB,CAAC/C,MAAM,CAACzD,IAAI;kBAAC;oBAAAd,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5G,CAAC;cAAA,GATDI,KAAK;gBAAAP,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAUR,CACL;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CACL,EAEA4B,WAAW,CAAC3B,MAAM,KAAK,CAAC,IAAI,CAAC6B,kBAAkB,iBAC9CpE,OAAA;cAAK0B,SAAS,EAAC,eAAe;cAAAD,QAAA,gBAC5BzB,OAAA;gBAAAyB,QAAA,EAAG;cAAW;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eAClBtC,OAAA;gBAAQ2C,OAAO,EAAE6G,YAAa;gBAAA/H,QAAA,EAAC;cAAI;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzC,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA,eACN,CACH,eAGDtC,OAAA;UAAK0B,SAAS,EAAC,kBAAkB;UAAAD,QAAA,gBAC/BzB,OAAA;YAAAyB,QAAA,EAAI;UAAI;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EACZwB,OAAO,CAACvB,MAAM,GAAG,CAAC,gBACjBvC,OAAA;YAAI0B,SAAS,EAAC,eAAe;YAAAD,QAAA,EAC1BqC,OAAO,CAACtB,GAAG,CAAC,CAACsE,GAAG,EAAEpE,KAAK,kBACtB1C,OAAA;cAAgB0B,SAAS,EAAC,UAAU;cAAAD,QAAA,gBAClCzB,OAAA;gBAAK0B,SAAS,EAAC,UAAU;gBAAAD,QAAA,EAAEqF,GAAG,CAAC7D;cAAI;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAC1CtC,OAAA;gBAAK0B,SAAS,EAAC,UAAU;gBAAAD,QAAA,gBACvBzB,OAAA;kBAAM0B,SAAS,EAAC,SAAS;kBAAAD,QAAA,EAAEF,aAAa,CAACuF,GAAG,CAAClE,OAAO;gBAAC;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC7DtC,OAAA;kBAAM0B,SAAS,EAAC,MAAM;kBAAAD,QAAA,EAAEH,UAAU,CAACwF,GAAG,CAACjE,aAAa;gBAAC;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,EAC5DwE,GAAG,CAACd,OAAO,iBACVhG,OAAA;kBAAM0B,SAAS,EAAC,WAAW;kBAAAD,QAAA,eACzBzB,OAAA;oBAAG0B,SAAS,EAAC,YAAY;oBAAAD,QAAA,EAAC;kBAAE;oBAAAU,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5B,CACP;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC;YAAA,GAVCI,KAAK;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAWV,CACL;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC,gBAELtC,OAAA;YAAK0B,SAAS,EAAC,WAAW;YAAAD,QAAA,EAAC;UAAM;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CACvC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNtC,OAAA;QAAK0B,SAAS,EAAC,oBAAoB;QAAAD,QAAA,GAChCqD,aAAa,iBACZ9E,OAAA;UAAK0B,SAAS,EAAC,iBAAiB;UAAAD,QAAA,gBAC9BzB,OAAA;YAAK0B,SAAS,EAAC,mBAAmB;YAAAD,QAAA,gBAChCzB,OAAA;cAAK0B,SAAS,EAAC,eAAe;cAAAD,QAAA,EAAE+C,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEvB;YAAI;cAAAd,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC3DtC,OAAA;cAAK0B,SAAS,EAAC,eAAe;cAAAD,QAAA,gBAC5BzB,OAAA;gBAAM0B,SAAS,EAAC,SAAS;gBAAAD,QAAA,EAAEF,aAAa,CAACiD,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE5B,OAAO;cAAC;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACzEtC,OAAA;gBAAM0B,SAAS,EAAC,MAAM;gBAAAD,QAAA,EAAEH,UAAU,CAACkD,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE3B,aAAa;cAAC;gBAAAV,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAENtC,OAAA;YAAK0B,SAAS,EAAC,eAAe;YAAAD,QAAA,EAC3BP,cAAc,gBACblB,OAAA;cAAK0B,SAAS,EAAC,eAAe;cAAAD,QAAA,EAAC;YAAc;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,GACjDtB,QAAQ,gBACVhB,OAAA;cACEkD,QAAQ;cACRC,QAAQ;cACRzB,SAAS,EAAC,eAAe;cACzB0B,GAAG,EAAEpC;YAAS;cAAAmB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf,CAAC,gBAEFtC,OAAA;cAAK0B,SAAS,EAAC,mBAAmB;cAAAD,QAAA,EAAC;YAAW;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK;UACpD;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eAENtC,OAAA;YAAK0B,SAAS,EAAC,iBAAiB;YAAAD,QAAA,gBAC9BzB,OAAA;cACE0B,SAAS,EAAC,aAAa;cACvBiB,OAAO,EAAEa,WAAW,GAAGmD,mBAAmB,GAAGP,oBAAqB;cAClElE,QAAQ,EAAEhB,cAAc,IAAI,CAACF,QAAS;cAAAS,QAAA,EACvC;YAED;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTtC,OAAA;cACE0B,SAAS,EAAC,YAAY;cACtBiB,OAAO,EAAE6D,eAAgB;cAAA/E,QAAA,EAC1B;YAED;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,EACA,CAACwC,aAAa,iBACb9E,OAAA;UAAK0B,SAAS,EAAC,eAAe;UAAAD,QAAA,gBAC5BzB,OAAA;YAAAyB,QAAA,EAAI;UAAI;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EACZpB,cAAc,gBACblB,OAAA;YAAK0B,SAAS,EAAC,eAAe;YAAAD,QAAA,EAAC;UAAc;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,GACjDtB,QAAQ,gBACVhB,OAAA;YACEkD,QAAQ;YACRC,QAAQ;YACRzB,SAAS,EAAC,eAAe;YACzB0B,GAAG,EAAEpC;UAAS;YAAAmB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACf,CAAC,gBAEFtC,OAAA;YAAK0B,SAAS,EAAC,yBAAyB;YAAAD,QAAA,eACtCzB,OAAA;cAAK0B,SAAS,EAAC,kBAAkB;cAAAD,QAAA,gBAC/BzB,OAAA;gBAAAyB,QAAA,EAAG;cAAU;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eACjBtC,OAAA;gBAAAyB,QAAA,EAAG;cAAW;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;;AAED;AAAAsH,GAAA,CAngBMD,aAAa;AAAAU,GAAA,GAAbV,aAAa;AAogBnB,MAAMF,mBAAmB,GAAIxG,IAAI,IAAK;EACpC,IAAI,CAACA,IAAI,EAAE,OAAO,KAAK;;EAEvB;EACA,IAAIA,IAAI,CAACqH,QAAQ,CAAC,GAAG,CAAC,IAAIrH,IAAI,CAACqH,QAAQ,CAAC,GAAG,CAAC,IAAIrH,IAAI,CAACqH,QAAQ,CAAC,GAAG,CAAC,IAAIrH,IAAI,CAACqH,QAAQ,CAAC,GAAG,CAAC,EAAE;IACxF,OAAO,KAAK;EACd;;EAEA;EACA,MAAMC,YAAY,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAC;EAC3D,IAAIA,YAAY,CAACC,IAAI,CAACC,IAAI,IAAIxH,IAAI,CAACqH,QAAQ,CAACG,IAAI,CAAC,CAAC,EAAE;IAClD,OAAO,KAAK;EACd;;EAEA;EACA,MAAMC,aAAa,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC;EAClE,MAAMC,aAAa,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,IAAI,CAAC;EAEjE,IAAID,aAAa,CAACF,IAAI,CAACC,IAAI,IAAIxH,IAAI,CAACqH,QAAQ,CAACG,IAAI,CAAC,CAAC,EAAE;IACnD,OAAO,KAAK;EACd;EAEA,IAAIE,aAAa,CAACH,IAAI,CAACC,IAAI,IAAIxH,IAAI,CAACqH,QAAQ,CAACG,IAAI,CAAC,CAAC,EAAE;IACnD,OAAO,KAAK;EACd;EAEA,OAAO,KAAK;AACd,CAAC;;AAED;AACA,MAAMG,gBAAgB,GAAGA,CAAC;EACxBxK,YAAY;EACZO,SAAS;EACTW,UAAU;EACVC;AACF,CAAC,KAAK;EAAAsJ,GAAA;EACJ,MAAM,CAACrH,WAAW,EAAEC,cAAc,CAAC,GAAG7D,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAAC8D,cAAc,EAAEC,iBAAiB,CAAC,GAAG/D,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACgE,cAAc,EAAEC,iBAAiB,CAAC,GAAGjE,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAACkE,OAAO,EAAEC,UAAU,CAAC,GAAGnE,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACoE,eAAe,EAAEC,kBAAkB,CAAC,GAAGrE,QAAQ,CAAC,IAAI,CAAC;EAC5D,MAAM,CAACsE,WAAW,EAAEC,cAAc,CAAC,GAAGvE,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACwE,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGzE,QAAQ,CAAC,KAAK,CAAC;EACnE,MAAM,CAAC0E,SAAS,EAAEC,YAAY,CAAC,GAAG3E,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACoB,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACsB,cAAc,EAAEC,iBAAiB,CAAC,GAAGvB,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAM,CAAC4E,cAAc,EAAEC,iBAAiB,CAAC,GAAG7E,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAAC8E,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG/E,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAACgF,QAAQ,EAAEC,WAAW,CAAC,GAAGjF,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACkF,aAAa,EAAEC,gBAAgB,CAAC,GAAGnF,QAAQ,CAAC,KAAK,CAAC;;EAEzD;EACA,MAAMoF,kBAAkB,GAAG,MAAAA,CAAA,KAAY;IACrCnB,iBAAiB,CAAC,IAAI,CAAC;IACvBU,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF,MAAMU,QAAQ,GAAG,MAAMnF,KAAK,CAACoF,GAAG,CAAC,GAAG9E,YAAY,uBAAuB,EAAE;QACvE+E,MAAM,EAAE;UAAEC,KAAK,EAAE;QAAE;MACrB,CAAC,CAAC;MAEF,IAAIH,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACC,SAAS,EAAE;QAC5C3B,iBAAiB,CAACsB,QAAQ,CAACI,IAAI,CAACC,SAAS,CAAC;MAC5C,CAAC,MAAM;QACLf,YAAY,CAAC,UAAU,CAAC;MAC1B;IACF,CAAC,CAAC,OAAO3D,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACjC2D,YAAY,CAAC,uBAAuB,CAAC;IACvC,CAAC,SAAS;MACRV,iBAAiB,CAAC,KAAK,CAAC;IAC1B;EACF,CAAC;;EAED;EACA,MAAM2B,oBAAoB,GAAGA,CAAA,KAAM;IACjC,IAAI7E,SAAS,KAAK,WAAW,IAAI,CAACiD,cAAc,EAAE;MAChDoB,kBAAkB,CAAC,CAAC;IACtB;EACF,CAAC;;EAED;EACA,MAAMS,iBAAiB,GAAG,MAAOC,QAAQ,IAAK;IAC5CvE,iBAAiB,CAAC,IAAI,CAAC;IACvBF,WAAW,CAAC,EAAE,CAAC;IACfsD,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF,MAAMU,QAAQ,GAAG,MAAMnF,KAAK,CAAC6F,IAAI,CAAC,GAAGvF,YAAY,oBAAoB,EAAE;QACrEwC,OAAO,EAAE8C,QAAQ,CAAC9C,OAAO;QACzBgD,UAAU,EAAEF,QAAQ,CAAC7C,aAAa;QAClCgD,QAAQ,EAAEH,QAAQ,CAAC5C,WAAW;QAC9BgD,eAAe,EAAE;MACnB,CAAC,CAAC;MAEF,IAAIb,QAAQ,CAACI,IAAI,CAACU,OAAO,EAAE;QACzB,MAAMC,OAAO,GAAG,GAAG5F,YAAY,GAAG6E,QAAQ,CAACI,IAAI,CAACY,SAAS,EAAE;QAC3DhF,WAAW,CAAC+E,OAAO,CAAC;QACpB,OAAOA,OAAO;MAChB,CAAC,MAAM;QACLzB,YAAY,CAAC,UAAU,CAAC;QACxB,OAAO,IAAI;MACb;IACF,CAAC,CAAC,OAAO3D,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACjC2D,YAAY,CAAC,wBAAwB,CAAC;MACtC,OAAO,IAAI;IACb,CAAC,SAAS;MACRpD,iBAAiB,CAAC,KAAK,CAAC;IAC1B;EACF,CAAC;;EAED;EACA,MAAM+E,mBAAmB,GAAIC,MAAM,IAAK;IACtC1B,iBAAiB,CAAC0B,MAAM,CAAC;IACzBpB,gBAAgB,CAAC,IAAI,CAAC;IACtBU,iBAAiB,CAACU,MAAM,CAAC;EAC3B,CAAC;;EAED;EACA,MAAMC,oBAAoB,GAAGA,CAAA,KAAM;IACjC,MAAMC,QAAQ,GAAG7B,cAAc;IAC/B,IAAI,CAAC6B,QAAQ,EAAE;IAEfpC,kBAAkB,CAACoC,QAAQ,CAAC;IAC5BtC,UAAU,CAAC,CAAC;MAAC,GAAGsC,QAAQ;MAAEC,IAAI,EAAE,CAAC;MAAEN,OAAO,EAAEhF;IAAQ,CAAC,CAAC,CAAC;IACvD6D,WAAW,CAAC,CAAC,GAAGD,QAAQ,EAAE5D,QAAQ,CAAC,CAAC;IACpCyC,cAAc,CAAC,IAAI,CAAC;IACpBqH,sBAAsB,CAACzE,QAAQ,CAAC;IAChCtB,gBAAgB,CAAC,KAAK,CAAC;IACvBN,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC;;EAED;EACA,MAAM+B,eAAe,GAAGA,CAAA,KAAM;IAC5BzB,gBAAgB,CAAC,KAAK,CAAC;IACvBN,iBAAiB,CAAC,IAAI,CAAC;IACvBxD,WAAW,CAAC,EAAE,CAAC;EACjB,CAAC;;EAED;EACA,MAAMwF,kBAAkB,GAAIC,MAAM,IAAK;IACrCjC,iBAAiB,CAACiC,MAAM,CAAC;IACzB3B,gBAAgB,CAAC,IAAI,CAAC;IACtBU,iBAAiB,CAACiB,MAAM,CAAC;EAC3B,CAAC;;EAED;EACA,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;IAChC,MAAMN,QAAQ,GAAG7B,cAAc;IAC/B,IAAI,CAAC6B,QAAQ,EAAE;IAEfpC,kBAAkB,CAACoC,QAAQ,CAAC;IAC5BtC,UAAU,CAAC,CAAC,GAAGD,OAAO,EAAE;MAAC,GAAGuC,QAAQ;MAAEC,IAAI,EAAExC,OAAO,CAACvB,MAAM,GAAG,CAAC;MAAEyD,OAAO,EAAEhF;IAAQ,CAAC,CAAC,CAAC;IACpF6D,WAAW,CAAC,CAAC,GAAGD,QAAQ,EAAE5D,QAAQ,CAAC,CAAC;IACpC8J,sBAAsB,CAACzE,QAAQ,CAAC;IAChCtB,gBAAgB,CAAC,KAAK,CAAC;IACvBN,iBAAiB,CAAC,IAAI,CAAC;EACzB,CAAC;;EAED;EACA,MAAMqG,sBAAsB,GAAG,MAAOzE,QAAQ,IAAK;IACjD,IAAI,CAACA,QAAQ,EAAE;IAEfhC,qBAAqB,CAAC,IAAI,CAAC;IAC3BE,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACFgB,OAAO,CAACuB,GAAG,CAAC,SAAST,QAAQ,CAACpD,IAAI,WAAW,CAAC;;MAE9C;MACA,MAAMgC,QAAQ,GAAG,MAAMnF,KAAK,CAAC6F,IAAI,CAAC,GAAGvF,YAAY,yBAAyB,EAAE;QAC1E2K,WAAW,EAAE1E,QAAQ,CAAC2E,EAAE;QACxBC,aAAa,EAAE5E,QAAQ,CAACpD,IAAI;QAC5BL,OAAO,EAAEyD,QAAQ,CAACzD;MACpB,CAAC,CAAC;MAEF,IAAIqC,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACgC,OAAO,EAAE;QAC1C9B,OAAO,CAACuB,GAAG,CAAC,UAAU7B,QAAQ,CAACI,IAAI,CAACgC,OAAO,CAAC9E,MAAM,QAAQ,CAAC;QAC3D4B,cAAc,CAACc,QAAQ,CAACI,IAAI,CAACgC,OAAO,CAAC;MACvC,CAAC,MAAM;QACL9C,YAAY,CAAC,gBAAgB,CAAC;QAC9BJ,cAAc,CAAC,EAAE,CAAC;MACpB;IACF,CAAC,CAAC,OAAOvD,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACjC2D,YAAY,CAAC,aAAa3D,KAAK,CAACwH,OAAO,EAAE,CAAC;MAC1CjE,cAAc,CAAC,EAAE,CAAC;IACpB,CAAC,SAAS;MACRE,qBAAqB,CAAC,KAAK,CAAC;IAC9B;EACF,CAAC;;EAED;EACA,MAAMgE,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,IAAIrE,eAAe,IAAI,CAACI,kBAAkB,EAAE;MAC1C0G,sBAAsB,CAAC9G,eAAe,CAAC;IACzC;EACF,CAAC;;EAED;EACA,MAAMsE,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAIxE,OAAO,CAACvB,MAAM,IAAI,CAAC,EAAE;MACvB;MACAkB,cAAc,CAAC,KAAK,CAAC;MACrBM,UAAU,CAAC,EAAE,CAAC;MACdE,kBAAkB,CAAC,IAAI,CAAC;MACxBE,cAAc,CAAC,EAAE,CAAC;MAClBU,WAAW,CAAC,EAAE,CAAC;MACf5D,WAAW,CAAC,EAAE,CAAC;MACf+D,kBAAkB,CAAC,CAAC;IACtB,CAAC,MAAM;MACL;MACA,MAAMuD,MAAM,GAAG,CAAC,GAAGzE,OAAO,CAAC;MAC3ByE,MAAM,CAAC0B,GAAG,CAAC,CAAC;MACZlG,UAAU,CAACwE,MAAM,CAAC;;MAElB;MACA,MAAM2B,YAAY,GAAG3B,MAAM,CAACA,MAAM,CAAChG,MAAM,GAAG,CAAC,CAAC;MAC9C0B,kBAAkB,CAACiG,YAAY,CAAC;;MAEhC;MACA,MAAM1B,WAAW,GAAG,CAAC,GAAG5D,QAAQ,CAAC;MACjC4D,WAAW,CAACyB,GAAG,CAAC,CAAC;MACjBpF,WAAW,CAAC2D,WAAW,CAAC;;MAExB;MACAsC,sBAAsB,CAACZ,YAAY,CAAC;IACtC;EACF,CAAC;;EAED;EACA,MAAMzB,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI7D,QAAQ,CAACrC,MAAM,KAAK,CAAC,EAAE;IAE3BoC,mBAAmB,CAAC,IAAI,CAAC;IACzBJ,YAAY,CAAC,IAAI,CAAC;IAElB,IAAI;MACF,MAAMU,QAAQ,GAAG,MAAMnF,KAAK,CAAC6F,IAAI,CAAC,GAAGvF,YAAY,kBAAkB,EAAE;QACnEyI,SAAS,EAAEjE;MACb,CAAC,CAAC;MAEF,IAAIK,QAAQ,CAACI,IAAI,CAACU,OAAO,EAAE;QACzB,MAAMoE,cAAc,GAAG,GAAG/J,YAAY,GAAG6E,QAAQ,CAACI,IAAI,CAACY,SAAS,EAAE;;QAElE;QACA,MAAMmE,IAAI,GAAGrB,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;QACxCoB,IAAI,CAACnB,IAAI,GAAGkB,cAAc;QAC1BC,IAAI,CAACjB,QAAQ,GAAG,YAAY;QAC5BiB,IAAI,CAACd,KAAK,CAAC,CAAC;QAEZ/D,OAAO,CAACuB,GAAG,CAAC,cAAc,CAAC;MAC7B,CAAC,MAAM;QACLvC,YAAY,CAAC,UAAU,IAAIU,QAAQ,CAACI,IAAI,CAACzE,KAAK,IAAI,MAAM,CAAC,CAAC;MAC5D;IACF,CAAC,CAAC,OAAOA,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;MAC/B2D,YAAY,CAAC,YAAY,GAAG3D,KAAK,CAACwH,OAAO,CAAC;IAC5C,CAAC,SAAS;MACRzD,mBAAmB,CAAC,KAAK,CAAC;IAC5B;EACF,CAAC;;EAED;EACA,MAAM6E,YAAY,GAAGA,CAAA,KAAM;IACzBzF,UAAU,CAAC,EAAE,CAAC;IACdiB,kBAAkB,CAAC,CAAC;IACpBvB,cAAc,CAAC,KAAK,CAAC;IACrBQ,kBAAkB,CAAC,IAAI,CAAC;IACxBE,cAAc,CAAC,EAAE,CAAC;IAClBU,WAAW,CAAC,EAAE,CAAC;IACf5D,WAAW,CAAC,EAAE,CAAC;IACfwD,iBAAiB,CAAC,IAAI,CAAC;IACvBM,gBAAgB,CAAC,KAAK,CAAC;EACzB,CAAC;;EAED;EACAlF,SAAS,CAAC,MAAM;IACd,IAAIc,SAAS,KAAK,WAAW,EAAE;MAC7BqE,kBAAkB,CAAC,CAAC;IACtB;EACF,CAAC,EAAE,CAACrE,SAAS,CAAC,CAAC;EAEf,oBACEX,OAAA;IAAK0B,SAAS,EAAC,sBAAsB;IAAAD,QAAA,gBACnCzB,OAAA;MAAK0B,SAAS,EAAC,eAAe;MAAAD,QAAA,gBAC5BzB,OAAA;QACE2C,OAAO,EAAE6G,YAAa;QACtB9H,SAAS,EAAC,cAAc;QACxBQ,QAAQ,EAAEvB,SAAS,KAAK,WAAY;QAAAc,QAAA,EACrC;MAED;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,EAERwB,OAAO,CAACvB,MAAM,GAAG,CAAC,iBACjBvC,OAAA,CAAAE,SAAA;QAAAuB,QAAA,gBACEzB,OAAA;UACE2C,OAAO,EAAE2F,aAAc;UACvB5G,SAAS,EAAC,UAAU;UACpBQ,QAAQ,EAAE4C,aAAc;UAAArD,QAAA,EACzB;QAED;UAAAU,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAETtC,OAAA;UACE2C,OAAO,EAAE8F,iBAAkB;UAC3B/G,SAAS,EAAC,YAAY;UACtBQ,QAAQ,EAAE4B,OAAO,CAACvB,MAAM,GAAG,CAAC,IAAImC,gBAAiB;UAAAjD,QAAA,EAEhDiD,gBAAgB,GAAG,QAAQ,GAAG;QAAQ;UAAAvC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjC,CAAC;MAAA,eACT,CACH;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAELgC,SAAS,iBACRtE,OAAA;MAAK0B,SAAS,EAAC,YAAY;MAAAD,QAAA,EAAE6C;IAAS;MAAAnC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAC7C,eAEDtC,OAAA;MAAK0B,SAAS,EAAC,cAAc;MAAAD,QAAA,gBAE3BzB,OAAA;QAAK0B,SAAS,EAAC,iBAAiB;QAAAD,QAAA,GAC7B,CAAC+B,WAAW,gBACXxD,OAAA;UAAK0B,SAAS,EAAC,oBAAoB;UAAAD,QAAA,gBACjCzB,OAAA;YAAK0B,SAAS,EAAC,gBAAgB;YAAAD,QAAA,gBAC7BzB,OAAA;cAAAyB,QAAA,EAAI;YAAM;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACftC,OAAA;cACE2C,OAAO,EAAE6C,oBAAqB;cAC9B9D,SAAS,EAAC,aAAa;cACvBQ,QAAQ,EAAE0B,cAAc,IAAIjD,SAAS,KAAK,WAAY;cAAAc,QAAA,EACvD;YAED;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,EAELsB,cAAc,gBACb5D,OAAA;YAAK0B,SAAS,EAAC,SAAS;YAAAD,QAAA,EAAC;UAAU;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,gBAEzCtC,OAAA;YAAI0B,SAAS,EAAC,cAAc;YAAAD,QAAA,EACzBiC,cAAc,CAAClB,GAAG,CAAC,CAAC2D,MAAM,EAAEzD,KAAK,kBAChC1C,OAAA;cAEE2C,OAAO,EAAEA,CAAA,KAAMuD,mBAAmB,CAACC,MAAM,CAAE;cAC3CzE,SAAS,EAAE8C,cAAc,KAAK2B,MAAM,GAAG,sBAAsB,GAAG,aAAc;cAAA1E,QAAA,gBAE9EzB,OAAA;gBAAK0B,SAAS,EAAC,aAAa;gBAAAD,QAAA,EAAE0E,MAAM,CAAClD;cAAI;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAChDtC,OAAA;gBAAK0B,SAAS,EAAC,aAAa;gBAAAD,QAAA,gBAC1BzB,OAAA;kBAAM0B,SAAS,EAAC,SAAS;kBAAAD,QAAA,EAAEF,aAAa,CAAC4E,MAAM,CAACvD,OAAO;gBAAC;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAChEtC,OAAA;kBAAM0B,SAAS,EAAC,MAAM;kBAAAD,QAAA,EAAEH,UAAU,CAAC6E,MAAM,CAACtD,aAAa;gBAAC;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAChEtC,OAAA;kBAAM0B,SAAS,EAAE,iBAAiB+H,mBAAmB,CAACtD,MAAM,CAAClD,IAAI,CAAC,EAAG;kBAAAxB,QAAA,EAAEgI,mBAAmB,CAACtD,MAAM,CAAClD,IAAI;gBAAC;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC5G,CAAC;YAAA,GATDI,KAAK;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAUR,CACL;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CACL,EAEAoB,cAAc,CAACnB,MAAM,KAAK,CAAC,IAAI,CAACqB,cAAc,iBAC7C5D,OAAA;YAAK0B,SAAS,EAAC,eAAe;YAAAD,QAAA,gBAC5BzB,OAAA;cAAAyB,QAAA,EAAG;YAAS;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC,eAChBtC,OAAA;cAAQ2C,OAAO,EAAE6C,oBAAqB;cAAA/D,QAAA,EAAC;YAAI;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjD,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,gBAENtC,OAAA,CAAAE,SAAA;UAAAuB,QAAA,gBACEzB,OAAA;YAAK0B,SAAS,EAAC,0BAA0B;YAAAD,QAAA,gBACvCzB,OAAA;cAAK0B,SAAS,EAAC,gBAAgB;cAAAD,QAAA,eAC7BzB,OAAA;gBAAAyB,QAAA,EAAI;cAAI;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC,eAENtC,OAAA;cAAK0B,SAAS,EAAC,kBAAkB;cAAAD,QAAA,gBAC/BzB,OAAA;gBAAK0B,SAAS,EAAC,eAAe;gBAAAD,QAAA,EAAEuC,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEf;cAAI;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAC5DtC,OAAA;gBAAK0B,SAAS,EAAC,eAAe;gBAAAD,QAAA,gBAC5BzB,OAAA;kBAAM0B,SAAS,EAAC,SAAS;kBAAAD,QAAA,EAAEF,aAAa,CAACyC,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEpB,OAAO;gBAAC;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC1EtC,OAAA;kBAAM0B,SAAS,EAAC,MAAM;kBAAAD,QAAA,EAAEH,UAAU,CAAC0C,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEnB,aAAa;gBAAC;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvE,CAAC,eACNtC,OAAA;gBAAK0B,SAAS,EAAC,mBAAmB;gBAAAD,QAAA,eAChCzB,OAAA;kBAAM0B,SAAS,EAAE+H,mBAAmB,CAACzF,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEf,IAAI,CAAE;kBAAAxB,QAAA,EAAEgI,mBAAmB,CAACzF,eAAe,aAAfA,eAAe,uBAAfA,eAAe,CAAEf,IAAI;gBAAC;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC7G,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAENtC,OAAA;YAAK0B,SAAS,EAAC,sBAAsB;YAAAD,QAAA,gBACnCzB,OAAA;cAAK0B,SAAS,EAAC,gBAAgB;cAAAD,QAAA,gBAC7BzB,OAAA;gBAAAyB,QAAA,EAAI;cAAI;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACbtC,OAAA;gBACE2C,OAAO,EAAE0F,kBAAmB;gBAC5B3G,SAAS,EAAC,aAAa;gBACvBQ,QAAQ,EAAEkC,kBAAmB;gBAAA3C,QAAA,EAC9B;cAED;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,EAEL8B,kBAAkB,gBACjBpE,OAAA;cAAK0B,SAAS,EAAC,SAAS;cAAAD,QAAA,EAAC;YAAU;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,gBAEzCtC,OAAA;cAAI0B,SAAS,EAAC,cAAc;cAAAD,QAAA,EACzByC,WAAW,CAAC1B,GAAG,CAAC,CAACkE,MAAM,EAAEhE,KAAK,kBAC7B1C,OAAA;gBAEE2C,OAAO,EAAEA,CAAA,KAAM8D,kBAAkB,CAACC,MAAM,CAAE;gBAC1ChF,SAAS,EAAE8C,cAAc,KAAKkC,MAAM,GAAG,sBAAsB,GAAG,aAAc;gBAAAjF,QAAA,gBAE9EzB,OAAA;kBAAK0B,SAAS,EAAC,aAAa;kBAAAD,QAAA,EAAEiF,MAAM,CAACzD;gBAAI;kBAAAd,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAChDtC,OAAA;kBAAK0B,SAAS,EAAC,aAAa;kBAAAD,QAAA,gBAC1BzB,OAAA;oBAAM0B,SAAS,EAAC,SAAS;oBAAAD,QAAA,EAAEF,aAAa,CAACmF,MAAM,CAAC9D,OAAO;kBAAC;oBAAAT,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAChEtC,OAAA;oBAAM0B,SAAS,EAAC,MAAM;oBAAAD,QAAA,EAAEH,UAAU,CAACoF,MAAM,CAAC7D,aAAa;kBAAC;oBAAAV,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,eAChEtC,OAAA;oBAAM0B,SAAS,EAAE,iBAAiB+H,mBAAmB,CAAC/C,MAAM,CAACzD,IAAI,CAAC,EAAG;oBAAAxB,QAAA,EAAEgI,mBAAmB,CAAC/C,MAAM,CAACzD,IAAI;kBAAC;oBAAAd,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5G,CAAC;cAAA,GATDI,KAAK;gBAAAP,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAUR,CACL;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACA,CACL,EAEA4B,WAAW,CAAC3B,MAAM,KAAK,CAAC,IAAI,CAAC6B,kBAAkB,iBAC9CpE,OAAA;cAAK0B,SAAS,EAAC,eAAe;cAAAD,QAAA,gBAC5BzB,OAAA;gBAAAyB,QAAA,EAAG;cAAW;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eAClBtC,OAAA;gBAAQ2C,OAAO,EAAE6G,YAAa;gBAAA/H,QAAA,EAAC;cAAI;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzC,CACN;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC;QAAA,eACN,CACH,eAGDtC,OAAA;UAAK0B,SAAS,EAAC,kBAAkB;UAAAD,QAAA,gBAC/BzB,OAAA;YAAAyB,QAAA,EAAI;UAAI;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EACZwB,OAAO,CAACvB,MAAM,GAAG,CAAC,gBACjBvC,OAAA;YAAI0B,SAAS,EAAC,eAAe;YAAAD,QAAA,EAC1BqC,OAAO,CAACtB,GAAG,CAAC,CAACsE,GAAG,EAAEpE,KAAK,kBACtB1C,OAAA;cAAgB0B,SAAS,EAAC,UAAU;cAAAD,QAAA,gBAClCzB,OAAA;gBAAK0B,SAAS,EAAC,UAAU;gBAAAD,QAAA,EAAEqF,GAAG,CAAC7D;cAAI;gBAAAd,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,eAC1CtC,OAAA;gBAAK0B,SAAS,EAAC,UAAU;gBAAAD,QAAA,gBACvBzB,OAAA;kBAAM0B,SAAS,EAAC,SAAS;kBAAAD,QAAA,EAAEF,aAAa,CAACuF,GAAG,CAAClE,OAAO;gBAAC;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC7DtC,OAAA;kBAAM0B,SAAS,EAAC,MAAM;kBAAAD,QAAA,EAAEH,UAAU,CAACwF,GAAG,CAACjE,aAAa;gBAAC;kBAAAV,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,EAC5DwE,GAAG,CAACd,OAAO,iBACVhG,OAAA;kBAAM0B,SAAS,EAAC,WAAW;kBAAAD,QAAA,eACzBzB,OAAA;oBAAG0B,SAAS,EAAC,YAAY;oBAAAD,QAAA,EAAC;kBAAE;oBAAAU,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAG;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5B,CACP;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC;YAAA,GAVCI,KAAK;cAAAP,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAWV,CACL;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC,gBAELtC,OAAA;YAAK0B,SAAS,EAAC,WAAW;YAAAD,QAAA,EAAC;UAAM;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CACvC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNtC,OAAA;QAAK0B,SAAS,EAAC,oBAAoB;QAAAD,QAAA,GAChCqD,aAAa,iBACZ9E,OAAA;UAAK0B,SAAS,EAAC,iBAAiB;UAAAD,QAAA,gBAC9BzB,OAAA;YAAK0B,SAAS,EAAC,mBAAmB;YAAAD,QAAA,gBAChCzB,OAAA;cAAK0B,SAAS,EAAC,eAAe;cAAAD,QAAA,EAAE+C,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAEvB;YAAI;cAAAd,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC3DtC,OAAA;cAAK0B,SAAS,EAAC,eAAe;cAAAD,QAAA,gBAC5BzB,OAAA;gBAAM0B,SAAS,EAAC,SAAS;gBAAAD,QAAA,EAAEF,aAAa,CAACiD,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE5B,OAAO;cAAC;gBAAAT,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACzEtC,OAAA;gBAAM0B,SAAS,EAAC,MAAM;gBAAAD,QAAA,EAAEH,UAAU,CAACkD,cAAc,aAAdA,cAAc,uBAAdA,cAAc,CAAE3B,aAAa;cAAC;gBAAAV,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACtE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAENtC,OAAA;YAAK0B,SAAS,EAAC,eAAe;YAAAD,QAAA,EAC3BP,cAAc,gBACblB,OAAA;cAAK0B,SAAS,EAAC,eAAe;cAAAD,QAAA,EAAC;YAAc;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,GACjDtB,QAAQ,gBACVhB,OAAA;cACEkD,QAAQ;cACRC,QAAQ;cACRzB,SAAS,EAAC,eAAe;cACzB0B,GAAG,EAAEpC;YAAS;cAAAmB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf,CAAC,gBAEFtC,OAAA;cAAK0B,SAAS,EAAC,mBAAmB;cAAAD,QAAA,EAAC;YAAW;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK;UACpD;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACE,CAAC,eAENtC,OAAA;YAAK0B,SAAS,EAAC,iBAAiB;YAAAD,QAAA,gBAC9BzB,OAAA;cACE0B,SAAS,EAAC,aAAa;cACvBiB,OAAO,EAAEa,WAAW,GAAGmD,mBAAmB,GAAGP,oBAAqB;cAClElE,QAAQ,EAAEhB,cAAc,IAAI,CAACF,QAAS;cAAAS,QAAA,EACvC;YAED;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTtC,OAAA;cACE0B,SAAS,EAAC,YAAY;cACtBiB,OAAO,EAAE6D,eAAgB;cAAA/E,QAAA,EAC1B;YAED;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CACN,EACA,CAACwC,aAAa,iBACb9E,OAAA;UAAK0B,SAAS,EAAC,eAAe;UAAAD,QAAA,gBAC5BzB,OAAA;YAAAyB,QAAA,EAAI;UAAI;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,EACZpB,cAAc,gBACblB,OAAA;YAAK0B,SAAS,EAAC,eAAe;YAAAD,QAAA,EAAC;UAAc;YAAAU,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,GACjDtB,QAAQ,gBACVhB,OAAA;YACEkD,QAAQ;YACRC,QAAQ;YACRzB,SAAS,EAAC,eAAe;YACzB0B,GAAG,EAAEpC;UAAS;YAAAmB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACf,CAAC,gBAEFtC,OAAA;YAAK0B,SAAS,EAAC,yBAAyB;YAAAD,QAAA,eACtCzB,OAAA;cAAK0B,SAAS,EAAC,kBAAkB;cAAAD,QAAA,gBAC/BzB,OAAA;gBAAAyB,QAAA,EAAG;cAAU;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC,eACjBtC,OAAA;gBAAAyB,QAAA,EAAG;cAAW;gBAAAU,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAG,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACuI,GAAA,CA5eID,gBAAgB;AAAAM,GAAA,GAAhBN,gBAAgB;AA8etB,SAASO,GAAGA,CAAA,EAAG;EAAAC,GAAA;EACb,MAAM,CAAC/K,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACyH,OAAO,EAAEgE,UAAU,CAAC,GAAGzL,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACkB,cAAc,EAAEC,iBAAiB,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAACoB,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACe,SAAS,EAAE2K,YAAY,CAAC,GAAG1L,QAAQ,CAAC;IAACa,OAAO,EAAE,IAAI;IAAEG,KAAK,EAAE,IAAI;IAAEyE,IAAI,EAAE;EAAI,CAAC,CAAC;EACpF,MAAM,CAACkG,UAAU,EAAEC,aAAa,CAAC,GAAG5L,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC;;EAExD;EACA,MAAMQ,YAAY,GAAG,uBAAuB;;EAE5C;EACAP,SAAS,CAAC,MAAM;IACd,MAAM4L,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjC,IAAI;QACF,MAAMxG,QAAQ,GAAG,MAAM8B,KAAK,CAAC,GAAG3G,YAAY,aAAa,CAAC;QAE1D,IAAI6E,QAAQ,CAACgC,EAAE,EAAE;UACf,MAAM5B,IAAI,GAAG,MAAMJ,QAAQ,CAACmC,IAAI,CAAC,CAAC;UAClCkE,YAAY,CAAC;YAAC7K,OAAO,EAAE,KAAK;YAAEG,KAAK,EAAE,IAAI;YAAEyE;UAAI,CAAC,CAAC;UACjDE,OAAO,CAACuB,GAAG,CAAC,QAAQ,EAAEzB,IAAI,CAAC;QAC7B,CAAC,MAAM;UACLiG,YAAY,CAAC;YAAC7K,OAAO,EAAE,KAAK;YAAEG,KAAK,EAAE,YAAY;YAAEyE,IAAI,EAAE;UAAI,CAAC,CAAC;QACjE;MACF,CAAC,CAAC,OAAOzE,KAAK,EAAE;QACd2E,OAAO,CAAC3E,KAAK,CAAC,UAAU,EAAEA,KAAK,CAAC;QAChC0K,YAAY,CAAC;UAAC7K,OAAO,EAAE,KAAK;UAAEG,KAAK,EAAE,YAAY;UAAEyE,IAAI,EAAE;QAAI,CAAC,CAAC;MACjE;IACF,CAAC;IAEDoG,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMrK,YAAY,GAAG,MAAOW,CAAC,IAAK;IAChCA,CAAC,CAAC2J,cAAc,CAAC,CAAC;IAClB,IAAI,CAACrL,KAAK,CAACsL,IAAI,CAAC,CAAC,EAAE;MACjB9K,QAAQ,CAAC,SAAS,CAAC;MACnB;IACF;IAEAH,UAAU,CAAC,IAAI,CAAC;IAChBG,QAAQ,CAAC,EAAE,CAAC;IACZwK,UAAU,CAAC,EAAE,CAAC;IACdtK,iBAAiB,CAAC,IAAI,CAAC;IACvBE,WAAW,CAAC,EAAE,CAAC;IAEf,IAAI;MACF;MACA,MAAM2K,WAAW,GAAG,IAAIC,eAAe,CAAC;QACtCxL,KAAK,EAAEA,KAAK,CAACsL,IAAI,CAAC;MACpB,CAAC,CAAC,CAACG,QAAQ,CAAC,CAAC;MAEb,MAAM7G,QAAQ,GAAG,MAAM8B,KAAK,CAAC,GAAG3G,YAAY,eAAewL,WAAW,EAAE,CAAC;MAEzE,IAAI3G,QAAQ,CAACgC,EAAE,EAAE;QACf,MAAM5B,IAAI,GAAG,MAAMJ,QAAQ,CAACmC,IAAI,CAAC,CAAC;QAClCiE,UAAU,CAAChG,IAAI,CAACgC,OAAO,IAAI,EAAE,CAAC;QAC9B,IAAIhC,IAAI,CAACgC,OAAO,IAAIhC,IAAI,CAACgC,OAAO,CAAC9E,MAAM,KAAK,CAAC,EAAE;UAC7C1B,QAAQ,CAAC,WAAW,CAAC;QACvB;MACF,CAAC,MAAM;QACL,MAAMkL,SAAS,GAAG,MAAM9G,QAAQ,CAACmC,IAAI,CAAC,CAAC;QACvCvG,QAAQ,CAACkL,SAAS,CAACnL,KAAK,IAAI,MAAM,CAAC;MACrC;IACF,CAAC,CAAC,OAAOA,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;MAC7BC,QAAQ,CAAC,gBAAgB,CAAC;IAC5B,CAAC,SAAS;MACRH,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMW,kBAAkB,GAAG,MAAOoB,MAAM,IAAK;IAC3C,IAAI,CAACA,MAAM,EAAE;IAEb1B,iBAAiB,CAAC0B,MAAM,CAAC;IACzB/B,UAAU,CAAC,IAAI,CAAC;IAChBG,QAAQ,CAAC,EAAE,CAAC;IACZI,WAAW,CAAC,EAAE,CAAC;IAEf,IAAI;MACF,MAAMgE,QAAQ,GAAG,MAAM8B,KAAK,CAAC,GAAG3G,YAAY,oBAAoB,EAAE;QAChE4L,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACD7C,IAAI,EAAE8C,IAAI,CAACC,SAAS,CAAC;UACnBvJ,OAAO,EAAEH,MAAM,CAACG,OAAO;UACvBgD,UAAU,EAAEnD,MAAM,CAACI,aAAa;UAChCgD,QAAQ,EAAEpD,MAAM,CAACK,WAAW;UAC5BgD,eAAe,EAAE,CAAC,CAAC;QACrB,CAAC;MACH,CAAC,CAAC;MAEF,IAAIb,QAAQ,CAACgC,EAAE,EAAE;QACf,MAAM5B,IAAI,GAAG,MAAMJ,QAAQ,CAACmC,IAAI,CAAC,CAAC;QAClC,IAAI/B,IAAI,CAACU,OAAO,EAAE;UAChB;UACA,MAAMqG,YAAY,GAAG/G,IAAI,CAACY,SAAS,CAAC6B,UAAU,CAAC,MAAM,CAAC,GAClDzC,IAAI,CAACY,SAAS,GACd,GAAG7F,YAAY,GAAGiF,IAAI,CAACY,SAAS,EAAE;UACtChF,WAAW,CAACmL,YAAY,CAAC;QAC3B,CAAC,MAAM;UACLvL,QAAQ,CAACwE,IAAI,CAACzE,KAAK,IAAI,UAAU,CAAC;QACpC;MACF,CAAC,MAAM;QACL,MAAMmL,SAAS,GAAG,MAAM9G,QAAQ,CAACmC,IAAI,CAAC,CAAC;QACvCvG,QAAQ,CAACkL,SAAS,CAACnL,KAAK,IAAI,MAAM,CAAC;MACrC;IACF,CAAC,CAAC,OAAOA,KAAK,EAAE;MACd2E,OAAO,CAAC3E,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACjCC,QAAQ,CAAC,cAAc,CAAC;IAC1B,CAAC,SAAS;MACRH,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,MAAMY,UAAU,GAAI+K,OAAO,IAAK;IAC9B,IAAIA,OAAO,KAAKC,SAAS,IAAID,OAAO,KAAK,IAAI,EAAE,OAAO,UAAU;IAChE,MAAME,KAAK,GAAGtE,IAAI,CAACuE,KAAK,CAACH,OAAO,GAAG,IAAI,CAAC;IACxC,MAAMI,IAAI,GAAGxE,IAAI,CAACuE,KAAK,CAAEH,OAAO,GAAG,IAAI,GAAI,EAAE,CAAC;IAC9C,MAAMK,IAAI,GAAGzE,IAAI,CAACuE,KAAK,CAACH,OAAO,GAAG,EAAE,CAAC;IACrC,OAAO,GAAGE,KAAK,CAACT,QAAQ,CAAC,CAAC,CAACa,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAIF,IAAI,CAACX,QAAQ,CAAC,CAAC,CAACa,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,IAAID,IAAI,CAACZ,QAAQ,CAAC,CAAC,CAACa,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;EACvH,CAAC;;EAED;EACA,MAAMpL,aAAa,GAAIqB,OAAO,IAAK;IACjC,IAAI,CAACA,OAAO,EAAE,OAAO,EAAE;IACvB,OAAOA,OAAO,CAAC8E,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,GAAG,GAAG;EAC7C,CAAC;;EAED;EACA,MAAMlG,aAAa,GAAGA,CAACyB,IAAI,EAAE5C,KAAK,KAAK;IACrC,IAAI,CAACA,KAAK,IAAI,CAAC4C,IAAI,EAAE,OAAOA,IAAI;IAEhC,IAAI;MACF,MAAM2J,KAAK,GAAG,IAAIC,MAAM,CAACxM,KAAK,EAAE,IAAI,CAAC;MACrC,OAAO4C,IAAI,CAACyE,OAAO,CAACkF,KAAK,EAAEE,KAAK,IAAI,SAASA,KAAK,SAAS,CAAC;IAC9D,CAAC,CAAC,OAAO/K,CAAC,EAAE;MACV,OAAOkB,IAAI;IACb;EACF,CAAC;;EAED;EACA,MAAM8J,UAAU,GAAIC,IAAI,IAAK;IAC3BxB,aAAa,CAACwB,IAAI,CAAC;EACrB,CAAC;EAED,oBACEhN,OAAA;IAAK0B,SAAS,EAAC,KAAK;IAAAD,QAAA,gBAClBzB,OAAA;MAAQ0B,SAAS,EAAC,YAAY;MAAAD,QAAA,gBAC5BzB,OAAA;QAAAyB,QAAA,EAAI;MAAW;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAEpBtC,OAAA;QAAK0B,SAAS,EAAE,cAAcf,SAAS,CAACF,OAAO,GAAG,UAAU,GAAGE,SAAS,CAACC,KAAK,GAAG,OAAO,GAAG,WAAW,EAAG;QAAAa,QAAA,EACtGd,SAAS,CAACF,OAAO,GAAG,aAAa,GAAGE,SAAS,CAACC,KAAK,GAAG,uBAAuB,GAAGD,SAAS,CAAC0E,IAAI,GAAG,iBAAiB1E,SAAS,CAAC0E,IAAI,CAAC4H,eAAe,OAAOtM,SAAS,CAAC0E,IAAI,CAAC6H,eAAe,OAAO,GAAG;MAAS;QAAA/K,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtM,CAAC,eAENtC,OAAA;QAAK0B,SAAS,EAAC,UAAU;QAAAD,QAAA,eACvBzB,OAAA;UAAAyB,QAAA,gBACEzB,OAAA;YAAI0B,SAAS,EAAE6J,UAAU,KAAK,QAAQ,GAAG,QAAQ,GAAG,EAAG;YAAA9J,QAAA,eACrDzB,OAAA;cAAQ2C,OAAO,EAAEA,CAAA,KAAMoK,UAAU,CAAC,QAAQ,CAAE;cAAAtL,QAAA,EAAC;YAAI;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACxD,CAAC,eACLtC,OAAA;YAAI0B,SAAS,EAAE6J,UAAU,KAAK,YAAY,GAAG,QAAQ,GAAG,EAAG;YAAA9J,QAAA,eACzDzB,OAAA;cAAQ2C,OAAO,EAAEA,CAAA,KAAMoK,UAAU,CAAC,YAAY,CAAE;cAAAtL,QAAA,EAAC;YAAI;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5D,CAAC,eACLtC,OAAA;YAAI0B,SAAS,EAAE6J,UAAU,KAAK,YAAY,GAAG,QAAQ,GAAG,EAAG;YAAA9J,QAAA,eACzDzB,OAAA;cAAQ2C,OAAO,EAAEA,CAAA,KAAMoK,UAAU,CAAC,YAAY,CAAE;cAAAtL,QAAA,EAAC;YAAI;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5D,CAAC,eACLtC,OAAA;YAAI0B,SAAS,EAAE6J,UAAU,KAAK,eAAe,GAAG,QAAQ,GAAG,EAAG;YAAA9J,QAAA,eAC5DzB,OAAA;cAAQ2C,OAAO,EAAEA,CAAA,KAAMoK,UAAU,CAAC,eAAe,CAAE;cAAAtL,QAAA,EAAC;YAAI;cAAAU,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC/D,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,eAETtC,OAAA;MAAM0B,SAAS,EAAC,UAAU;MAAAD,QAAA,GACvB8J,UAAU,KAAK,QAAQ,iBACtBvL,OAAA,CAACG,UAAU;QACTC,YAAY,EAAEA,YAAa;QAC3BC,KAAK,EAAEA,KAAM;QACbC,QAAQ,EAAEA,QAAS;QACnBC,aAAa,EAAE8G,OAAQ;QACvB7G,gBAAgB,EAAE6K,UAAW;QAC7B5K,OAAO,EAAEA,OAAQ;QACjBC,UAAU,EAAEA,UAAW;QACvBC,SAAS,EAAEA,SAAS,CAACF,OAAO,GAAG,UAAU,GAAGE,SAAS,CAACC,KAAK,GAAG,OAAO,GAAG,WAAY;QACpFA,KAAK,EAAEA,KAAM;QACbC,QAAQ,EAAEA,QAAS;QACnBC,cAAc,EAAEA,cAAe;QAC/BC,iBAAiB,EAAEA,iBAAkB;QACrCC,QAAQ,EAAEA,QAAS;QACnBC,WAAW,EAAEA,WAAY;QACzBC,cAAc,EAAET,OAAQ;QACxBU,iBAAiB,EAAET,UAAW;QAC9BU,YAAY,EAAEA,YAAa;QAC3BC,kBAAkB,EAAEA,kBAAmB;QACvCC,UAAU,EAAEA,UAAW;QACvBC,aAAa,EAAEA,aAAc;QAC7BC,aAAa,EAAEA;MAAc;QAAAW,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CACF,EAEAiJ,UAAU,KAAK,YAAY,iBAC1BvL,OAAA,CAACsD,aAAa;QACZlD,YAAY,EAAEA,YAAa;QAC3BO,SAAS,EAAEA,SAAS,CAACF,OAAO,GAAG,UAAU,GAAGE,SAAS,CAACC,KAAK,GAAG,OAAO,GAAG,WAAY;QACpFU,UAAU,EAAEA,UAAW;QACvBC,aAAa,EAAEA;MAAc;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CACF,EAEAiJ,UAAU,KAAK,YAAY,iBAC1BvL,OAAA,CAAC2J,aAAa;QACZvJ,YAAY,EAAEA,YAAa;QAC3BO,SAAS,EAAEA,SAAS,CAACF,OAAO,GAAG,UAAU,GAAGE,SAAS,CAACC,KAAK,GAAG,OAAO,GAAG,WAAY;QACpFU,UAAU,EAAEA,UAAW;QACvBC,aAAa,EAAEA;MAAc;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CACF,EAEAiJ,UAAU,KAAK,eAAe,iBAC7BvL,OAAA,CAAC4K,gBAAgB;QACfxK,YAAY,EAAEA,YAAa;QAC3BO,SAAS,EAAEA,SAAS,CAACF,OAAO,GAAG,UAAU,GAAGE,SAAS,CAACC,KAAK,GAAG,OAAO,GAAG,WAAY;QACpFU,UAAU,EAAEA,UAAW;QACvBC,aAAa,EAAEA;MAAc;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CACF;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CAAC,eAEPtC,OAAA;MAAQ0B,SAAS,EAAC,YAAY;MAAAD,QAAA,eAC5BzB,OAAA;QAAAyB,QAAA,EAAG;MAAe;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChB,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAAC8I,GAAA,CA9OQD,GAAG;AAAAgC,GAAA,GAAHhC,GAAG;AAgPZ,eAAeA,GAAG;AAAC,IAAA9H,EAAA,EAAAqG,GAAA,EAAAW,GAAA,EAAAa,GAAA,EAAAiC,GAAA;AAAAC,YAAA,CAAA/J,EAAA;AAAA+J,YAAA,CAAA1D,GAAA;AAAA0D,YAAA,CAAA/C,GAAA;AAAA+C,YAAA,CAAAlC,GAAA;AAAAkC,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}