{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import axios from'axios';// å­é¡µé¢ç»„ä»¶\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SearchPage=_ref=>{let{API_BASE_URL,query,setQuery,searchResults,setSearchResults,loading,setLoading,apiStatus,error,setError,selectedResult,setSelectedResult,videoUrl,setVideoUrl,isVideoLoading,setIsVideoLoading,handleSearch,handleGenerateClip,formatTime,formatEpisode,highlightText}=_ref;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"search-area\",children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSearch,children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-box\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:query,onChange:e=>setQuery(e.target.value),placeholder:\"\\u8F93\\u5165\\u8981\\u641C\\u7D22\\u7684\\u5B57\\u5E55\\u5185\\u5BB9...\",disabled:apiStatus!=='connected'}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||apiStatus!=='connected',children:loading?'æœç´¢ä¸­...':'æœç´¢'})]})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-area\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"results-area\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u641C\\u7D22\\u7ED3\\u679C \",searchResults.length>0&&`(${searchResults.length})`]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u641C\\u7D22\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"results-list\",children:searchResults.map((result,index)=>/*#__PURE__*/_jsxs(\"li\",{className:selectedResult===result?'selected':'',onClick:()=>handleGenerateClip(result),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"result-header\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"episode\",children:formatEpisode(result.episode)}),/*#__PURE__*/_jsxs(\"span\",{className:\"time\",children:[formatTime(result.start_seconds),\" - \",formatTime(result.end_seconds)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"subtitle-text\",dangerouslySetInnerHTML:{__html:highlightText(result.text,query)}})]},index))})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"video-area\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u89C6\\u9891\\u64AD\\u653E\"}),selectedResult?/*#__PURE__*/_jsxs(\"div\",{className:\"video-player\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"video-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u96C6\\u6570:\"}),\" \",formatEpisode(selectedResult.episode)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u65F6\\u95F4\\u6BB5:\"}),\" \",formatTime(selectedResult.start_seconds),\" - \",formatTime(selectedResult.end_seconds)]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u5B57\\u5E55\\u5185\\u5BB9:\"}),\" \",selectedResult.text]})]}),isVideoLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-video\",children:\"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"}):videoUrl?/*#__PURE__*/_jsx(\"video\",{controls:true,autoPlay:true,className:\"video-element\",src:videoUrl}):/*#__PURE__*/_jsx(\"div\",{className:\"video-placeholder\",children:selectedResult?'å‡†å¤‡ç”Ÿæˆè§†é¢‘ç‰‡æ®µ...':'è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªæœç´¢ç»“æœ'})]}):/*#__PURE__*/_jsx(\"div\",{className:\"video-placeholder\",children:\"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u641C\\u7D22\\u7ED3\\u679C\"})]})]})]});};// æˆè¯­æ¥é¾™æ¸¸æˆç»„ä»¶\nconst ChainGamePage=_ref2=>{let{API_BASE_URL,apiStatus,formatTime,formatEpisode}=_ref2;const[gameStarted,setGameStarted]=useState(false);const[currentPrompts,setCurrentPrompts]=useState([]);const[loadingPrompts,setLoadingPrompts]=useState(false);const[gameLog,setGameLog]=useState([]);const[currentSentence,setCurrentSentence]=useState(null);const[nextOptions,setNextOptions]=useState([]);const[loadingNextOptions,setLoadingNextOptions]=useState(false);const[gameError,setGameError]=useState(null);const[videoUrl,setVideoUrl]=useState('');const[isVideoLoading,setIsVideoLoading]=useState(false);const[selectedOption,setSelectedOption]=useState(null);const[isExportingVideo,setIsExportingVideo]=useState(false);const[clipUrls,setClipUrls]=useState([]);const[isConfirmMode,setIsConfirmMode]=useState(false);// è·å–éšæœºæç¤ºå¥å­\nconst fetchRandomPrompts=async()=>{setLoadingPrompts(true);setGameError(null);try{const response=await axios.get(`${API_BASE_URL}/api/random_sentences`,{params:{count:8}});if(response.data&&response.data.sentences){setCurrentPrompts(response.data.sentences);}else{setGameError('è·å–æç¤ºå¥å­å¤±è´¥');}}catch(error){console.error('è·å–æç¤ºå¥å­é”™è¯¯:',error);setGameError('æ— æ³•è·å–æç¤ºå¥å­ï¼Œè¯·ç¡®ä¿APIæœåŠ¡æ­£å¸¸è¿è¡Œ');}finally{setLoadingPrompts(false);}};// åˆ·æ–°éšæœºæç¤º\nconst refreshRandomPrompts=()=>{if(apiStatus==='connected'&&!loadingPrompts){fetchRandomPrompts();}};// å¼€å§‹æ–°æ¸¸æˆ\nconst startNewGame=()=>{setGameLog([]);fetchRandomPrompts();setGameStarted(false);setCurrentSentence(null);setNextOptions([]);setClipUrls([]);setVideoUrl('');setSelectedOption(null);setIsConfirmMode(false);};// ç”Ÿæˆè§†é¢‘ç‰‡æ®µ\nconst generateVideoClip=async subtitle=>{setIsVideoLoading(true);setVideoUrl('');setGameError(null);try{const response=await axios.post(`${API_BASE_URL}/api/generate_clip`,{episode:subtitle.episode,start_time:subtitle.start_seconds,end_time:subtitle.end_seconds,context_seconds:2});if(response.data.success){setVideoUrl(`${API_BASE_URL}${response.data.video_url}`);return`${API_BASE_URL}${response.data.video_url}`;}else{setGameError('ç”Ÿæˆè§†é¢‘ç‰‡æ®µå¤±è´¥');return null;}}catch(error){console.error('ç”Ÿæˆè§†é¢‘ç‰‡æ®µå‡ºé”™:',error);setGameError('è§†é¢‘æœåŠ¡å‡ºç°é”™è¯¯ï¼Œè¯·ç¡®ä¿è§†é¢‘æ–‡ä»¶å­˜åœ¨ä¸”å¯è®¿é—®');return null;}finally{setIsVideoLoading(false);}};// é€‰æ‹©å¼€å§‹å¥å­\nconst selectStartSentence=async sentence=>{setSelectedOption(sentence);setIsConfirmMode(true);const clipUrl=await generateVideoClip(sentence);if(!clipUrl)return;};// ç¡®è®¤é€‰æ‹©å¼€å§‹å¥å­\nconst confirmStartSentence=()=>{const sentence=selectedOption;if(!sentence)return;setCurrentSentence(sentence);setGameLog([{...sentence,step:1,clipUrl:videoUrl}]);setClipUrls([...clipUrls,videoUrl]);setGameStarted(true);fetchNextOptions(sentence.text);setIsConfirmMode(false);setSelectedOption(null);};// å–æ¶ˆé€‰æ‹©\nconst cancelSelection=()=>{setIsConfirmMode(false);setSelectedOption(null);setVideoUrl('');};// è·å–ä¸‹ä¸€æ­¥é€‰é¡¹\nconst fetchNextOptions=async text=>{if(!text)return;setLoadingNextOptions(true);setGameError(null);try{// è·å–æœ€åä¸€ä¸ªå­—ï¼Œæ’é™¤è¯­æ°”è¯\nlet lastChar=getLastValidChar(text);if(!lastChar){setGameError('æ— æ³•è¯†åˆ«æœ‰æ•ˆçš„ç»“å°¾å­—ç¬¦');setLoadingNextOptions(false);return;}console.log(`æ­£åœ¨æŸ¥æ‰¾ä»¥\"${lastChar}\"å¼€å¤´çš„å¥å­...`);const response=await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(`^${lastChar}`)}&use_regex=true`);if(!response.ok){throw new Error(`APIè¯·æ±‚å¤±è´¥: ${response.status}`);}const data=await response.json();if(data&&data.results){console.log(`APIè¿”å›äº† ${data.results.length} æ¡ç»“æœ`);// è¿‡æ»¤ç»“æœï¼Œä¿ç•™3-8ä¸ªå­—çš„å¥å­\nconst filteredResults=data.results.filter(item=>{const cleanText=item.text.replace(/[å•Šå‘¢å—å§å‘€å˜›å“¦å“å—¯å‘å‘µå‘¦è¯¶å“ˆå“Ÿ]$/,'');return cleanText.length>=3&&cleanText.length<=8;});console.log(`è¿‡æ»¤åè¿˜æœ‰ ${filteredResults.length} æ¡ç»“æœ`);if(filteredResults.length===0){// å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç»“æœï¼Œå°è¯•ä¸ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„ç²¾ç¡®æŸ¥è¯¢\nconsole.log(`å°è¯•ä½¿ç”¨ç²¾ç¡®æŸ¥è¯¢æœç´¢ä»¥\"${lastChar}\"å¼€å¤´çš„å¥å­`);const fallbackResponse=await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(lastChar)}`);const fallbackData=await fallbackResponse.json();if(fallbackData&&fallbackData.results){console.log(`ç²¾ç¡®æŸ¥è¯¢è¿”å›äº† ${fallbackData.results.length} æ¡ç»“æœ`);// æ‰‹åŠ¨è¿‡æ»¤ä»¥lastCharå¼€å¤´çš„ç»“æœ\nconst manualFilteredResults=fallbackData.results.filter(item=>{return item.text.startsWith(lastChar)&&item.text.length>=3&&item.text.length<=8;});if(manualFilteredResults.length>0){console.log(`æ‰‹åŠ¨è¿‡æ»¤åæ‰¾åˆ° ${manualFilteredResults.length} æ¡ç»“æœ`);// éšæœºé€‰æ‹©æœ€å¤š8ä¸ªç»“æœ\nconst shuffled=[...manualFilteredResults].sort(()=>0.5-Math.random());setNextOptions(shuffled.slice(0,8));setLoadingNextOptions(false);return;}}setGameError(`æ²¡æœ‰æ‰¾åˆ°ä»¥\"${lastChar}\"å¼€å¤´çš„å¥å­`);}else{// éšæœºé€‰æ‹©æœ€å¤š8ä¸ªç»“æœ\nconst shuffled=[...filteredResults].sort(()=>0.5-Math.random());setNextOptions(shuffled.slice(0,8));}}else{setGameError('è·å–æ¥ç»­å¥å­å¤±è´¥');}}catch(error){console.error('è·å–æ¥ç»­å¥å­é”™è¯¯:',error);setGameError(`æŸ¥è¯¢é”™è¯¯: ${error.message}`);}finally{setLoadingNextOptions(false);}};// è·å–æœ€åä¸€ä¸ªæœ‰æ•ˆå­—ç¬¦ï¼ˆæ’é™¤è¯­æ°”è¯ï¼‰\nconst getLastValidChar=text=>{if(!text||text.length===0)return null;// æ’é™¤å¸¸è§è¯­æ°”è¯\nconst cleanText=text.replace(/[å•Šå‘¢å—å§å‘€å˜›å“¦å“å—¯å‘å‘µå‘¦è¯¶å“ˆå“Ÿ]$/,'');return cleanText.length>0?cleanText[cleanText.length-1]:null;};// åˆ·æ–°ä¸‹ä¸€æ­¥é€‰é¡¹\nconst refreshNextOptions=()=>{if(currentSentence&&!loadingNextOptions){fetchNextOptions(currentSentence.text);}};// é€‰æ‹©ä¸‹ä¸€ä¸ªå¥å­\nconst selectNextSentence=async sentence=>{setSelectedOption(sentence);setIsConfirmMode(true);const clipUrl=await generateVideoClip(sentence);if(!clipUrl)return;};// ç¡®è®¤é€‰æ‹©ä¸‹ä¸€ä¸ªå¥å­\nconst confirmNextSentence=()=>{const sentence=selectedOption;if(!sentence)return;setCurrentSentence(sentence);setGameLog([...gameLog,{...sentence,step:gameLog.length+1,clipUrl:videoUrl}]);setClipUrls([...clipUrls,videoUrl]);fetchNextOptions(sentence.text);setIsConfirmMode(false);setSelectedOption(null);};// å›åˆ°ä¸Šä¸€æ­¥\nconst goBackOneStep=()=>{if(gameLog.length<=1){// åªæœ‰ä¸€æ­¥ï¼Œå›åˆ°é€‰æ‹©å¼€å§‹å¥å­\nsetGameStarted(false);setGameLog([]);setCurrentSentence(null);setNextOptions([]);setClipUrls([]);return;}// åˆ é™¤æœ€åä¸€æ­¥\nconst newLog=gameLog.slice(0,-1);const newClipUrls=clipUrls.slice(0,-1);setGameLog(newLog);setClipUrls(newClipUrls);setCurrentSentence(newLog[newLog.length-1]);fetchNextOptions(newLog[newLog.length-1].text);};// å¯¼å‡ºåˆå¹¶è§†é¢‘\nconst exportMergedVideo=async()=>{// åªä»gameLogä¸­è·å–é€‰ä¸­çš„è§†é¢‘URLï¼Œè€Œä¸æ˜¯ä½¿ç”¨clipUrls\nconst selectedClipUrls=gameLog.map(entry=>entry.clipUrl).filter(url=>url);if(selectedClipUrls.length===0){setGameError('æ²¡æœ‰å¯å¯¼å‡ºçš„è§†é¢‘');return;}setIsExportingVideo(true);setGameError(null);try{const response=await axios.post(`${API_BASE_URL}/api/merge_clips`,{clip_urls:selectedClipUrls});if(response.data.success){// è§¦å‘ä¸‹è½½\nconst a=document.createElement('a');a.href=`${API_BASE_URL}${response.data.merged_video_url}`;a.download='ç”„å¬›ä¼ æ¥é¾™.mp4';document.body.appendChild(a);a.click();document.body.removeChild(a);}else{setGameError('å¯¼å‡ºè§†é¢‘å¤±è´¥');}}catch(error){console.error('å¯¼å‡ºè§†é¢‘é”™è¯¯:',error);setGameError('å¯¼å‡ºè§†é¢‘å¤±è´¥ï¼Œè¯·ç¡®ä¿æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ');}finally{setIsExportingVideo(false);}};// åˆå§‹åŠ è½½æ—¶è·å–éšæœºæç¤º\nuseEffect(()=>{if(apiStatus==='connected'){fetchRandomPrompts();}},[apiStatus]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chain-game-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"game-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:startNewGame,className:\"new-game-btn\",disabled:apiStatus!=='connected',children:\"\\u65B0\\u6E38\\u620F\"}),gameStarted&&/*#__PURE__*/_jsx(\"button\",{onClick:goBackOneStep,className:\"back-btn\",disabled:gameLog.length===0,children:\"\\u4E0A\\u4E00\\u6B65\"}),clipUrls.length>1&&/*#__PURE__*/_jsx(\"button\",{onClick:exportMergedVideo,className:\"export-btn\",disabled:isExportingVideo,children:isExportingVideo?'å¯¼å‡ºä¸­...':'å¯¼å‡ºæ¥é¾™è§†é¢‘'})]}),gameError&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:gameError}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"game-candidates\",children:[!gameStarted?/*#__PURE__*/_jsxs(\"div\",{className:\"start-game-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u9009\\u62E9\\u5F00\\u59CB\\u53E5\\u5B50\"}),/*#__PURE__*/_jsx(\"button\",{onClick:refreshRandomPrompts,className:\"refresh-btn\",disabled:loadingPrompts||apiStatus!=='connected',children:\"\\u6362\\u4E00\\u6279\"})]}),loadingPrompts?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u52A0\\u8F7D\\u63D0\\u793A\\u53E5\\u5B50\\u4E2D...\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"prompts-list\",children:currentPrompts.map((prompt,index)=>/*#__PURE__*/_jsxs(\"li\",{onClick:()=>selectStartSentence(prompt),className:selectedOption===prompt?'prompt-item selected':'prompt-item',children:[/*#__PURE__*/_jsx(\"div\",{className:\"prompt-text\",children:prompt.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"prompt-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"episode\",children:formatEpisode(prompt.episode)}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:formatTime(prompt.start_seconds)})]})]},index))}),currentPrompts.length===0&&!loadingPrompts&&/*#__PURE__*/_jsxs(\"div\",{className:\"no-prompts\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u6CA1\\u6709\\u53EF\\u7528\\u7684\\u63D0\\u793A\\u53E5\\u5B50\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchRandomPrompts,disabled:apiStatus!=='connected',children:\"\\u91CD\\u65B0\\u83B7\\u53D6\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"current-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u5F53\\u524D\\u53E5\\u5B50\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"current-sentence\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"current-text\",children:currentSentence===null||currentSentence===void 0?void 0:currentSentence.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"current-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"episode\",children:formatEpisode(currentSentence===null||currentSentence===void 0?void 0:currentSentence.episode)}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:formatTime(currentSentence===null||currentSentence===void 0?void 0:currentSentence.start_seconds)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"next-hint\",children:[\"\\u4E0B\\u4E00\\u53E5\\u9700\\u4EE5\\u300C\",getLastValidChar(currentSentence===null||currentSentence===void 0?void 0:currentSentence.text),\"\\u300D\\u5B57\\u5F00\\u5934\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"next-options-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u53EF\\u9009\\u63A5\\u7EED\"}),/*#__PURE__*/_jsx(\"button\",{onClick:refreshNextOptions,className:\"refresh-btn\",disabled:loadingNextOptions,children:\"\\u6362\\u4E00\\u6279\"})]}),loadingNextOptions?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u52A0\\u8F7D\\u63A5\\u7EED\\u53E5\\u5B50\\u4E2D...\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"options-list\",children:nextOptions.map((option,index)=>/*#__PURE__*/_jsxs(\"li\",{onClick:()=>selectNextSentence(option),className:selectedOption===option?'option-item selected':'option-item',children:[/*#__PURE__*/_jsx(\"div\",{className:\"option-text\",children:option.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"option-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"episode\",children:formatEpisode(option.episode)}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:formatTime(option.start_seconds)})]})]},index))}),nextOptions.length===0&&!loadingNextOptions&&/*#__PURE__*/_jsxs(\"div\",{className:\"no-options\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u6CA1\\u6709\\u627E\\u5230\\u5408\\u9002\\u7684\\u63A5\\u7EED\\u53E5\\u5B50\"}),/*#__PURE__*/_jsx(\"button\",{onClick:startNewGame,children:\"\\u91CD\\u65B0\\u5F00\\u59CB\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-log-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u63A5\\u9F99\\u8BB0\\u5F55\"}),gameLog.length>0?/*#__PURE__*/_jsx(\"ol\",{className:\"game-log-list\",children:gameLog.map((log,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"log-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"log-text\",children:log.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"log-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"episode\",children:formatEpisode(log.episode)}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:formatTime(log.start_seconds)}),log.clipUrl&&/*#__PURE__*/_jsx(\"span\",{className:\"clip-info\",children:/*#__PURE__*/_jsx(\"i\",{className:\"video-icon\",children:\"\\uD83C\\uDFAC\"})})]})]},index))}):/*#__PURE__*/_jsx(\"div\",{className:\"empty-log\",children:\"\\u5C1A\\u672A\\u5F00\\u59CB\\u6E38\\u620F\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"game-video-preview\",children:[isConfirmMode&&/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"selected-sentence\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"selected-text\",children:selectedOption===null||selectedOption===void 0?void 0:selectedOption.text}),/*#__PURE__*/_jsxs(\"div\",{className:\"selected-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"episode\",children:formatEpisode(selectedOption===null||selectedOption===void 0?void 0:selectedOption.episode)}),/*#__PURE__*/_jsx(\"span\",{className:\"time\",children:formatTime(selectedOption===null||selectedOption===void 0?void 0:selectedOption.start_seconds)})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"video-preview\",children:isVideoLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-video\",children:\"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"}):videoUrl?/*#__PURE__*/_jsx(\"video\",{controls:true,autoPlay:true,className:\"video-element\",src:videoUrl}):/*#__PURE__*/_jsx(\"div\",{className:\"video-placeholder\",children:\"\\u51C6\\u5907\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5...\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-actions\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:gameStarted?confirmNextSentence:confirmStartSentence,className:\"confirm-btn\",disabled:!videoUrl||isVideoLoading,children:\"\\u786E\\u8BA4\\u9009\\u62E9\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelSelection,className:\"cancel-btn\",children:\"\\u53D6\\u6D88\\u9009\\u62E9\"})]})]}),!isConfirmMode&&/*#__PURE__*/_jsx(\"div\",{className:\"video-placeholder large\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"placeholder-text\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u53E5\\u5B50\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u9009\\u62E9\\u540E\\u5C06\\u5728\\u6B64\\u5904\\u9884\\u89C8\\u89C6\\u9891\"})]})})]})]})]});};function App(){const[query,setQuery]=useState('');const[results,setResults]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[selectedResult,setSelectedResult]=useState(null);const[videoUrl,setVideoUrl]=useState('');const[apiStatus,setApiStatus]=useState({loading:true,error:null,data:null});const[activePage,setActivePage]=useState('search');// 'search' æˆ– 'chain-game'\n// API ç›¸å…³é…ç½®\nconst API_BASE_URL='http://localhost:8089';// æ£€æŸ¥APIçŠ¶æ€\nuseEffect(()=>{const checkApiStatus=async()=>{try{const response=await fetch(`${API_BASE_URL}/api/status`);if(response.ok){const data=await response.json();setApiStatus({loading:false,error:null,data});console.log(\"APIçŠ¶æ€:\",data);}else{setApiStatus({loading:false,error:'æ— æ³•è¿æ¥åˆ°APIæœåŠ¡',data:null});}}catch(error){console.error(\"APIè¿æ¥é”™è¯¯:\",error);setApiStatus({loading:false,error:'æ— æ³•è¿æ¥åˆ°APIæœåŠ¡',data:null});}};checkApiStatus();},[]);const handleSearch=async e=>{e.preventDefault();if(!query.trim()){setError('è¯·è¾“å…¥æœç´¢å†…å®¹');return;}setLoading(true);setError('');setResults([]);setSelectedResult(null);setVideoUrl('');try{// æ„å»ºæŸ¥è¯¢URL\nconst queryParams=new URLSearchParams({query:query.trim()}).toString();const response=await fetch(`${API_BASE_URL}/api/search?${queryParams}`);if(response.ok){const data=await response.json();setResults(data.results||[]);if(data.results&&data.results.length===0){setError('æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ç»“æœ');}}else{const errorData=await response.json();setError(errorData.error||'æœç´¢å¤±è´¥');}}catch(error){console.error('æœç´¢å¤±è´¥:',error);setError('æœç´¢è¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');}finally{setLoading(false);}};const handleGenerateClip=async result=>{if(!result)return;setSelectedResult(result);setLoading(true);setError('');setVideoUrl('');try{const response=await fetch(`${API_BASE_URL}/api/generate_clip`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({episode:result.episode,start_time:result.start_seconds,end_time:result.end_seconds,context_seconds:3// ä¸Šä¸‹æ–‡ç§’æ•°\n})});if(response.ok){const data=await response.json();if(data.success){// ç¡®ä¿è§†é¢‘URLåŒ…å«å®Œæ•´çš„åŸºç¡€URL\nconst fullVideoUrl=data.video_url.startsWith('http')?data.video_url:`${API_BASE_URL}${data.video_url}`;setVideoUrl(fullVideoUrl);}else{setError(data.error||'è§†é¢‘ç‰‡æ®µç”Ÿæˆå¤±è´¥');}}else{const errorData=await response.json();setError(errorData.error||'è¯·æ±‚å¤±è´¥');}}catch(error){console.error('ç”Ÿæˆè§†é¢‘ç‰‡æ®µå¤±è´¥:',error);setError('è¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');}finally{setLoading(false);}};// æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º\nconst formatTime=seconds=>{if(seconds===undefined||seconds===null)return'00:00:00';const hours=Math.floor(seconds/3600);const mins=Math.floor(seconds%3600/60);const secs=Math.floor(seconds%60);return`${hours.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;};// æ ¼å¼åŒ–é›†æ•°æ˜¾ç¤º\nconst formatEpisode=episode=>{if(!episode)return'';return episode.replace('åå®«Â·ç”„å¬›ä¼ ','ç¬¬')+'é›†';};// é«˜äº®æ˜¾ç¤ºåŒ¹é…æ–‡æœ¬\nconst highlightText=(text,query)=>{if(!query||!text)return text;try{const regex=new RegExp(query,'gi');return text.replace(regex,match=>`<mark>${match}</mark>`);}catch(e){return text;}};// åˆ‡æ¢é¡µé¢\nconst switchPage=page=>{setActivePage(page);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u300A\\u540E\\u5BAB\\xB7\\u7504\\u5B1B\\u4F20\\u300B\\u5B57\\u5E55\\u641C\\u7D22\\u7CFB\\u7EDF\"}),apiStatus.loading&&/*#__PURE__*/_jsx(\"p\",{className:\"api-status checking\",children:\"\\u68C0\\u67E5API\\u8FDE\\u63A5\\u4E2D...\"}),apiStatus.error&&/*#__PURE__*/_jsx(\"p\",{className:\"api-status error\",children:\"\\u65E0\\u6CD5\\u8FDE\\u63A5\\u5230API\\u670D\\u52A1\\uFF0C\\u8BF7\\u786E\\u4FDD\\u540E\\u7AEF\\u670D\\u52A1\\u5DF2\\u542F\\u52A8\"}),apiStatus.data&&/*#__PURE__*/_jsxs(\"p\",{className:\"api-status connected\",children:[\"API\\u670D\\u52A1\\u5DF2\\u8FDE\\u63A5 (\\u5DF2\\u52A0\\u8F7D \",apiStatus.data.loaded_episodes,\" \\u96C6, \",apiStatus.data.total_subtitles,\" \\u6761\\u5B57\\u5E55)\"]}),/*#__PURE__*/_jsx(\"nav\",{className:\"main-nav\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{className:activePage==='search'?'active':'',children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>switchPage('search'),children:\"\\u5B57\\u5E55\\u641C\\u7D22\"})}),/*#__PURE__*/_jsx(\"li\",{className:activePage==='chain-game'?'active':'',children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>switchPage('chain-game'),children:\"\\u6210\\u8BED\\u63A5\\u9F99\"})})]})})]}),/*#__PURE__*/_jsx(\"main\",{className:\"App-main\",children:activePage==='search'?/*#__PURE__*/_jsx(SearchPage,{API_BASE_URL:API_BASE_URL,query:query,setQuery:setQuery,searchResults:results,setSearchResults:setResults,loading:loading,setLoading:setLoading,apiStatus:apiStatus.data?'connected':'error',error:error,setError:setError,selectedResult:selectedResult,setSelectedResult:setSelectedResult,videoUrl:videoUrl,setVideoUrl:setVideoUrl,isVideoLoading:loading,setIsVideoLoading:setLoading,handleSearch:handleSearch,handleGenerateClip:handleGenerateClip,formatTime:formatTime,formatEpisode:formatEpisode,highlightText:highlightText}):/*#__PURE__*/_jsx(ChainGamePage,{API_BASE_URL:API_BASE_URL,apiStatus:apiStatus.data?'connected':'error',formatTime:formatTime,formatEpisode:formatEpisode})}),/*#__PURE__*/_jsx(\"footer\",{className:\"App-footer\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u300A\\u540E\\u5BAB\\xB7\\u7504\\u5B1B\\u4F20\\u300B\\u5B57\\u5E55\\u641C\\u7D22\\u7CFB\\u7EDF \\xA92024\"})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SearchPage","_ref","API_BASE_URL","query","setQuery","searchResults","setSearchResults","loading","setLoading","apiStatus","error","setError","selectedResult","setSelectedResult","videoUrl","setVideoUrl","isVideoLoading","setIsVideoLoading","handleSearch","handleGenerateClip","formatTime","formatEpisode","highlightText","children","className","onSubmit","type","value","onChange","e","target","placeholder","disabled","length","map","result","index","onClick","episode","start_seconds","end_seconds","dangerouslySetInnerHTML","__html","text","controls","autoPlay","src","ChainGamePage","_ref2","gameStarted","setGameStarted","currentPrompts","setCurrentPrompts","loadingPrompts","setLoadingPrompts","gameLog","setGameLog","currentSentence","setCurrentSentence","nextOptions","setNextOptions","loadingNextOptions","setLoadingNextOptions","gameError","setGameError","selectedOption","setSelectedOption","isExportingVideo","setIsExportingVideo","clipUrls","setClipUrls","isConfirmMode","setIsConfirmMode","fetchRandomPrompts","response","get","params","count","data","sentences","console","refreshRandomPrompts","startNewGame","generateVideoClip","subtitle","post","start_time","end_time","context_seconds","success","video_url","selectStartSentence","sentence","clipUrl","confirmStartSentence","step","fetchNextOptions","cancelSelection","lastChar","getLastValidChar","log","fetch","encodeURIComponent","ok","Error","status","json","results","filteredResults","filter","item","cleanText","replace","fallbackResponse","fallbackData","manualFilteredResults","startsWith","shuffled","sort","Math","random","slice","message","refreshNextOptions","selectNextSentence","confirmNextSentence","goBackOneStep","newLog","newClipUrls","exportMergedVideo","selectedClipUrls","entry","url","clip_urls","a","document","createElement","href","merged_video_url","download","body","appendChild","click","removeChild","prompt","option","App","setResults","setApiStatus","activePage","setActivePage","checkApiStatus","preventDefault","trim","queryParams","URLSearchParams","toString","errorData","method","headers","JSON","stringify","fullVideoUrl","seconds","undefined","hours","floor","mins","secs","padStart","regex","RegExp","match","switchPage","page","loaded_episodes","total_subtitles"],"sources":["/Users/h0270/Documents/code/ai-vedio/create_video/subtitle-search-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\n// å­é¡µé¢ç»„ä»¶\nconst SearchPage = ({ \n  API_BASE_URL, \n  query, \n  setQuery, \n  searchResults,\n  setSearchResults,\n  loading,\n  setLoading,\n  apiStatus,\n  error,\n  setError,\n  selectedResult,\n  setSelectedResult,\n  videoUrl,\n  setVideoUrl,\n  isVideoLoading,\n  setIsVideoLoading,\n  handleSearch,\n  handleGenerateClip,\n  formatTime,\n  formatEpisode,\n  highlightText\n}) => {\n  return (\n    <>\n      <section className=\"search-area\">\n        <form onSubmit={handleSearch}>\n          <div className=\"search-box\">\n            <input\n              type=\"text\"\n              value={query}\n              onChange={(e) => setQuery(e.target.value)}\n              placeholder=\"è¾“å…¥è¦æœç´¢çš„å­—å¹•å†…å®¹...\"\n              disabled={apiStatus !== 'connected'}\n            />\n            <button \n              type=\"submit\" \n              disabled={loading || apiStatus !== 'connected'}\n            >\n              {loading ? 'æœç´¢ä¸­...' : 'æœç´¢'}\n            </button>\n          </div>\n        </form>\n\n        {error && <div className=\"error-message\">{error}</div>}\n      </section>\n\n      <div className=\"content-area\">\n        <section className=\"results-area\">\n          <h2>æœç´¢ç»“æœ {searchResults.length > 0 && `(${searchResults.length})`}</h2>\n          \n          {loading ? (\n            <div className=\"loading\">æœç´¢ä¸­ï¼Œè¯·ç¨å€™...</div>\n          ) : (\n            <ul className=\"results-list\">\n              {searchResults.map((result, index) => (\n                <li \n                  key={index} \n                  className={selectedResult === result ? 'selected' : ''}\n                  onClick={() => handleGenerateClip(result)}\n                >\n                  <div className=\"result-header\">\n                    <span className=\"episode\">{formatEpisode(result.episode)}</span>\n                    <span className=\"time\">{formatTime(result.start_seconds)} - {formatTime(result.end_seconds)}</span>\n                  </div>\n                  <div \n                    className=\"subtitle-text\"\n                    dangerouslySetInnerHTML={{__html: highlightText(result.text, query)}}\n                  />\n                </li>\n              ))}\n            </ul>\n          )}\n        </section>\n\n        <section className=\"video-area\">\n          <h2>è§†é¢‘æ’­æ”¾</h2>\n          {selectedResult ? (\n            <div className=\"video-player\">\n              <div className=\"video-info\">\n                <p><strong>é›†æ•°:</strong> {formatEpisode(selectedResult.episode)}</p>\n                <p><strong>æ—¶é—´æ®µ:</strong> {formatTime(selectedResult.start_seconds)} - {formatTime(selectedResult.end_seconds)}</p>\n                <p><strong>å­—å¹•å†…å®¹:</strong> {selectedResult.text}</p>\n              </div>\n              \n              {isVideoLoading ? (\n                <div className=\"loading-video\">ç”Ÿæˆè§†é¢‘ç‰‡æ®µä¸­ï¼Œè¯·ç¨å€™...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder\">\n                  {selectedResult ? 'å‡†å¤‡ç”Ÿæˆè§†é¢‘ç‰‡æ®µ...' : 'è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªæœç´¢ç»“æœ'}\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"video-placeholder\">\n              è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªæœç´¢ç»“æœ\n            </div>\n          )}\n        </section>\n      </div>\n    </>\n  );\n};\n\n// æˆè¯­æ¥é¾™æ¸¸æˆç»„ä»¶\nconst ChainGamePage = ({ \n  API_BASE_URL, \n  apiStatus,\n  formatTime,\n  formatEpisode\n}) => {\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n\n  // è·å–éšæœºæç¤ºå¥å­\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: { count: 8 }\n      });\n      \n      if (response.data && response.data.sentences) {\n        setCurrentPrompts(response.data.sentences);\n      } else {\n        setGameError('è·å–æç¤ºå¥å­å¤±è´¥');\n      }\n    } catch (error) {\n      console.error('è·å–æç¤ºå¥å­é”™è¯¯:', error);\n      setGameError('æ— æ³•è·å–æç¤ºå¥å­ï¼Œè¯·ç¡®ä¿APIæœåŠ¡æ­£å¸¸è¿è¡Œ');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // åˆ·æ–°éšæœºæç¤º\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // å¼€å§‹æ–°æ¸¸æˆ\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // ç”Ÿæˆè§†é¢‘ç‰‡æ®µ\n  const generateVideoClip = async (subtitle) => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n\n      if (response.data.success) {\n        setVideoUrl(`${API_BASE_URL}${response.data.video_url}`);\n        return `${API_BASE_URL}${response.data.video_url}`;\n      } else {\n        setGameError('ç”Ÿæˆè§†é¢‘ç‰‡æ®µå¤±è´¥');\n        return null;\n      }\n    } catch (error) {\n      console.error('ç”Ÿæˆè§†é¢‘ç‰‡æ®µå‡ºé”™:', error);\n      setGameError('è§†é¢‘æœåŠ¡å‡ºç°é”™è¯¯ï¼Œè¯·ç¡®ä¿è§†é¢‘æ–‡ä»¶å­˜åœ¨ä¸”å¯è®¿é—®');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // é€‰æ‹©å¼€å§‹å¥å­\n  const selectStartSentence = async (sentence) => {\n    setSelectedOption(sentence);\n    setIsConfirmMode(true);\n    \n    const clipUrl = await generateVideoClip(sentence);\n    if (!clipUrl) return;\n  };\n\n  // ç¡®è®¤é€‰æ‹©å¼€å§‹å¥å­\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([{...sentence, step: 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // å–æ¶ˆé€‰æ‹©\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n\n  // è·å–ä¸‹ä¸€æ­¥é€‰é¡¹\n  const fetchNextOptions = async (text) => {\n    if (!text) return;\n    \n    setLoadingNextOptions(true);\n    setGameError(null);\n    \n    try {\n      // è·å–æœ€åä¸€ä¸ªå­—ï¼Œæ’é™¤è¯­æ°”è¯\n      let lastChar = getLastValidChar(text);\n      \n      if (!lastChar) {\n        setGameError('æ— æ³•è¯†åˆ«æœ‰æ•ˆçš„ç»“å°¾å­—ç¬¦');\n        setLoadingNextOptions(false);\n        return;\n      }\n      \n      console.log(`æ­£åœ¨æŸ¥æ‰¾ä»¥\"${lastChar}\"å¼€å¤´çš„å¥å­...`);\n      \n      const response = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(`^${lastChar}`)}&use_regex=true`);\n      \n      if (!response.ok) {\n        throw new Error(`APIè¯·æ±‚å¤±è´¥: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      \n      if (data && data.results) {\n        console.log(`APIè¿”å›äº† ${data.results.length} æ¡ç»“æœ`);\n        \n        // è¿‡æ»¤ç»“æœï¼Œä¿ç•™3-8ä¸ªå­—çš„å¥å­\n        const filteredResults = data.results.filter(item => {\n          const cleanText = item.text.replace(/[å•Šå‘¢å—å§å‘€å˜›å“¦å“å—¯å‘å‘µå‘¦è¯¶å“ˆå“Ÿ]$/, '');\n          return cleanText.length >= 3 && cleanText.length <= 8;\n        });\n        \n        console.log(`è¿‡æ»¤åè¿˜æœ‰ ${filteredResults.length} æ¡ç»“æœ`);\n        \n        if (filteredResults.length === 0) {\n          // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç»“æœï¼Œå°è¯•ä¸ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„ç²¾ç¡®æŸ¥è¯¢\n          console.log(`å°è¯•ä½¿ç”¨ç²¾ç¡®æŸ¥è¯¢æœç´¢ä»¥\"${lastChar}\"å¼€å¤´çš„å¥å­`);\n          const fallbackResponse = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(lastChar)}`);\n          const fallbackData = await fallbackResponse.json();\n          \n          if (fallbackData && fallbackData.results) {\n            console.log(`ç²¾ç¡®æŸ¥è¯¢è¿”å›äº† ${fallbackData.results.length} æ¡ç»“æœ`);\n            // æ‰‹åŠ¨è¿‡æ»¤ä»¥lastCharå¼€å¤´çš„ç»“æœ\n            const manualFilteredResults = fallbackData.results.filter(item => {\n              return item.text.startsWith(lastChar) && \n                     item.text.length >= 3 && \n                     item.text.length <= 8;\n            });\n            \n            if (manualFilteredResults.length > 0) {\n              console.log(`æ‰‹åŠ¨è¿‡æ»¤åæ‰¾åˆ° ${manualFilteredResults.length} æ¡ç»“æœ`);\n              // éšæœºé€‰æ‹©æœ€å¤š8ä¸ªç»“æœ\n              const shuffled = [...manualFilteredResults].sort(() => 0.5 - Math.random());\n              setNextOptions(shuffled.slice(0, 8));\n              setLoadingNextOptions(false);\n              return;\n            }\n          }\n          \n          setGameError(`æ²¡æœ‰æ‰¾åˆ°ä»¥\"${lastChar}\"å¼€å¤´çš„å¥å­`);\n        } else {\n          // éšæœºé€‰æ‹©æœ€å¤š8ä¸ªç»“æœ\n          const shuffled = [...filteredResults].sort(() => 0.5 - Math.random());\n          setNextOptions(shuffled.slice(0, 8));\n        }\n      } else {\n        setGameError('è·å–æ¥ç»­å¥å­å¤±è´¥');\n      }\n    } catch (error) {\n      console.error('è·å–æ¥ç»­å¥å­é”™è¯¯:', error);\n      setGameError(`æŸ¥è¯¢é”™è¯¯: ${error.message}`);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // è·å–æœ€åä¸€ä¸ªæœ‰æ•ˆå­—ç¬¦ï¼ˆæ’é™¤è¯­æ°”è¯ï¼‰\n  const getLastValidChar = (text) => {\n    if (!text || text.length === 0) return null;\n    \n    // æ’é™¤å¸¸è§è¯­æ°”è¯\n    const cleanText = text.replace(/[å•Šå‘¢å—å§å‘€å˜›å“¦å“å—¯å‘å‘µå‘¦è¯¶å“ˆå“Ÿ]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // åˆ·æ–°ä¸‹ä¸€æ­¥é€‰é¡¹\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchNextOptions(currentSentence.text);\n    }\n  };\n\n  // é€‰æ‹©ä¸‹ä¸€ä¸ªå¥å­\n  const selectNextSentence = async (sentence) => {\n    setSelectedOption(sentence);\n    setIsConfirmMode(true);\n    \n    const clipUrl = await generateVideoClip(sentence);\n    if (!clipUrl) return;\n  };\n\n  // ç¡®è®¤é€‰æ‹©ä¸‹ä¸€ä¸ªå¥å­\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {...sentence, step: gameLog.length + 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // å›åˆ°ä¸Šä¸€æ­¥\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // åªæœ‰ä¸€æ­¥ï¼Œå›åˆ°é€‰æ‹©å¼€å§‹å¥å­\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      return;\n    }\n    \n    // åˆ é™¤æœ€åä¸€æ­¥\n    const newLog = gameLog.slice(0, -1);\n    const newClipUrls = clipUrls.slice(0, -1);\n    setGameLog(newLog);\n    setClipUrls(newClipUrls);\n    setCurrentSentence(newLog[newLog.length - 1]);\n    fetchNextOptions(newLog[newLog.length - 1].text);\n  };\n\n  // å¯¼å‡ºåˆå¹¶è§†é¢‘\n  const exportMergedVideo = async () => {\n    // åªä»gameLogä¸­è·å–é€‰ä¸­çš„è§†é¢‘URLï¼Œè€Œä¸æ˜¯ä½¿ç”¨clipUrls\n    const selectedClipUrls = gameLog.map(entry => entry.clipUrl).filter(url => url);\n    \n    if (selectedClipUrls.length === 0) {\n      setGameError('æ²¡æœ‰å¯å¯¼å‡ºçš„è§†é¢‘');\n      return;\n    }\n    \n    setIsExportingVideo(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: selectedClipUrls\n      });\n      \n      if (response.data.success) {\n        // è§¦å‘ä¸‹è½½\n        const a = document.createElement('a');\n        a.href = `${API_BASE_URL}${response.data.merged_video_url}`;\n        a.download = 'ç”„å¬›ä¼ æ¥é¾™.mp4';\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n      } else {\n        setGameError('å¯¼å‡ºè§†é¢‘å¤±è´¥');\n      }\n    } catch (error) {\n      console.error('å¯¼å‡ºè§†é¢‘é”™è¯¯:', error);\n      setGameError('å¯¼å‡ºè§†é¢‘å¤±è´¥ï¼Œè¯·ç¡®ä¿æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ');\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // åˆå§‹åŠ è½½æ—¶è·å–éšæœºæç¤º\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n\n  return (\n    <div className=\"chain-game-container\">\n      <div className=\"game-controls\">\n        <button \n          onClick={startNewGame}\n          className=\"new-game-btn\"\n          disabled={apiStatus !== 'connected'}\n        >\n          æ–°æ¸¸æˆ\n        </button>\n        {gameStarted && (\n          <button \n            onClick={goBackOneStep}\n            className=\"back-btn\"\n            disabled={gameLog.length === 0}\n          >\n            ä¸Šä¸€æ­¥\n          </button>\n        )}\n        {clipUrls.length > 1 && (\n          <button\n            onClick={exportMergedVideo}\n            className=\"export-btn\"\n            disabled={isExportingVideo}\n          >\n            {isExportingVideo ? 'å¯¼å‡ºä¸­...' : 'å¯¼å‡ºæ¥é¾™è§†é¢‘'}\n          </button>\n        )}\n      </div>\n      \n      {gameError && <div className=\"error-message\">{gameError}</div>}\n      \n      <div className=\"game-content\">\n        {/* å·¦ä¾§ï¼šå€™é€‰è¯åŒºåŸŸ */}\n        <div className=\"game-candidates\">\n          {!gameStarted ? (\n            <div className=\"start-game-section\">\n              <div className=\"section-header\">\n                <h2>é€‰æ‹©å¼€å§‹å¥å­</h2>\n                <button \n                  onClick={refreshRandomPrompts}\n                  className=\"refresh-btn\"\n                  disabled={loadingPrompts || apiStatus !== 'connected'}\n                >\n                  æ¢ä¸€æ‰¹\n                </button>\n              </div>\n              \n              {loadingPrompts ? (\n                <div className=\"loading\">åŠ è½½æç¤ºå¥å­ä¸­...</div>\n              ) : (\n                <ul className=\"prompts-list\">\n                  {currentPrompts.map((prompt, index) => (\n                    <li \n                      key={index} \n                      onClick={() => selectStartSentence(prompt)}\n                      className={selectedOption === prompt ? 'prompt-item selected' : 'prompt-item'}\n                    >\n                      <div className=\"prompt-text\">{prompt.text}</div>\n                      <div className=\"prompt-info\">\n                        <span className=\"episode\">{formatEpisode(prompt.episode)}</span>\n                        <span className=\"time\">{formatTime(prompt.start_seconds)}</span>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              )}\n              {currentPrompts.length === 0 && !loadingPrompts && (\n                <div className=\"no-prompts\">\n                  <p>æ²¡æœ‰å¯ç”¨çš„æç¤ºå¥å­</p>\n                  <button \n                    onClick={fetchRandomPrompts}\n                    disabled={apiStatus !== 'connected'}\n                  >\n                    é‡æ–°è·å–\n                  </button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              <div className=\"current-section\">\n                <h2>å½“å‰å¥å­</h2>\n                <div className=\"current-sentence\">\n                  <div className=\"current-text\">{currentSentence?.text}</div>\n                  <div className=\"current-info\">\n                    <span className=\"episode\">{formatEpisode(currentSentence?.episode)}</span>\n                    <span className=\"time\">{formatTime(currentSentence?.start_seconds)}</span>\n                  </div>\n                  <div className=\"next-hint\">\n                    ä¸‹ä¸€å¥éœ€ä»¥ã€Œ{getLastValidChar(currentSentence?.text)}ã€å­—å¼€å¤´\n                  </div>\n                </div>\n              </div>\n                \n              <div className=\"next-options-section\">\n                <div className=\"section-header\">\n                  <h2>å¯é€‰æ¥ç»­</h2>\n                  <button \n                    onClick={refreshNextOptions}\n                    className=\"refresh-btn\"\n                    disabled={loadingNextOptions}\n                  >\n                    æ¢ä¸€æ‰¹\n                  </button>\n                </div>\n                \n                {loadingNextOptions ? (\n                  <div className=\"loading\">åŠ è½½æ¥ç»­å¥å­ä¸­...</div>\n                ) : (\n                  <ul className=\"options-list\">\n                    {nextOptions.map((option, index) => (\n                      <li \n                        key={index}\n                        onClick={() => selectNextSentence(option)}\n                        className={selectedOption === option ? 'option-item selected' : 'option-item'}\n                      >\n                        <div className=\"option-text\">{option.text}</div>\n                        <div className=\"option-info\">\n                          <span className=\"episode\">{formatEpisode(option.episode)}</span>\n                          <span className=\"time\">{formatTime(option.start_seconds)}</span>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n                {nextOptions.length === 0 && !loadingNextOptions && (\n                  <div className=\"no-options\">\n                    <p>æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„æ¥ç»­å¥å­</p>\n                    <button onClick={startNewGame}>é‡æ–°å¼€å§‹</button>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* æ¥é¾™è®°å½• */}\n          <div className=\"game-log-section\">\n            <h2>æ¥é¾™è®°å½•</h2>\n            {gameLog.length > 0 ? (\n              <ol className=\"game-log-list\">\n                {gameLog.map((log, index) => (\n                  <li key={index} className=\"log-item\">\n                    <div className=\"log-text\">{log.text}</div>\n                    <div className=\"log-info\">\n                      <span className=\"episode\">{formatEpisode(log.episode)}</span>\n                      <span className=\"time\">{formatTime(log.start_seconds)}</span>\n                      {log.clipUrl && (\n                        <span className=\"clip-info\">\n                          <i className=\"video-icon\">ğŸ¬</i>\n                        </span>\n                      )}\n                    </div>\n                  </li>\n                ))}\n              </ol>\n            ) : (\n              <div className=\"empty-log\">å°šæœªå¼€å§‹æ¸¸æˆ</div>\n            )}\n          </div>\n        </div>\n\n        {/* å³ä¾§ï¼šè§†é¢‘é¢„è§ˆåŒºåŸŸ */}\n        <div className=\"game-video-preview\">\n          {isConfirmMode && (\n            <div className=\"confirm-section\">\n              <div className=\"selected-sentence\">\n                <div className=\"selected-text\">{selectedOption?.text}</div>\n                <div className=\"selected-info\">\n                  <span className=\"episode\">{formatEpisode(selectedOption?.episode)}</span>\n                  <span className=\"time\">{formatTime(selectedOption?.start_seconds)}</span>\n                </div>\n              </div>\n              \n              <div className=\"video-preview\">\n                {isVideoLoading ? (\n                  <div className=\"loading-video\">ç”Ÿæˆè§†é¢‘ç‰‡æ®µä¸­ï¼Œè¯·ç¨å€™...</div>\n                ) : videoUrl ? (\n                  <video \n                    controls \n                    autoPlay \n                    className=\"video-element\"\n                    src={videoUrl}\n                  />\n                ) : (\n                  <div className=\"video-placeholder\">å‡†å¤‡ç”Ÿæˆè§†é¢‘ç‰‡æ®µ...</div>\n                )}\n              </div>\n              \n              <div className=\"confirm-actions\">\n                <button \n                  onClick={gameStarted ? confirmNextSentence : confirmStartSentence}\n                  className=\"confirm-btn\"\n                  disabled={!videoUrl || isVideoLoading}\n                >\n                  ç¡®è®¤é€‰æ‹©\n                </button>\n                <button \n                  onClick={cancelSelection}\n                  className=\"cancel-btn\"\n                >\n                  å–æ¶ˆé€‰æ‹©\n                </button>\n              </div>\n            </div>\n          )}\n          {!isConfirmMode && (\n            <div className=\"video-placeholder large\">\n              <div className=\"placeholder-text\">\n                <p>è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªå¥å­</p>\n                <p>é€‰æ‹©åå°†åœ¨æ­¤å¤„é¢„è§ˆè§†é¢‘</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nfunction App() {\n  const [query, setQuery] = useState('');\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [selectedResult, setSelectedResult] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [apiStatus, setApiStatus] = useState({loading: true, error: null, data: null});\n  const [activePage, setActivePage] = useState('search'); // 'search' æˆ– 'chain-game'\n  \n  // API ç›¸å…³é…ç½®\n  const API_BASE_URL = 'http://localhost:8089';\n  \n  // æ£€æŸ¥APIçŠ¶æ€\n  useEffect(() => {\n    const checkApiStatus = async () => {\n      try {\n        const response = await fetch(`${API_BASE_URL}/api/status`);\n        \n        if (response.ok) {\n          const data = await response.json();\n          setApiStatus({loading: false, error: null, data});\n          console.log(\"APIçŠ¶æ€:\", data);\n        } else {\n          setApiStatus({loading: false, error: 'æ— æ³•è¿æ¥åˆ°APIæœåŠ¡', data: null});\n        }\n      } catch (error) {\n        console.error(\"APIè¿æ¥é”™è¯¯:\", error);\n        setApiStatus({loading: false, error: 'æ— æ³•è¿æ¥åˆ°APIæœåŠ¡', data: null});\n      }\n    };\n    \n    checkApiStatus();\n  }, []);\n  \n  const handleSearch = async (e) => {\n    e.preventDefault();\n    if (!query.trim()) {\n      setError('è¯·è¾“å…¥æœç´¢å†…å®¹');\n      return;\n    }\n    \n    setLoading(true);\n    setError('');\n    setResults([]);\n    setSelectedResult(null);\n    setVideoUrl('');\n    \n    try {\n      // æ„å»ºæŸ¥è¯¢URL\n      const queryParams = new URLSearchParams({\n        query: query.trim()\n      }).toString();\n      \n      const response = await fetch(`${API_BASE_URL}/api/search?${queryParams}`);\n      \n      if (response.ok) {\n        const data = await response.json();\n        setResults(data.results || []);\n        if (data.results && data.results.length === 0) {\n          setError('æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ç»“æœ');\n        }\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'æœç´¢å¤±è´¥');\n      }\n    } catch (error) {\n      console.error('æœç´¢å¤±è´¥:', error);\n      setError('æœç´¢è¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleGenerateClip = async (result) => {\n    if (!result) return;\n    \n    setSelectedResult(result);\n    setLoading(true);\n    setError('');\n    setVideoUrl('');\n    \n    try {\n      const response = await fetch(`${API_BASE_URL}/api/generate_clip`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          episode: result.episode,\n          start_time: result.start_seconds,\n          end_time: result.end_seconds,\n          context_seconds: 3 // ä¸Šä¸‹æ–‡ç§’æ•°\n        })\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        if (data.success) {\n          // ç¡®ä¿è§†é¢‘URLåŒ…å«å®Œæ•´çš„åŸºç¡€URL\n          const fullVideoUrl = data.video_url.startsWith('http') \n            ? data.video_url \n            : `${API_BASE_URL}${data.video_url}`;\n          setVideoUrl(fullVideoUrl);\n        } else {\n          setError(data.error || 'è§†é¢‘ç‰‡æ®µç”Ÿæˆå¤±è´¥');\n        }\n      } else {\n        const errorData = await response.json();\n        setError(errorData.error || 'è¯·æ±‚å¤±è´¥');\n      }\n    } catch (error) {\n      console.error('ç”Ÿæˆè§†é¢‘ç‰‡æ®µå¤±è´¥:', error);\n      setError('è¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // æ ¼å¼åŒ–æ—¶é—´æ˜¾ç¤º\n  const formatTime = (seconds) => {\n    if (seconds === undefined || seconds === null) return '00:00:00';\n    const hours = Math.floor(seconds / 3600);\n    const mins = Math.floor((seconds % 3600) / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // æ ¼å¼åŒ–é›†æ•°æ˜¾ç¤º\n  const formatEpisode = (episode) => {\n    if (!episode) return '';\n    return episode.replace('åå®«Â·ç”„å¬›ä¼ ', 'ç¬¬') + 'é›†';\n  };\n\n  // é«˜äº®æ˜¾ç¤ºåŒ¹é…æ–‡æœ¬\n  const highlightText = (text, query) => {\n    if (!query || !text) return text;\n    \n    try {\n      const regex = new RegExp(query, 'gi');\n      return text.replace(regex, match => `<mark>${match}</mark>`);\n    } catch (e) {\n      return text;\n    }\n  };\n\n  // åˆ‡æ¢é¡µé¢\n  const switchPage = (page) => {\n    setActivePage(page);\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>ã€Šåå®«Â·ç”„å¬›ä¼ ã€‹å­—å¹•æœç´¢ç³»ç»Ÿ</h1>\n        {apiStatus.loading && <p className=\"api-status checking\">æ£€æŸ¥APIè¿æ¥ä¸­...</p>}\n        {apiStatus.error && <p className=\"api-status error\">æ— æ³•è¿æ¥åˆ°APIæœåŠ¡ï¼Œè¯·ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨</p>}\n        {apiStatus.data && <p className=\"api-status connected\">APIæœåŠ¡å·²è¿æ¥ (å·²åŠ è½½ {apiStatus.data.loaded_episodes} é›†, {apiStatus.data.total_subtitles} æ¡å­—å¹•)</p>}\n        \n        <nav className=\"main-nav\">\n          <ul>\n            <li className={activePage === 'search' ? 'active' : ''}>\n              <button onClick={() => switchPage('search')}>å­—å¹•æœç´¢</button>\n            </li>\n            <li className={activePage === 'chain-game' ? 'active' : ''}>\n              <button onClick={() => switchPage('chain-game')}>æˆè¯­æ¥é¾™</button>\n            </li>\n          </ul>\n        </nav>\n      </header>\n\n      <main className=\"App-main\">\n        {activePage === 'search' ? (\n          <SearchPage\n            API_BASE_URL={API_BASE_URL}\n            query={query}\n            setQuery={setQuery}\n            searchResults={results}\n            setSearchResults={setResults}\n            loading={loading}\n            setLoading={setLoading}\n            apiStatus={apiStatus.data ? 'connected' : 'error'}\n            error={error}\n            setError={setError}\n            selectedResult={selectedResult}\n            setSelectedResult={setSelectedResult}\n            videoUrl={videoUrl}\n            setVideoUrl={setVideoUrl}\n            isVideoLoading={loading}\n            setIsVideoLoading={setLoading}\n            handleSearch={handleSearch}\n            handleGenerateClip={handleGenerateClip}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n            highlightText={highlightText}\n          />\n        ) : (\n          <ChainGamePage\n            API_BASE_URL={API_BASE_URL}\n            apiStatus={apiStatus.data ? 'connected' : 'error'}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n          />\n        )}\n      </main>\n\n      <footer className=\"App-footer\">\n        <p>ã€Šåå®«Â·ç”„å¬›ä¼ ã€‹å­—å¹•æœç´¢ç³»ç»Ÿ Â©2024</p>\n      </footer>\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}