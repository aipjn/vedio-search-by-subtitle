{"ast":null,"code":"var _jsxFileName = \"/Users/h0270/Documents/code/ai-vedio/create_video/subtitle-search-app/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\n// 子页面组件\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SearchPage = ({\n  API_BASE_URL,\n  query,\n  setQuery,\n  searchResults,\n  setSearchResults,\n  loading,\n  setLoading,\n  apiStatus,\n  error,\n  setError,\n  selectedResult,\n  setSelectedResult,\n  videoUrl,\n  setVideoUrl,\n  isVideoLoading,\n  setIsVideoLoading,\n  handleSearch,\n  handleGenerateClip,\n  formatTime,\n  formatEpisode,\n  highlightText,\n  availableDramas,\n  selectedDramas,\n  setSelectedDramas,\n  formatDramaName\n}) => {\n  // 处理剧集选择变化\n  const handleDramaChange = dramaId => {\n    if (selectedDramas.includes(dramaId)) {\n      // 如果已经选中，则从数组中移除\n      setSelectedDramas(selectedDramas.filter(id => id !== dramaId));\n    } else {\n      // 如果未选中，则添加到数组\n      setSelectedDramas([...selectedDramas, dramaId]);\n    }\n  };\n\n  // 选择/取消选择所有剧集\n  const toggleAllDramas = () => {\n    if (selectedDramas.length === availableDramas.length) {\n      // 如果已选择所有剧集，则取消选择所有\n      setSelectedDramas([]);\n    } else {\n      // 选择所有剧集\n      setSelectedDramas(availableDramas.map(drama => drama.id));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"search-area\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drama-selector\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"drama-selector-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"\\u9009\\u62E9\\u5267\\u96C6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"toggle-all-button\",\n              onClick: toggleAllDramas,\n              children: selectedDramas.length === availableDramas.length ? '取消全选' : '全选'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"drama-checkbox-container\",\n            children: availableDramas.map(drama => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"drama-checkbox\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                id: `drama-${drama.id}`,\n                checked: selectedDramas.includes(drama.id),\n                onChange: () => handleDramaChange(drama.id)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: `drama-${drama.id}`,\n                children: formatDramaName(drama)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 19\n              }, this)]\n            }, drama.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: query,\n            onChange: e => setQuery(e.target.value),\n            placeholder: \"\\u8F93\\u5165\\u8981\\u641C\\u7D22\\u7684\\u5B57\\u5E55\\u5185\\u5BB9...\",\n            disabled: apiStatus !== 'connected'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading || apiStatus !== 'connected' || selectedDramas.length === 0,\n            children: loading ? '搜索中...' : '搜索'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-area\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"results-area\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"\\u641C\\u7D22\\u7ED3\\u679C \", searchResults.length > 0 && `(${searchResults.length})`]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\",\n          children: \"\\u641C\\u7D22\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"results-list\",\n          children: searchResults.map((result, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: selectedResult === result ? 'selected' : '',\n            onClick: () => handleGenerateClip(result),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"result-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"drama-name\",\n                children: formatDramaName({\n                  id: result.drama_id\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"episode\",\n                children: formatEpisode(result.episode)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: [formatTime(result.start_seconds), \" - \", formatTime(result.end_seconds)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"subtitle-text\",\n              dangerouslySetInnerHTML: {\n                __html: highlightText(result.text, query)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"video-area\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u89C6\\u9891\\u64AD\\u653E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), selectedResult ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-player\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u5267\\u96C6:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 20\n              }, this), \" \", formatDramaName({\n                id: selectedResult.drama_id\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u96C6\\u6570:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 20\n              }, this), \" \", formatEpisode(selectedResult.episode)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u65F6\\u95F4\\u6BB5:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 20\n              }, this), \" \", formatTime(selectedResult.start_seconds), \" - \", formatTime(selectedResult.end_seconds)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u5B57\\u5E55\\u5185\\u5BB9:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 20\n              }, this), \" \", selectedResult.text]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this), isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-video\",\n            children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 17\n          }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            autoPlay: true,\n            className: \"video-element\",\n            src: videoUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-placeholder\",\n            children: selectedResult ? '准备生成视频片段...' : '请从左侧选择一个搜索结果'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-placeholder\",\n          children: \"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u641C\\u7D22\\u7ED3\\u679C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n// 成语接龙游戏组件\n_c = SearchPage;\nconst ChainGamePage = ({\n  API_BASE_URL,\n  apiStatus,\n  formatTime,\n  formatEpisode,\n  availableDramas,\n  formatDramaName\n}) => {\n  _s();\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n  const [selectedDramas, setSelectedDramas] = useState(availableDramas ? availableDramas.map(drama => drama.id) : []);\n\n  // 处理剧集选择变化\n  const handleDramaChange = dramaId => {\n    if (selectedDramas.includes(dramaId)) {\n      // 如果已经选中，则从数组中移除\n      setSelectedDramas(selectedDramas.filter(id => id !== dramaId));\n    } else {\n      // 如果未选中，则添加到数组\n      setSelectedDramas([...selectedDramas, dramaId]);\n    }\n  };\n\n  // 选择/取消选择所有剧集\n  const toggleAllDramas = () => {\n    if (selectedDramas.length === availableDramas.length) {\n      // 如果已选择所有剧集，则取消选择所有\n      setSelectedDramas([]);\n    } else {\n      // 选择所有剧集\n      setSelectedDramas(availableDramas.map(drama => drama.id));\n    }\n  };\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: {\n          count: 8\n        }\n      });\n      if (response.data && response.data.results) {\n        setCurrentPrompts(response.data.results);\n      } else {\n        setGameError('获取提示句子失败');\n      }\n    } catch (error) {\n      console.error('获取提示句子错误:', error);\n      setGameError('无法获取提示句子，请确保API服务正常运行');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async subtitle => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: subtitle.drama_id,\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n      if (response.data && response.data.clip_url) {\n        const clipUrl = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = prompt => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([{\n      ...sentence,\n      step: 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n\n  // 选择下一个句子\n  const selectNextSentence = option => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {\n      ...sentence,\n      step: gameLog.length + 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取下一步选项\n  const fetchNextOptions = async text => {\n    if (!text) return;\n    setLoadingNextOptions(true);\n    setGameError(null);\n    try {\n      // 获取最后一个字，排除语气词\n      let lastChar = getLastValidChar(text);\n      if (!lastChar) {\n        setGameError('无法识别有效的结尾字符');\n        setLoadingNextOptions(false);\n        return;\n      }\n      console.log(`正在查找以\"${lastChar}\"开头的句子...`);\n      const response = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(`^${lastChar}`)}&use_regex=true`);\n      if (!response.ok) {\n        throw new Error(`API请求失败: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data && data.results) {\n        console.log(`API返回了 ${data.results.length} 条结果`);\n\n        // 过滤结果，保留3-8个字的句子\n        const filteredResults = data.results.filter(item => {\n          const cleanText = item.text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n          return cleanText.length >= 3 && cleanText.length <= 8;\n        });\n        console.log(`过滤后还有 ${filteredResults.length} 条结果`);\n        if (filteredResults.length === 0) {\n          // 如果没有找到结果，尝试不使用正则表达式的精确查询\n          console.log(`尝试使用精确查询搜索以\"${lastChar}\"开头的句子`);\n          const fallbackResponse = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(lastChar)}`);\n          const fallbackData = await fallbackResponse.json();\n          if (fallbackData && fallbackData.results) {\n            console.log(`精确查询返回了 ${fallbackData.results.length} 条结果`);\n            // 手动过滤以lastChar开头的结果\n            const manualFilteredResults = fallbackData.results.filter(item => {\n              return item.text.startsWith(lastChar) && item.text.length >= 3 && item.text.length <= 8;\n            });\n            if (manualFilteredResults.length > 0) {\n              console.log(`手动过滤后找到 ${manualFilteredResults.length} 条结果`);\n              // 随机选择最多8个结果\n              const shuffled = [...manualFilteredResults].sort(() => 0.5 - Math.random());\n              setNextOptions(shuffled.slice(0, 8));\n              setLoadingNextOptions(false);\n              return;\n            }\n          }\n          setGameError(`没有找到以\"${lastChar}\"开头的句子`);\n        } else {\n          // 随机选择最多8个结果\n          const shuffled = [...filteredResults].sort(() => 0.5 - Math.random());\n          setNextOptions(shuffled.slice(0, 8));\n        }\n      } else {\n        setGameError('获取接续句子失败');\n      }\n    } catch (error) {\n      console.error('获取接续句子错误:', error);\n      setGameError(`查询错误: ${error.message}`);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = text => {\n    if (!text || text.length === 0) return null;\n\n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchNextOptions(currentSentence.text);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      return;\n    }\n\n    // 删除最后一步\n    const newLog = gameLog.slice(0, -1);\n    const newClipUrls = clipUrls.slice(0, -1);\n    setGameLog(newLog);\n    setClipUrls(newClipUrls);\n    setCurrentSentence(newLog[newLog.length - 1]);\n    fetchNextOptions(newLog[newLog.length - 1].text);\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    setIsExportingVideo(true);\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      if (response.data && response.data.merged_url) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.merged_url}`;\n\n        // 创建下载链接\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '接龙视频.mp4';\n        link.click();\n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + error.message);\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chain-game-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startNewGame,\n        className: \"new-game-btn\",\n        disabled: apiStatus !== 'connected',\n        children: \"\\u65B0\\u6E38\\u620F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 504,\n        columnNumber: 9\n      }, this), gameStarted && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goBackOneStep,\n        className: \"back-btn\",\n        disabled: gameLog.length === 0,\n        children: \"\\u4E0A\\u4E00\\u6B65\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 11\n      }, this), clipUrls.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: exportMergedVideo,\n        className: \"export-btn\",\n        disabled: isExportingVideo,\n        children: isExportingVideo ? '导出中...' : '导出接龙视频'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 7\n    }, this), gameError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: gameError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 531,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-candidates\",\n        children: [!gameStarted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"start-game-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u9009\\u62E9\\u5F00\\u59CB\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              className: \"refresh-btn\",\n              disabled: loadingPrompts || apiStatus !== 'connected',\n              children: \"\\u6362\\u4E00\\u6279\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 540,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 15\n          }, this), loadingPrompts ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"\\u52A0\\u8F7D\\u63D0\\u793A\\u53E5\\u5B50\\u4E2D...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 550,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"prompts-list\",\n            children: currentPrompts.map((prompt, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => selectStartSentence(prompt),\n              className: selectedOption === prompt ? 'prompt-item selected' : 'prompt-item',\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-text\",\n                children: prompt.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 559,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(prompt.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 561,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(prompt.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 562,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `sentence-type ${analyzeSentenceType(prompt.text)}`,\n                  children: analyzeSentenceType(prompt.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 563,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 554,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 17\n          }, this), currentPrompts.length === 0 && !loadingPrompts && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"no-prompts\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u6CA1\\u6709\\u53EF\\u7528\\u7684\\u63D0\\u793A\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 571,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: fetchRandomPrompts,\n              disabled: apiStatus !== 'connected',\n              children: \"\\u91CD\\u65B0\\u83B7\\u53D6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 572,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 570,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"current-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u5F53\\u524D\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"current-sentence\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-text\",\n                children: currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 588,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 589,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 587,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"next-hint\",\n                children: [\"\\u4E0B\\u4E00\\u53E5\\u9700\\u4EE5\\u300C\", getLastValidChar(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text), \"\\u300D\\u5B57\\u5F00\\u5934\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 591,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"next-options-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u53EF\\u9009\\u63A5\\u7EED\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 599,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: refreshNextOptions,\n                className: \"refresh-btn\",\n                disabled: loadingNextOptions,\n                children: \"\\u6362\\u4E00\\u6279\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 600,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 598,\n              columnNumber: 17\n            }, this), loadingNextOptions ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading\",\n              children: \"\\u52A0\\u8F7D\\u63A5\\u7EED\\u53E5\\u5B50\\u4E2D...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 610,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"options-list\",\n              children: nextOptions.map((option, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => selectNextSentence(option),\n                className: selectedOption === option ? 'option-item selected' : 'option-item',\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-text\",\n                  children: option.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 619,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"episode\",\n                    children: formatEpisode(option.episode)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 621,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"time\",\n                    children: formatTime(option.start_seconds)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 622,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `sentence-type ${analyzeSentenceType(option.text)}`,\n                    children: analyzeSentenceType(option.text)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 623,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 614,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 612,\n              columnNumber: 19\n            }, this), nextOptions.length === 0 && !loadingNextOptions && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-options\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u6CA1\\u6709\\u627E\\u5230\\u5408\\u9002\\u7684\\u63A5\\u7EED\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 631,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startNewGame,\n                children: \"\\u91CD\\u65B0\\u5F00\\u59CB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 632,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 630,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"game-log-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u63A5\\u9F99\\u8BB0\\u5F55\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 13\n          }, this), gameLog.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"game-log-list\",\n            children: gameLog.map((log, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"log-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-text\",\n                children: log.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 646,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(log.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 648,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(log.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 649,\n                  columnNumber: 23\n                }, this), log.clipUrl && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"clip-info\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"video-icon\",\n                    children: \"\\uD83C\\uDFAC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 652,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 651,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 647,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-log\",\n            children: \"\\u5C1A\\u672A\\u5F00\\u59CB\\u6E38\\u620F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 640,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-video-preview\",\n        children: [isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirm-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-sentence\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-text\",\n              children: selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 670,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"episode\",\n                children: formatEpisode(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.episode)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 672,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: formatTime(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.start_seconds)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 673,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 671,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 669,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-preview\",\n            children: isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-video\",\n              children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 679,\n              columnNumber: 19\n            }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n              controls: true,\n              autoPlay: true,\n              className: \"video-element\",\n              src: videoUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 681,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"video-placeholder\",\n              children: \"\\u51C6\\u5907\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 677,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"confirm-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"confirm-btn\",\n              onClick: gameStarted ? confirmNextSentence : confirmStartSentence,\n              disabled: isVideoLoading || !videoUrl,\n              children: \"\\u786E\\u8BA4\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cancel-btn\",\n              onClick: cancelSelection,\n              children: \"\\u53D6\\u6D88\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 700,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 692,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 668,\n          columnNumber: 13\n        }, this), !isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u89C6\\u9891\\u9884\\u89C8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 711,\n            columnNumber: 15\n          }, this), isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-video\",\n            children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 713,\n            columnNumber: 17\n          }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            autoPlay: true,\n            className: \"video-element\",\n            src: videoUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 715,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-placeholder large\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 724,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u9009\\u62E9\\u540E\\u5C06\\u5728\\u6B64\\u5904\\u9884\\u89C8\\u89C6\\u9891\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 725,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 723,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 722,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 710,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 666,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 533,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 502,\n    columnNumber: 5\n  }, this);\n};\n\n// 押韵游戏组件\n_s(ChainGamePage, \"jTGscrXdtt0JB0KTOqT41MaQ5xc=\");\n_c2 = ChainGamePage;\nconst RhymeGamePage = ({\n  API_BASE_URL,\n  apiStatus,\n  formatTime,\n  formatEpisode,\n  availableDramas,\n  formatDramaName\n}) => {\n  _s2();\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: {\n          count: 8\n        }\n      });\n      if (response.data && response.data.results) {\n        setCurrentPrompts(response.data.results);\n      } else {\n        setGameError('获取提示句子失败');\n      }\n    } catch (error) {\n      console.error('获取提示句子错误:', error);\n      setGameError('无法获取提示句子，请确保API服务正常运行');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async subtitle => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: subtitle.drama_id,\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n      if (response.data && response.data.clip_url) {\n        const clipUrl = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = prompt => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([{\n      ...sentence,\n      step: 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchRhymingOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n\n  // 选择下一个句子\n  const selectNextSentence = option => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {\n      ...sentence,\n      step: gameLog.length + 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchRhymingOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取押韵选项\n  const fetchRhymingOptions = async text => {\n    if (!text) return;\n    setLoadingNextOptions(true);\n    setGameError(null);\n    try {\n      // 获取最后一个字的拼音，用于押韵\n      const lastChar = getLastValidChar(text);\n      if (!lastChar) {\n        setGameError('无法识别有效的结尾字符');\n        setLoadingNextOptions(false);\n        return;\n      }\n      console.log(`正在查找与\"${lastChar}\"押韵的句子...`);\n\n      // 调用押韵API\n      const response = await axios.get(`${API_BASE_URL}/api/rhyming_sentences`, {\n        params: {\n          text: text,\n          min_length: 3,\n          max_length: 8,\n          limit: 8\n        }\n      });\n      if (response.data && response.data.sentences) {\n        console.log(`API返回了 ${response.data.sentences.length} 条押韵结果`);\n        setNextOptions(response.data.sentences);\n      } else {\n        setGameError('获取押韵句子失败：无结果返回');\n        setNextOptions([]);\n      }\n    } catch (error) {\n      console.error('获取押韵句子错误:', error);\n      setGameError(`查询错误: ${error.message}`);\n      setNextOptions([]);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = text => {\n    if (!text || text.length === 0) return null;\n\n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchRhymingOptions(currentSentence.text);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n\n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n\n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n\n      // 重新获取选项\n      fetchRhymingOptions(prevSentence.text);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    setIsExportingVideo(true);\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      if (response.data && response.data.merged_url) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.merged_url}`;\n\n        // 创建下载链接\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '押韵视频.mp4';\n        link.click();\n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + error.message);\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chain-game-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startNewGame,\n        className: \"new-game-btn\",\n        disabled: apiStatus !== 'connected',\n        children: \"\\u65B0\\u6E38\\u620F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1019,\n        columnNumber: 9\n      }, this), gameLog.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: goBackOneStep,\n          className: \"back-btn\",\n          disabled: isConfirmMode,\n          children: \"\\u4E0A\\u4E00\\u6B65\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1029,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportMergedVideo,\n          className: \"export-btn\",\n          disabled: gameLog.length < 2 || isExportingVideo,\n          children: isExportingVideo ? '导出中...' : '导出押韵视频'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1037,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1018,\n      columnNumber: 7\n    }, this), gameError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-error\",\n      children: gameError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1049,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-candidates\",\n        children: [!gameStarted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"start-game-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u9009\\u62E9\\u5F00\\u59CB\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1058,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              className: \"refresh-btn\",\n              disabled: loadingPrompts || apiStatus !== 'connected',\n              children: \"\\u6362\\u4E00\\u6279\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1059,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1057,\n            columnNumber: 15\n          }, this), loadingPrompts ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"\\u52A0\\u8F7D\\u63D0\\u793A\\u53E5\\u5B50\\u4E2D...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1069,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"prompts-list\",\n            children: currentPrompts.map((prompt, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => selectStartSentence(prompt),\n              className: selectedOption === prompt ? 'prompt-item selected' : 'prompt-item',\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-text\",\n                children: prompt.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1078,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(prompt.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1080,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(prompt.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1081,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `sentence-type ${analyzeSentenceType(prompt.text)}`,\n                  children: analyzeSentenceType(prompt.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1082,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1079,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1073,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1071,\n            columnNumber: 17\n          }, this), currentPrompts.length === 0 && !loadingPrompts && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-prompts\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u6CA1\\u6709\\u53EF\\u7528\\u7684\\u63D0\\u793A\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1091,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              children: \"\\u91CD\\u65B0\\u83B7\\u53D6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1092,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1090,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1056,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"current-sentence-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u5F53\\u524D\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1100,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1099,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"current-sentence\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-text\",\n                children: currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1104,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1106,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1107,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1105,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-type-tag\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: analyzeSentenceType(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text),\n                  children: analyzeSentenceType(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1110,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1109,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1103,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1098,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"next-options-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u62BC\\u97F5\\u9009\\u9879\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1117,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: refreshNextOptions,\n                className: \"refresh-btn\",\n                disabled: loadingNextOptions,\n                children: \"\\u6362\\u4E00\\u6279\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1118,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1116,\n              columnNumber: 17\n            }, this), loadingNextOptions ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading\",\n              children: \"\\u52A0\\u8F7D\\u62BC\\u97F5\\u53E5\\u5B50\\u4E2D...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1128,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"options-list\",\n              children: nextOptions.map((option, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => selectNextSentence(option),\n                className: selectedOption === option ? 'option-item selected' : 'option-item',\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-text\",\n                  children: option.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1137,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"episode\",\n                    children: formatEpisode(option.episode)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1139,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"time\",\n                    children: formatTime(option.start_seconds)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1140,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `sentence-type ${analyzeSentenceType(option.text)}`,\n                    children: analyzeSentenceType(option.text)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1141,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1138,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1132,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1130,\n              columnNumber: 19\n            }, this), nextOptions.length === 0 && !loadingNextOptions && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"empty-options\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u6CA1\\u6709\\u627E\\u5230\\u5408\\u9002\\u7684\\u62BC\\u97F5\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1150,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startNewGame,\n                children: \"\\u91CD\\u65B0\\u5F00\\u59CB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1151,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1149,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1115,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"game-log-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u62BC\\u97F5\\u8BB0\\u5F55\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1160,\n            columnNumber: 13\n          }, this), gameLog.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"game-log-list\",\n            children: gameLog.map((log, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"log-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-text\",\n                children: log.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1165,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(log.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1167,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(log.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1168,\n                  columnNumber: 23\n                }, this), log.clipUrl && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"clip-info\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"video-icon\",\n                    children: \"\\uD83C\\uDFAC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1171,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1170,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1166,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1164,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1162,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-log\",\n            children: \"\\u5C1A\\u672A\\u5F00\\u59CB\\u6E38\\u620F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1179,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1054,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-video-preview\",\n        children: [isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirm-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-sentence\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-text\",\n              children: selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1189,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"episode\",\n                children: formatEpisode(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.episode)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1191,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: formatTime(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.start_seconds)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1192,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1190,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1188,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-preview\",\n            children: isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-video\",\n              children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1198,\n              columnNumber: 19\n            }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n              controls: true,\n              autoPlay: true,\n              className: \"video-element\",\n              src: videoUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1200,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"video-placeholder\",\n              children: \"\\u51C6\\u5907\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1207,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1196,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"confirm-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"confirm-btn\",\n              onClick: gameStarted ? confirmNextSentence : confirmStartSentence,\n              disabled: isVideoLoading || !videoUrl,\n              children: \"\\u786E\\u8BA4\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1212,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cancel-btn\",\n              onClick: cancelSelection,\n              children: \"\\u53D6\\u6D88\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1219,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1211,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1187,\n          columnNumber: 13\n        }, this), !isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u89C6\\u9891\\u9884\\u89C8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1230,\n            columnNumber: 15\n          }, this), isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-video\",\n            children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1232,\n            columnNumber: 17\n          }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            autoPlay: true,\n            className: \"video-element\",\n            src: videoUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1234,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-placeholder large\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1243,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u9009\\u62E9\\u540E\\u5C06\\u5728\\u6B64\\u5904\\u9884\\u89C8\\u89C6\\u9891\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1244,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1242,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1241,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1229,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1185,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1052,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1017,\n    columnNumber: 5\n  }, this);\n};\n\n// 分析句子类型 - 全局辅助函数\n_s2(RhymeGamePage, \"DSGmDA/o7e5g8ybEfanXrQdRqqs=\");\n_c3 = RhymeGamePage;\nconst analyzeSentenceType = text => {\n  if (!text) return '普通句';\n\n  // 判断是否为问句\n  if (text.includes('?') || text.includes('？') || text.includes('吗') || text.includes('呢')) {\n    return '疑问句';\n  }\n\n  // 判断是否为命令句\n  const commandWords = ['去', '来', '给我', '快', '立刻', '马上', '传'];\n  if (commandWords.some(word => text.includes(word))) {\n    return '命令句';\n  }\n\n  // 判断情感色彩\n  const positiveWords = ['好', '愿意', '可以', '是', '对', '喜欢', '爱', '高兴'];\n  const negativeWords = ['不', '没', '别', '莫', '拒绝', '难过', '恨', '讨厌'];\n  if (positiveWords.some(word => text.includes(word))) {\n    return '积极句';\n  }\n  if (negativeWords.some(word => text.includes(word))) {\n    return '消极句';\n  }\n  return '普通句';\n};\n\n// 奇妙对话组件\nconst DialogueGamePage = ({\n  API_BASE_URL,\n  apiStatus,\n  formatTime,\n  formatEpisode,\n  availableDramas,\n  formatDramaName\n}) => {\n  _s3();\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: {\n          count: 8\n        }\n      });\n      if (response.data && response.data.results) {\n        setCurrentPrompts(response.data.results);\n      } else {\n        setGameError('获取提示句子失败');\n      }\n    } catch (error) {\n      console.error('获取提示句子错误:', error);\n      setGameError('无法获取提示句子，请确保API服务正常运行');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async subtitle => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: subtitle.drama_id,\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n      if (response.data && response.data.clip_url) {\n        const clipUrl = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = prompt => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([{\n      ...sentence,\n      step: 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchDialogueResponses(sentence);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n\n  // 选择下一个句子\n  const selectNextSentence = option => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {\n      ...sentence,\n      step: gameLog.length + 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchDialogueResponses(sentence);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取对话回应选项\n  const fetchDialogueResponses = async sentence => {\n    if (!sentence) return;\n    setLoadingNextOptions(true);\n    setGameError(null);\n    try {\n      console.log(`正在查找对\"${sentence.text}\"的有趣回应...`);\n\n      // 调用后端API查询对话回应\n      const response = await axios.post(`${API_BASE_URL}/api/dialogue_responses`, {\n        sentence_text: sentence.text,\n        episode: sentence.episode\n      });\n      if (response.data && response.data.results) {\n        console.log(`API返回了 ${response.data.results.length} 条对话回应`);\n        setNextOptions(response.data.results);\n      } else {\n        setGameError('获取对话回应失败：无结果返回');\n        setNextOptions([]);\n      }\n    } catch (error) {\n      console.error('获取对话回应错误:', error);\n      setGameError(`获取对话回应失败: ${error.message}`);\n      setNextOptions([]);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchDialogueResponses(currentSentence);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n\n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n\n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n\n      // 重新获取选项\n      fetchDialogueResponses(prevSentence);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    setIsExportingVideo(true);\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      if (response.data && response.data.merged_url) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.merged_url}`;\n\n        // 创建下载链接\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '奇妙对话视频.mp4';\n        link.click();\n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + error.message);\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chain-game-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startNewGame,\n        className: \"new-game-btn\",\n        disabled: apiStatus !== 'connected',\n        children: \"\\u65B0\\u6E38\\u620F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1546,\n        columnNumber: 9\n      }, this), gameLog.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: goBackOneStep,\n          className: \"back-btn\",\n          disabled: isConfirmMode,\n          children: \"\\u4E0A\\u4E00\\u6B65\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1556,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: exportMergedVideo,\n          className: \"export-btn\",\n          disabled: gameLog.length < 2 || isExportingVideo,\n          children: isExportingVideo ? '导出中...' : '导出对话视频'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1564,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1545,\n      columnNumber: 7\n    }, this), gameError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-error\",\n      children: gameError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1576,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-candidates\",\n        children: [!gameStarted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"start-game-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u9009\\u62E9\\u5F00\\u59CB\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1585,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              className: \"refresh-btn\",\n              disabled: loadingPrompts || apiStatus !== 'connected',\n              children: \"\\u6362\\u4E00\\u6279\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1586,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1584,\n            columnNumber: 15\n          }, this), loadingPrompts ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"\\u52A0\\u8F7D\\u63D0\\u793A\\u53E5\\u5B50\\u4E2D...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1596,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"prompts-list\",\n            children: currentPrompts.map((prompt, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => selectStartSentence(prompt),\n              className: selectedOption === prompt ? 'prompt-item selected' : 'prompt-item',\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-text\",\n                children: prompt.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1605,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(prompt.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1607,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(prompt.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1608,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `sentence-type ${analyzeSentenceType(prompt.text)}`,\n                  children: analyzeSentenceType(prompt.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1609,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1606,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1600,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1598,\n            columnNumber: 17\n          }, this), currentPrompts.length === 0 && !loadingPrompts && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-prompts\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u6CA1\\u6709\\u53EF\\u7528\\u7684\\u63D0\\u793A\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1618,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              children: \"\\u91CD\\u65B0\\u83B7\\u53D6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1619,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1617,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1583,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"current-sentence-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u5F53\\u524D\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1627,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1626,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"current-sentence\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-text\",\n                children: currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1631,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1633,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1634,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1632,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"sentence-type-tag\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: analyzeSentenceType(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text),\n                  children: analyzeSentenceType(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1637,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1636,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1630,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1625,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"next-options-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u6709\\u8DA3\\u56DE\\u5E94\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1644,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: refreshNextOptions,\n                className: \"refresh-btn\",\n                disabled: loadingNextOptions,\n                children: \"\\u6362\\u4E00\\u6279\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1645,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1643,\n              columnNumber: 17\n            }, this), loadingNextOptions ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading\",\n              children: \"\\u67E5\\u627E\\u6709\\u8DA3\\u56DE\\u5E94\\u4E2D...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1655,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"options-list\",\n              children: nextOptions.map((option, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => selectNextSentence(option),\n                className: selectedOption === option ? 'option-item selected' : 'option-item',\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-text\",\n                  children: option.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1664,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"episode\",\n                    children: formatEpisode(option.episode)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1666,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"time\",\n                    children: formatTime(option.start_seconds)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1667,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `sentence-type ${analyzeSentenceType(option.text)}`,\n                    children: analyzeSentenceType(option.text)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1668,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1665,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1659,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1657,\n              columnNumber: 19\n            }, this), nextOptions.length === 0 && !loadingNextOptions && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"empty-options\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u6CA1\\u6709\\u627E\\u5230\\u5408\\u9002\\u7684\\u56DE\\u5E94\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1677,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startNewGame,\n                children: \"\\u91CD\\u65B0\\u5F00\\u59CB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1678,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1676,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1642,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"game-log-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u5BF9\\u8BDD\\u8BB0\\u5F55\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1687,\n            columnNumber: 13\n          }, this), gameLog.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"game-log-list\",\n            children: gameLog.map((log, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"log-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-text\",\n                children: log.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1692,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(log.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1694,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(log.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1695,\n                  columnNumber: 23\n                }, this), log.clipUrl && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"clip-info\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"video-icon\",\n                    children: \"\\uD83C\\uDFAC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1698,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1697,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1693,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1691,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1689,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-log\",\n            children: \"\\u5C1A\\u672A\\u5F00\\u59CB\\u5BF9\\u8BDD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1706,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1686,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1581,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-video-preview\",\n        children: [isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirm-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-sentence\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-text\",\n              children: selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1716,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"episode\",\n                children: formatEpisode(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.episode)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1718,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: formatTime(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.start_seconds)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1719,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1717,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1715,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-preview\",\n            children: isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-video\",\n              children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1725,\n              columnNumber: 19\n            }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n              controls: true,\n              autoPlay: true,\n              className: \"video-element\",\n              src: videoUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1727,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"video-placeholder\",\n              children: \"\\u51C6\\u5907\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1734,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1723,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"confirm-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"confirm-btn\",\n              onClick: gameStarted ? confirmNextSentence : confirmStartSentence,\n              disabled: isVideoLoading || !videoUrl,\n              children: \"\\u786E\\u8BA4\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1739,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cancel-btn\",\n              onClick: cancelSelection,\n              children: \"\\u53D6\\u6D88\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1746,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1738,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1714,\n          columnNumber: 13\n        }, this), !isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u89C6\\u9891\\u9884\\u89C8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1757,\n            columnNumber: 15\n          }, this), isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-video\",\n            children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1759,\n            columnNumber: 17\n          }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            autoPlay: true,\n            className: \"video-element\",\n            src: videoUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1761,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-placeholder large\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1770,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u9009\\u62E9\\u540E\\u5C06\\u5728\\u6B64\\u5904\\u9884\\u89C8\\u89C6\\u9891\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1771,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1769,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1768,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1756,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1712,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1579,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1544,\n    columnNumber: 5\n  }, this);\n};\n_s3(DialogueGamePage, \"DSGmDA/o7e5g8ybEfanXrQdRqqs=\");\n_c4 = DialogueGamePage;\nfunction App() {\n  _s4();\n  const API_BASE_URL = 'http://localhost:8089';\n\n  // 搜索页面状态\n  const [query, setQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [apiStatus, setApiStatus] = useState('unknown');\n  const [error, setError] = useState(null);\n  const [selectedResult, setSelectedResult] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState('search');\n\n  // 剧集相关状态\n  const [availableDramas, setAvailableDramas] = useState([]);\n  const [selectedDramas, setSelectedDramas] = useState([]);\n  const [dramaStats, setDramaStats] = useState({});\n  useEffect(() => {\n    checkApiStatus();\n  }, []);\n\n  // 获取API状态并加载可用剧集\n  const checkApiStatus = async () => {\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/status`);\n      if (response.data && response.data.status === 'ok') {\n        setApiStatus('connected');\n\n        // 保存剧集信息\n        if (response.data.dramas) {\n          setAvailableDramas(response.data.dramas);\n          // 默认选择所有可用剧集\n          setSelectedDramas(response.data.dramas.map(drama => drama.id));\n        }\n\n        // 保存剧集统计信息\n        if (response.data.drama_stats) {\n          setDramaStats(response.data.drama_stats);\n        }\n      } else {\n        setApiStatus('error');\n        setError('API服务状态异常');\n      }\n    } catch (error) {\n      console.error('API状态检查错误:', error);\n      setApiStatus('disconnected');\n      setError('无法连接到API服务，请确保服务器已启动');\n    }\n  };\n  const handleSearch = async e => {\n    if (e) e.preventDefault();\n    if (apiStatus !== 'connected') return;\n    if (!query.trim()) {\n      setError('请输入搜索内容');\n      return;\n    }\n    if (selectedDramas.length === 0) {\n      setError('请至少选择一个剧集');\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    setSearchResults([]);\n    setSelectedResult(null);\n    setVideoUrl('');\n    try {\n      const dramaIdsParam = selectedDramas.join(',');\n      const response = await axios.get(`${API_BASE_URL}/api/search`, {\n        params: {\n          query: query.trim(),\n          drama_ids: dramaIdsParam,\n          case_sensitive: false\n        }\n      });\n      if (response.data && response.data.results) {\n        console.log(\"搜索结果:\", response.data.results);\n        setSearchResults(response.data.results);\n        if (response.data.results.length === 0) {\n          setError(`未找到匹配\"${query}\"的结果`);\n        }\n      } else {\n        setError('未获取到有效的搜索结果');\n      }\n    } catch (error) {\n      console.error('搜索错误:', error);\n      setError('搜索过程中出现错误，请重试');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleGenerateClip = async result => {\n    if (isVideoLoading) return;\n    setSelectedResult(result);\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: result.drama_id,\n        episode: result.episode,\n        start_time: result.start_seconds,\n        end_time: result.end_seconds,\n        context_seconds: 2\n      });\n      if (response.data && response.data.clip_url) {\n        const url = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(url);\n      } else {\n        setError('无法生成视频片段');\n      }\n    } catch (error) {\n      console.error('生成视频片段失败:', error);\n      setError('请求失败，请检查网络连接');\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  const formatEpisode = episode => {\n    // 从集数名称中提取数字\n    const match = episode.match(/\\d+/);\n    if (match) {\n      return `第${match[0]}集`;\n    }\n    return episode;\n  };\n  const formatDramaName = drama => {\n    // 根据drama_id获取剧名\n    if (!drama || !drama.id) return '未知剧集';\n\n    // 如果传入的是完整drama对象，则直接返回名称\n    if (drama.name) return drama.name;\n\n    // 否则在availableDramas中查找\n    const foundDrama = availableDramas.find(d => d.id === drama.id);\n    return foundDrama ? foundDrama.name : drama.id;\n  };\n  const highlightText = (text, query) => {\n    if (!query || !text) return text;\n\n    // 简单的字符串替换，为匹配的文本添加高亮标签\n    const escapedQuery = query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    const regex = new RegExp(escapedQuery, 'gi');\n    return text.replace(regex, match => `<span class=\"highlight\">${match}</span>`);\n  };\n  const switchPage = page => {\n    setCurrentPage(page);\n    setError(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u5B57\\u5E55\\u641C\\u7D22\\u7CFB\\u7EDF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1955,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"api-status\",\n        children: [\"API\\u670D\\u52A1\\u72B6\\u6001:\", apiStatus === 'connected' ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-connected\",\n          children: \"\\u5DF2\\u8FDE\\u63A5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1960,\n          columnNumber: 13\n        }, this) : apiStatus === 'disconnected' ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-disconnected\",\n          children: \"\\u672A\\u8FDE\\u63A5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1962,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-checking\",\n          children: \"\\u68C0\\u67E5\\u4E2D...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1964,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1957,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"main-nav\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: currentPage === 'search' ? 'active' : '',\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => switchPage('search'),\n              children: \"\\u5B57\\u5E55\\u641C\\u7D22\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1971,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1970,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: currentPage === 'chain-game' ? 'active' : '',\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => switchPage('chain-game'),\n              children: \"\\u5B57\\u5E55\\u63A5\\u9F99\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1974,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1973,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: currentPage === 'rhyme-game' ? 'active' : '',\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => switchPage('rhyme-game'),\n              children: \"\\u5B57\\u5E55\\u62BC\\u97F5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1977,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1976,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: currentPage === 'dialogue-game' ? 'active' : '',\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => switchPage('dialogue-game'),\n              children: \"\\u5947\\u5999\\u5BF9\\u8BDD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1980,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1979,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1969,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1968,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1954,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"App-main\",\n      children: [currentPage === 'search' && /*#__PURE__*/_jsxDEV(SearchPage, {\n        API_BASE_URL: API_BASE_URL,\n        query: query,\n        setQuery: setQuery,\n        searchResults: searchResults,\n        setSearchResults: setSearchResults,\n        loading: loading,\n        setLoading: setLoading,\n        apiStatus: apiStatus,\n        error: error,\n        setError: setError,\n        selectedResult: selectedResult,\n        setSelectedResult: setSelectedResult,\n        videoUrl: videoUrl,\n        setVideoUrl: setVideoUrl,\n        isVideoLoading: isVideoLoading,\n        setIsVideoLoading: setIsVideoLoading,\n        handleSearch: handleSearch,\n        handleGenerateClip: handleGenerateClip,\n        formatTime: formatTime,\n        formatEpisode: formatEpisode,\n        highlightText: highlightText,\n        availableDramas: availableDramas,\n        selectedDramas: selectedDramas,\n        setSelectedDramas: setSelectedDramas,\n        formatDramaName: formatDramaName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1988,\n        columnNumber: 11\n      }, this), currentPage === 'chain-game' && /*#__PURE__*/_jsxDEV(ChainGamePage, {\n        API_BASE_URL: API_BASE_URL,\n        apiStatus: apiStatus,\n        formatTime: formatTime,\n        formatEpisode: formatEpisode,\n        availableDramas: availableDramas,\n        formatDramaName: formatDramaName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2018,\n        columnNumber: 11\n      }, this), currentPage === 'rhyme-game' && /*#__PURE__*/_jsxDEV(RhymeGamePage, {\n        API_BASE_URL: API_BASE_URL,\n        apiStatus: apiStatus,\n        formatTime: formatTime,\n        formatEpisode: formatEpisode,\n        availableDramas: availableDramas,\n        formatDramaName: formatDramaName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2029,\n        columnNumber: 11\n      }, this), currentPage === 'dialogue-game' && /*#__PURE__*/_jsxDEV(DialogueGamePage, {\n        API_BASE_URL: API_BASE_URL,\n        apiStatus: apiStatus,\n        formatTime: formatTime,\n        formatEpisode: formatEpisode,\n        availableDramas: availableDramas,\n        formatDramaName: formatDramaName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2040,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1986,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"App-footer\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u5B57\\u5E55\\u641C\\u7D22\\u7CFB\\u7EDF \\xA9 2023\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2052,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2051,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1953,\n    columnNumber: 5\n  }, this);\n}\n_s4(App, \"YHhfkhktu3GjT1YKE5b3+6Q9BPg=\");\n_c5 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"SearchPage\");\n$RefreshReg$(_c2, \"ChainGamePage\");\n$RefreshReg$(_c3, \"RhymeGamePage\");\n$RefreshReg$(_c4, \"DialogueGamePage\");\n$RefreshReg$(_c5, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","SearchPage","API_BASE_URL","query","setQuery","searchResults","setSearchResults","loading","setLoading","apiStatus","error","setError","selectedResult","setSelectedResult","videoUrl","setVideoUrl","isVideoLoading","setIsVideoLoading","handleSearch","handleGenerateClip","formatTime","formatEpisode","highlightText","availableDramas","selectedDramas","setSelectedDramas","formatDramaName","handleDramaChange","dramaId","includes","filter","id","toggleAllDramas","length","map","drama","children","className","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","checked","onChange","htmlFor","value","e","target","placeholder","disabled","result","index","drama_id","episode","start_seconds","end_seconds","dangerouslySetInnerHTML","__html","text","controls","autoPlay","src","_c","ChainGamePage","_s","gameStarted","setGameStarted","currentPrompts","setCurrentPrompts","loadingPrompts","setLoadingPrompts","gameLog","setGameLog","currentSentence","setCurrentSentence","nextOptions","setNextOptions","loadingNextOptions","setLoadingNextOptions","gameError","setGameError","selectedOption","setSelectedOption","isExportingVideo","setIsExportingVideo","clipUrls","setClipUrls","isConfirmMode","setIsConfirmMode","fetchRandomPrompts","response","get","params","count","data","results","console","refreshRandomPrompts","generateVideoClip","subtitle","post","start_time","end_time","context_seconds","clip_url","clipUrl","selectStartSentence","prompt","confirmStartSentence","sentence","step","fetchNextOptions","cancelSelection","selectNextSentence","option","confirmNextSentence","lastChar","getLastValidChar","log","fetch","encodeURIComponent","ok","Error","status","json","filteredResults","item","cleanText","replace","fallbackResponse","fallbackData","manualFilteredResults","startsWith","shuffled","sort","Math","random","slice","message","refreshNextOptions","goBackOneStep","newLog","newClipUrls","exportMergedVideo","clip_urls","merged_url","mergedVideoUrl","link","document","createElement","href","download","click","startNewGame","analyzeSentenceType","_c2","RhymeGamePage","_s2","fetchRhymingOptions","min_length","max_length","limit","sentences","pop","prevSentence","_c3","commandWords","some","word","positiveWords","negativeWords","DialogueGamePage","_s3","fetchDialogueResponses","sentence_text","_c4","App","_s4","setApiStatus","currentPage","setCurrentPage","setAvailableDramas","dramaStats","setDramaStats","checkApiStatus","dramas","drama_stats","preventDefault","trim","dramaIdsParam","join","drama_ids","case_sensitive","url","seconds","mins","floor","secs","toString","padStart","match","name","foundDrama","find","d","escapedQuery","regex","RegExp","switchPage","page","_c5","$RefreshReg$"],"sources":["/Users/h0270/Documents/code/ai-vedio/create_video/subtitle-search-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\n// 子页面组件\nconst SearchPage = ({ \n  API_BASE_URL, \n  query, \n  setQuery, \n  searchResults,\n  setSearchResults,\n  loading,\n  setLoading,\n  apiStatus,\n  error,\n  setError,\n  selectedResult,\n  setSelectedResult,\n  videoUrl,\n  setVideoUrl,\n  isVideoLoading,\n  setIsVideoLoading,\n  handleSearch,\n  handleGenerateClip,\n  formatTime,\n  formatEpisode,\n  highlightText,\n  availableDramas,\n  selectedDramas,\n  setSelectedDramas,\n  formatDramaName\n}) => {\n  // 处理剧集选择变化\n  const handleDramaChange = (dramaId) => {\n    if (selectedDramas.includes(dramaId)) {\n      // 如果已经选中，则从数组中移除\n      setSelectedDramas(selectedDramas.filter(id => id !== dramaId));\n    } else {\n      // 如果未选中，则添加到数组\n      setSelectedDramas([...selectedDramas, dramaId]);\n    }\n  };\n\n  // 选择/取消选择所有剧集\n  const toggleAllDramas = () => {\n    if (selectedDramas.length === availableDramas.length) {\n      // 如果已选择所有剧集，则取消选择所有\n      setSelectedDramas([]);\n    } else {\n      // 选择所有剧集\n      setSelectedDramas(availableDramas.map(drama => drama.id));\n    }\n  };\n\n  return (\n    <>\n      <section className=\"search-area\">\n        <form onSubmit={handleSearch}>\n          <div className=\"drama-selector\">\n            <div className=\"drama-selector-header\">\n              <h3>选择剧集</h3>\n              <button \n                type=\"button\" \n                className=\"toggle-all-button\"\n                onClick={toggleAllDramas}\n              >\n                {selectedDramas.length === availableDramas.length ? '取消全选' : '全选'}\n              </button>\n            </div>\n            <div className=\"drama-checkbox-container\">\n              {availableDramas.map(drama => (\n                <div className=\"drama-checkbox\" key={drama.id}>\n                  <input\n                    type=\"checkbox\"\n                    id={`drama-${drama.id}`}\n                    checked={selectedDramas.includes(drama.id)}\n                    onChange={() => handleDramaChange(drama.id)}\n                  />\n                  <label htmlFor={`drama-${drama.id}`}>\n                    {formatDramaName(drama)}\n                  </label>\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"search-box\">\n            <input\n              type=\"text\"\n              value={query}\n              onChange={(e) => setQuery(e.target.value)}\n              placeholder=\"输入要搜索的字幕内容...\"\n              disabled={apiStatus !== 'connected'}\n            />\n            <button \n              type=\"submit\" \n              disabled={loading || apiStatus !== 'connected' || selectedDramas.length === 0}\n            >\n              {loading ? '搜索中...' : '搜索'}\n            </button>\n          </div>\n        </form>\n\n        {error && <div className=\"error-message\">{error}</div>}\n      </section>\n\n      <div className=\"content-area\">\n        <section className=\"results-area\">\n          <h2>搜索结果 {searchResults.length > 0 && `(${searchResults.length})`}</h2>\n          \n          {loading ? (\n            <div className=\"loading\">搜索中，请稍候...</div>\n          ) : (\n            <ul className=\"results-list\">\n              {searchResults.map((result, index) => (\n                <li \n                  key={index} \n                  className={selectedResult === result ? 'selected' : ''}\n                  onClick={() => handleGenerateClip(result)}\n                >\n                  <div className=\"result-header\">\n                    <span className=\"drama-name\">{formatDramaName({id: result.drama_id})}</span>\n                    <span className=\"episode\">{formatEpisode(result.episode)}</span>\n                    <span className=\"time\">{formatTime(result.start_seconds)} - {formatTime(result.end_seconds)}</span>\n                  </div>\n                  <div \n                    className=\"subtitle-text\"\n                    dangerouslySetInnerHTML={{__html: highlightText(result.text, query)}}\n                  />\n                </li>\n              ))}\n            </ul>\n          )}\n        </section>\n\n        <section className=\"video-area\">\n          <h2>视频播放</h2>\n          {selectedResult ? (\n            <div className=\"video-player\">\n              <div className=\"video-info\">\n                <p><strong>剧集:</strong> {formatDramaName({id: selectedResult.drama_id})}</p>\n                <p><strong>集数:</strong> {formatEpisode(selectedResult.episode)}</p>\n                <p><strong>时间段:</strong> {formatTime(selectedResult.start_seconds)} - {formatTime(selectedResult.end_seconds)}</p>\n                <p><strong>字幕内容:</strong> {selectedResult.text}</p>\n              </div>\n              \n              {isVideoLoading ? (\n                <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder\">\n                  {selectedResult ? '准备生成视频片段...' : '请从左侧选择一个搜索结果'}\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"video-placeholder\">\n              请从左侧选择一个搜索结果\n            </div>\n          )}\n        </section>\n      </div>\n    </>\n  );\n};\n\n// 成语接龙游戏组件\nconst ChainGamePage = ({ \n  API_BASE_URL, \n  apiStatus,\n  formatTime,\n  formatEpisode,\n  availableDramas,\n  formatDramaName\n}) => {\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n  const [selectedDramas, setSelectedDramas] = useState(\n    availableDramas ? availableDramas.map(drama => drama.id) : []\n  );\n\n  // 处理剧集选择变化\n  const handleDramaChange = (dramaId) => {\n    if (selectedDramas.includes(dramaId)) {\n      // 如果已经选中，则从数组中移除\n      setSelectedDramas(selectedDramas.filter(id => id !== dramaId));\n    } else {\n      // 如果未选中，则添加到数组\n      setSelectedDramas([...selectedDramas, dramaId]);\n    }\n  };\n\n  // 选择/取消选择所有剧集\n  const toggleAllDramas = () => {\n    if (selectedDramas.length === availableDramas.length) {\n      // 如果已选择所有剧集，则取消选择所有\n      setSelectedDramas([]);\n    } else {\n      // 选择所有剧集\n      setSelectedDramas(availableDramas.map(drama => drama.id));\n    }\n  };\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: { count: 8 }\n      });\n      \n      if (response.data && response.data.results) {\n        setCurrentPrompts(response.data.results);\n      } else {\n        setGameError('获取提示句子失败');\n      }\n    } catch (error) {\n      console.error('获取提示句子错误:', error);\n      setGameError('无法获取提示句子，请确保API服务正常运行');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async (subtitle) => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: subtitle.drama_id,\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n\n      if (response.data && response.data.clip_url) {\n        const clipUrl = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = (prompt) => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([{...sentence, step: 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n  \n  // 选择下一个句子\n  const selectNextSentence = (option) => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {...sentence, step: gameLog.length + 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取下一步选项\n  const fetchNextOptions = async (text) => {\n    if (!text) return;\n    \n    setLoadingNextOptions(true);\n    setGameError(null);\n    \n    try {\n      // 获取最后一个字，排除语气词\n      let lastChar = getLastValidChar(text);\n      \n      if (!lastChar) {\n        setGameError('无法识别有效的结尾字符');\n        setLoadingNextOptions(false);\n        return;\n      }\n      \n      console.log(`正在查找以\"${lastChar}\"开头的句子...`);\n      \n      const response = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(`^${lastChar}`)}&use_regex=true`);\n      \n      if (!response.ok) {\n        throw new Error(`API请求失败: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      \n      if (data && data.results) {\n        console.log(`API返回了 ${data.results.length} 条结果`);\n        \n        // 过滤结果，保留3-8个字的句子\n        const filteredResults = data.results.filter(item => {\n          const cleanText = item.text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n          return cleanText.length >= 3 && cleanText.length <= 8;\n        });\n        \n        console.log(`过滤后还有 ${filteredResults.length} 条结果`);\n        \n        if (filteredResults.length === 0) {\n          // 如果没有找到结果，尝试不使用正则表达式的精确查询\n          console.log(`尝试使用精确查询搜索以\"${lastChar}\"开头的句子`);\n          const fallbackResponse = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(lastChar)}`);\n          const fallbackData = await fallbackResponse.json();\n          \n          if (fallbackData && fallbackData.results) {\n            console.log(`精确查询返回了 ${fallbackData.results.length} 条结果`);\n            // 手动过滤以lastChar开头的结果\n            const manualFilteredResults = fallbackData.results.filter(item => {\n              return item.text.startsWith(lastChar) && \n                     item.text.length >= 3 && \n                     item.text.length <= 8;\n            });\n            \n            if (manualFilteredResults.length > 0) {\n              console.log(`手动过滤后找到 ${manualFilteredResults.length} 条结果`);\n              // 随机选择最多8个结果\n              const shuffled = [...manualFilteredResults].sort(() => 0.5 - Math.random());\n              setNextOptions(shuffled.slice(0, 8));\n              setLoadingNextOptions(false);\n              return;\n            }\n          }\n          \n          setGameError(`没有找到以\"${lastChar}\"开头的句子`);\n        } else {\n          // 随机选择最多8个结果\n          const shuffled = [...filteredResults].sort(() => 0.5 - Math.random());\n          setNextOptions(shuffled.slice(0, 8));\n        }\n      } else {\n        setGameError('获取接续句子失败');\n      }\n    } catch (error) {\n      console.error('获取接续句子错误:', error);\n      setGameError(`查询错误: ${error.message}`);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = (text) => {\n    if (!text || text.length === 0) return null;\n    \n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchNextOptions(currentSentence.text);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      return;\n    }\n    \n    // 删除最后一步\n    const newLog = gameLog.slice(0, -1);\n    const newClipUrls = clipUrls.slice(0, -1);\n    setGameLog(newLog);\n    setClipUrls(newClipUrls);\n    setCurrentSentence(newLog[newLog.length - 1]);\n    fetchNextOptions(newLog[newLog.length - 1].text);\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    \n    setIsExportingVideo(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      \n      if (response.data && response.data.merged_url) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.merged_url}`;\n        \n        // 创建下载链接\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '接龙视频.mp4';\n        link.click();\n        \n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + error.message);\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n\n  return (\n    <div className=\"chain-game-container\">\n      <div className=\"game-controls\">\n        <button \n          onClick={startNewGame}\n          className=\"new-game-btn\"\n          disabled={apiStatus !== 'connected'}\n        >\n          新游戏\n        </button>\n        {gameStarted && (\n          <button \n            onClick={goBackOneStep}\n            className=\"back-btn\"\n            disabled={gameLog.length === 0}\n          >\n            上一步\n          </button>\n        )}\n        {clipUrls.length > 1 && (\n          <button\n            onClick={exportMergedVideo}\n            className=\"export-btn\"\n            disabled={isExportingVideo}\n          >\n            {isExportingVideo ? '导出中...' : '导出接龙视频'}\n          </button>\n        )}\n      </div>\n      \n      {gameError && <div className=\"error-message\">{gameError}</div>}\n      \n      <div className=\"game-content\">\n        {/* 左侧：候选词区域 */}\n        <div className=\"game-candidates\">\n          {!gameStarted ? (\n            <div className=\"start-game-section\">\n              <div className=\"section-header\">\n                <h2>选择开始句子</h2>\n                <button \n                  onClick={refreshRandomPrompts}\n                  className=\"refresh-btn\"\n                  disabled={loadingPrompts || apiStatus !== 'connected'}\n                >\n                  换一批\n                </button>\n              </div>\n              \n              {loadingPrompts ? (\n                <div className=\"loading\">加载提示句子中...</div>\n              ) : (\n                <ul className=\"prompts-list\">\n                  {currentPrompts.map((prompt, index) => (\n                    <li \n                      key={index} \n                      onClick={() => selectStartSentence(prompt)}\n                      className={selectedOption === prompt ? 'prompt-item selected' : 'prompt-item'}\n                    >\n                      <div className=\"prompt-text\">{prompt.text}</div>\n                      <div className=\"prompt-info\">\n                        <span className=\"episode\">{formatEpisode(prompt.episode)}</span>\n                        <span className=\"time\">{formatTime(prompt.start_seconds)}</span>\n                        <span className={`sentence-type ${analyzeSentenceType(prompt.text)}`}>{analyzeSentenceType(prompt.text)}</span>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              )}\n              {currentPrompts.length === 0 && !loadingPrompts && (\n                <div className=\"no-prompts\">\n                  <p>没有可用的提示句子</p>\n                  <button \n                    onClick={fetchRandomPrompts}\n                    disabled={apiStatus !== 'connected'}\n                  >\n                    重新获取\n                  </button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              <div className=\"current-section\">\n                <h2>当前句子</h2>\n                <div className=\"current-sentence\">\n                  <div className=\"current-text\">{currentSentence?.text}</div>\n                  <div className=\"current-info\">\n                    <span className=\"episode\">{formatEpisode(currentSentence?.episode)}</span>\n                    <span className=\"time\">{formatTime(currentSentence?.start_seconds)}</span>\n                  </div>\n                  <div className=\"next-hint\">\n                    下一句需以「{getLastValidChar(currentSentence?.text)}」字开头\n                  </div>\n                </div>\n              </div>\n                \n              <div className=\"next-options-section\">\n                <div className=\"section-header\">\n                  <h2>可选接续</h2>\n                  <button \n                    onClick={refreshNextOptions}\n                    className=\"refresh-btn\"\n                    disabled={loadingNextOptions}\n                  >\n                    换一批\n                  </button>\n                </div>\n                \n                {loadingNextOptions ? (\n                  <div className=\"loading\">加载接续句子中...</div>\n                ) : (\n                  <ul className=\"options-list\">\n                    {nextOptions.map((option, index) => (\n                      <li \n                        key={index}\n                        onClick={() => selectNextSentence(option)}\n                        className={selectedOption === option ? 'option-item selected' : 'option-item'}\n                      >\n                        <div className=\"option-text\">{option.text}</div>\n                        <div className=\"option-info\">\n                          <span className=\"episode\">{formatEpisode(option.episode)}</span>\n                          <span className=\"time\">{formatTime(option.start_seconds)}</span>\n                          <span className={`sentence-type ${analyzeSentenceType(option.text)}`}>{analyzeSentenceType(option.text)}</span>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n                {nextOptions.length === 0 && !loadingNextOptions && (\n                  <div className=\"no-options\">\n                    <p>没有找到合适的接续句子</p>\n                    <button onClick={startNewGame}>重新开始</button>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* 接龙记录 */}\n          <div className=\"game-log-section\">\n            <h2>接龙记录</h2>\n            {gameLog.length > 0 ? (\n              <ol className=\"game-log-list\">\n                {gameLog.map((log, index) => (\n                  <li key={index} className=\"log-item\">\n                    <div className=\"log-text\">{log.text}</div>\n                    <div className=\"log-info\">\n                      <span className=\"episode\">{formatEpisode(log.episode)}</span>\n                      <span className=\"time\">{formatTime(log.start_seconds)}</span>\n                      {log.clipUrl && (\n                        <span className=\"clip-info\">\n                          <i className=\"video-icon\">🎬</i>\n                        </span>\n                      )}\n                    </div>\n                  </li>\n                ))}\n              </ol>\n            ) : (\n              <div className=\"empty-log\">尚未开始游戏</div>\n            )}\n          </div>\n        </div>\n\n        {/* 右侧：视频预览区域 */}\n        <div className=\"game-video-preview\">\n          {isConfirmMode && (\n            <div className=\"confirm-section\">\n              <div className=\"selected-sentence\">\n                <div className=\"selected-text\">{selectedOption?.text}</div>\n                <div className=\"selected-info\">\n                  <span className=\"episode\">{formatEpisode(selectedOption?.episode)}</span>\n                  <span className=\"time\">{formatTime(selectedOption?.start_seconds)}</span>\n                </div>\n              </div>\n              \n              <div className=\"video-preview\">\n                {isVideoLoading ? (\n                  <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n                ) : videoUrl ? (\n                  <video \n                    controls \n                    autoPlay \n                    className=\"video-element\"\n                    src={videoUrl}\n                  />\n                ) : (\n                  <div className=\"video-placeholder\">准备生成视频片段...</div>\n                )}\n              </div>\n              \n              <div className=\"confirm-buttons\">\n                <button \n                  className=\"confirm-btn\"\n                  onClick={gameStarted ? confirmNextSentence : confirmStartSentence}\n                  disabled={isVideoLoading || !videoUrl}\n                >\n                  确认选择\n                </button>\n                <button \n                  className=\"cancel-btn\"\n                  onClick={cancelSelection}\n                >\n                  取消选择\n                </button>\n              </div>\n            </div>\n          )}\n          {!isConfirmMode && (\n            <div className=\"video-section\">\n              <h2>视频预览</h2>\n              {isVideoLoading ? (\n                <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder large\">\n                  <div className=\"placeholder-text\">\n                    <p>请从左侧选择一个句子</p>\n                    <p>选择后将在此处预览视频</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// 押韵游戏组件\nconst RhymeGamePage = ({ \n  API_BASE_URL, \n  apiStatus,\n  formatTime,\n  formatEpisode,\n  availableDramas,\n  formatDramaName\n}) => {\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: { count: 8 }\n      });\n      \n      if (response.data && response.data.results) {\n        setCurrentPrompts(response.data.results);\n      } else {\n        setGameError('获取提示句子失败');\n      }\n    } catch (error) {\n      console.error('获取提示句子错误:', error);\n      setGameError('无法获取提示句子，请确保API服务正常运行');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async (subtitle) => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: subtitle.drama_id,\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n\n      if (response.data && response.data.clip_url) {\n        const clipUrl = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = (prompt) => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([{...sentence, step: 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchRhymingOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n  \n  // 选择下一个句子\n  const selectNextSentence = (option) => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {...sentence, step: gameLog.length + 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchRhymingOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取押韵选项\n  const fetchRhymingOptions = async (text) => {\n    if (!text) return;\n    \n    setLoadingNextOptions(true);\n    setGameError(null);\n    \n    try {\n      // 获取最后一个字的拼音，用于押韵\n      const lastChar = getLastValidChar(text);\n      \n      if (!lastChar) {\n        setGameError('无法识别有效的结尾字符');\n        setLoadingNextOptions(false);\n        return;\n      }\n      \n      console.log(`正在查找与\"${lastChar}\"押韵的句子...`);\n      \n      // 调用押韵API\n      const response = await axios.get(`${API_BASE_URL}/api/rhyming_sentences`, {\n        params: {\n          text: text,\n          min_length: 3,\n          max_length: 8,\n          limit: 8\n        }\n      });\n      \n      if (response.data && response.data.sentences) {\n        console.log(`API返回了 ${response.data.sentences.length} 条押韵结果`);\n        setNextOptions(response.data.sentences);\n      } else {\n        setGameError('获取押韵句子失败：无结果返回');\n        setNextOptions([]);\n      }\n    } catch (error) {\n      console.error('获取押韵句子错误:', error);\n      setGameError(`查询错误: ${error.message}`);\n      setNextOptions([]);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = (text) => {\n    if (!text || text.length === 0) return null;\n    \n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchRhymingOptions(currentSentence.text);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n      \n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n      \n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n      \n      // 重新获取选项\n      fetchRhymingOptions(prevSentence.text);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    \n    setIsExportingVideo(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      \n      if (response.data && response.data.merged_url) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.merged_url}`;\n        \n        // 创建下载链接\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '押韵视频.mp4';\n        link.click();\n        \n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + error.message);\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n\n  return (\n    <div className=\"chain-game-container\">\n      <div className=\"game-controls\">\n        <button \n          onClick={startNewGame}\n          className=\"new-game-btn\"\n          disabled={apiStatus !== 'connected'}\n        >\n          新游戏\n        </button>\n        \n        {gameLog.length > 0 && (\n          <>\n            <button \n              onClick={goBackOneStep}\n              className=\"back-btn\"\n              disabled={isConfirmMode}\n            >\n              上一步\n            </button>\n            \n            <button \n              onClick={exportMergedVideo}\n              className=\"export-btn\"\n              disabled={gameLog.length < 2 || isExportingVideo}\n            >\n              {isExportingVideo ? '导出中...' : '导出押韵视频'}\n            </button>\n          </>\n        )}\n      </div>\n      \n      {gameError && (\n        <div className=\"game-error\">{gameError}</div>\n      )}\n      \n      <div className=\"game-content\">\n        {/* 左侧：候选词区域 */}\n        <div className=\"game-candidates\">\n          {!gameStarted ? (\n            <div className=\"start-game-section\">\n              <div className=\"section-header\">\n                <h2>选择开始句子</h2>\n                <button \n                  onClick={refreshRandomPrompts}\n                  className=\"refresh-btn\"\n                  disabled={loadingPrompts || apiStatus !== 'connected'}\n                >\n                  换一批\n                </button>\n              </div>\n              \n              {loadingPrompts ? (\n                <div className=\"loading\">加载提示句子中...</div>\n              ) : (\n                <ul className=\"prompts-list\">\n                  {currentPrompts.map((prompt, index) => (\n                    <li \n                      key={index} \n                      onClick={() => selectStartSentence(prompt)}\n                      className={selectedOption === prompt ? 'prompt-item selected' : 'prompt-item'}\n                    >\n                      <div className=\"prompt-text\">{prompt.text}</div>\n                      <div className=\"prompt-info\">\n                        <span className=\"episode\">{formatEpisode(prompt.episode)}</span>\n                        <span className=\"time\">{formatTime(prompt.start_seconds)}</span>\n                        <span className={`sentence-type ${analyzeSentenceType(prompt.text)}`}>{analyzeSentenceType(prompt.text)}</span>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              )}\n              \n              {currentPrompts.length === 0 && !loadingPrompts && (\n                <div className=\"empty-prompts\">\n                  <p>没有可用的提示句子</p>\n                  <button onClick={refreshRandomPrompts}>重新获取</button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              <div className=\"current-sentence-section\">\n                <div className=\"section-header\">\n                  <h2>当前句子</h2>\n                </div>\n                \n                <div className=\"current-sentence\">\n                  <div className=\"sentence-text\">{currentSentence?.text}</div>\n                  <div className=\"sentence-info\">\n                    <span className=\"episode\">{formatEpisode(currentSentence?.episode)}</span>\n                    <span className=\"time\">{formatTime(currentSentence?.start_seconds)}</span>\n                  </div>\n                  <div className=\"sentence-type-tag\">\n                    <span className={analyzeSentenceType(currentSentence?.text)}>{analyzeSentenceType(currentSentence?.text)}</span>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"next-options-section\">\n                <div className=\"section-header\">\n                  <h2>押韵选项</h2>\n                  <button \n                    onClick={refreshNextOptions}\n                    className=\"refresh-btn\"\n                    disabled={loadingNextOptions}\n                  >\n                    换一批\n                  </button>\n                </div>\n                \n                {loadingNextOptions ? (\n                  <div className=\"loading\">加载押韵句子中...</div>\n                ) : (\n                  <ul className=\"options-list\">\n                    {nextOptions.map((option, index) => (\n                      <li \n                        key={index}\n                        onClick={() => selectNextSentence(option)}\n                        className={selectedOption === option ? 'option-item selected' : 'option-item'}\n                      >\n                        <div className=\"option-text\">{option.text}</div>\n                        <div className=\"option-info\">\n                          <span className=\"episode\">{formatEpisode(option.episode)}</span>\n                          <span className=\"time\">{formatTime(option.start_seconds)}</span>\n                          <span className={`sentence-type ${analyzeSentenceType(option.text)}`}>{analyzeSentenceType(option.text)}</span>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n                \n                {nextOptions.length === 0 && !loadingNextOptions && (\n                  <div className=\"empty-options\">\n                    <p>没有找到合适的押韵句子</p>\n                    <button onClick={startNewGame}>重新开始</button>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* 接龙记录 */}\n          <div className=\"game-log-section\">\n            <h2>押韵记录</h2>\n            {gameLog.length > 0 ? (\n              <ol className=\"game-log-list\">\n                {gameLog.map((log, index) => (\n                  <li key={index} className=\"log-item\">\n                    <div className=\"log-text\">{log.text}</div>\n                    <div className=\"log-info\">\n                      <span className=\"episode\">{formatEpisode(log.episode)}</span>\n                      <span className=\"time\">{formatTime(log.start_seconds)}</span>\n                      {log.clipUrl && (\n                        <span className=\"clip-info\">\n                          <i className=\"video-icon\">🎬</i>\n                        </span>\n                      )}\n                    </div>\n                  </li>\n                ))}\n              </ol>\n            ) : (\n              <div className=\"empty-log\">尚未开始游戏</div>\n            )}\n          </div>\n        </div>\n\n        {/* 右侧：视频预览区域 */}\n        <div className=\"game-video-preview\">\n          {isConfirmMode && (\n            <div className=\"confirm-section\">\n              <div className=\"selected-sentence\">\n                <div className=\"selected-text\">{selectedOption?.text}</div>\n                <div className=\"selected-info\">\n                  <span className=\"episode\">{formatEpisode(selectedOption?.episode)}</span>\n                  <span className=\"time\">{formatTime(selectedOption?.start_seconds)}</span>\n                </div>\n              </div>\n              \n              <div className=\"video-preview\">\n                {isVideoLoading ? (\n                  <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n                ) : videoUrl ? (\n                  <video \n                    controls \n                    autoPlay \n                    className=\"video-element\"\n                    src={videoUrl}\n                  />\n                ) : (\n                  <div className=\"video-placeholder\">准备生成视频片段...</div>\n                )}\n              </div>\n              \n              <div className=\"confirm-buttons\">\n                <button \n                  className=\"confirm-btn\"\n                  onClick={gameStarted ? confirmNextSentence : confirmStartSentence}\n                  disabled={isVideoLoading || !videoUrl}\n                >\n                  确认选择\n                </button>\n                <button \n                  className=\"cancel-btn\"\n                  onClick={cancelSelection}\n                >\n                  取消选择\n                </button>\n              </div>\n            </div>\n          )}\n          {!isConfirmMode && (\n            <div className=\"video-section\">\n              <h2>视频预览</h2>\n              {isVideoLoading ? (\n                <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder large\">\n                  <div className=\"placeholder-text\">\n                    <p>请从左侧选择一个句子</p>\n                    <p>选择后将在此处预览视频</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// 分析句子类型 - 全局辅助函数\nconst analyzeSentenceType = (text) => {\n  if (!text) return '普通句';\n  \n  // 判断是否为问句\n  if (text.includes('?') || text.includes('？') || text.includes('吗') || text.includes('呢')) {\n    return '疑问句';\n  }\n  \n  // 判断是否为命令句\n  const commandWords = ['去', '来', '给我', '快', '立刻', '马上', '传'];\n  if (commandWords.some(word => text.includes(word))) {\n    return '命令句';\n  }\n  \n  // 判断情感色彩\n  const positiveWords = ['好', '愿意', '可以', '是', '对', '喜欢', '爱', '高兴'];\n  const negativeWords = ['不', '没', '别', '莫', '拒绝', '难过', '恨', '讨厌'];\n  \n  if (positiveWords.some(word => text.includes(word))) {\n    return '积极句';\n  }\n  \n  if (negativeWords.some(word => text.includes(word))) {\n    return '消极句';\n  }\n  \n  return '普通句';\n};\n\n// 奇妙对话组件\nconst DialogueGamePage = ({ \n  API_BASE_URL, \n  apiStatus,\n  formatTime,\n  formatEpisode,\n  availableDramas,\n  formatDramaName\n}) => {\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    setLoadingPrompts(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: { count: 8 }\n      });\n      \n      if (response.data && response.data.results) {\n        setCurrentPrompts(response.data.results);\n      } else {\n        setGameError('获取提示句子失败');\n      }\n    } catch (error) {\n      console.error('获取提示句子错误:', error);\n      setGameError('无法获取提示句子，请确保API服务正常运行');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async (subtitle) => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: subtitle.drama_id,\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n\n      if (response.data && response.data.clip_url) {\n        const clipUrl = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = (prompt) => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([{...sentence, step: 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchDialogueResponses(sentence);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n  \n  // 选择下一个句子\n  const selectNextSentence = (option) => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {...sentence, step: gameLog.length + 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchDialogueResponses(sentence);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取对话回应选项\n  const fetchDialogueResponses = async (sentence) => {\n    if (!sentence) return;\n    \n    setLoadingNextOptions(true);\n    setGameError(null);\n    \n    try {\n      console.log(`正在查找对\"${sentence.text}\"的有趣回应...`);\n      \n      // 调用后端API查询对话回应\n      const response = await axios.post(`${API_BASE_URL}/api/dialogue_responses`, {\n        sentence_text: sentence.text,\n        episode: sentence.episode\n      });\n      \n      if (response.data && response.data.results) {\n        console.log(`API返回了 ${response.data.results.length} 条对话回应`);\n        setNextOptions(response.data.results);\n      } else {\n        setGameError('获取对话回应失败：无结果返回');\n        setNextOptions([]);\n      }\n    } catch (error) {\n      console.error('获取对话回应错误:', error);\n      setGameError(`获取对话回应失败: ${error.message}`);\n      setNextOptions([]);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchDialogueResponses(currentSentence);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n      \n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n      \n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n      \n      // 重新获取选项\n      fetchDialogueResponses(prevSentence);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    \n    setIsExportingVideo(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      \n      if (response.data && response.data.merged_url) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.merged_url}`;\n        \n        // 创建下载链接\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '奇妙对话视频.mp4';\n        link.click();\n        \n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + error.message);\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n\n  return (\n    <div className=\"chain-game-container\">\n      <div className=\"game-controls\">\n        <button \n          onClick={startNewGame}\n          className=\"new-game-btn\"\n          disabled={apiStatus !== 'connected'}\n        >\n          新游戏\n        </button>\n        \n        {gameLog.length > 0 && (\n          <>\n            <button \n              onClick={goBackOneStep}\n              className=\"back-btn\"\n              disabled={isConfirmMode}\n            >\n              上一步\n            </button>\n            \n            <button \n              onClick={exportMergedVideo}\n              className=\"export-btn\"\n              disabled={gameLog.length < 2 || isExportingVideo}\n            >\n              {isExportingVideo ? '导出中...' : '导出对话视频'}\n            </button>\n          </>\n        )}\n      </div>\n      \n      {gameError && (\n        <div className=\"game-error\">{gameError}</div>\n      )}\n      \n      <div className=\"game-content\">\n        {/* 左侧：候选词区域 */}\n        <div className=\"game-candidates\">\n          {!gameStarted ? (\n            <div className=\"start-game-section\">\n              <div className=\"section-header\">\n                <h2>选择开始句子</h2>\n                <button \n                  onClick={refreshRandomPrompts}\n                  className=\"refresh-btn\"\n                  disabled={loadingPrompts || apiStatus !== 'connected'}\n                >\n                  换一批\n                </button>\n              </div>\n              \n              {loadingPrompts ? (\n                <div className=\"loading\">加载提示句子中...</div>\n              ) : (\n                <ul className=\"prompts-list\">\n                  {currentPrompts.map((prompt, index) => (\n                    <li \n                      key={index} \n                      onClick={() => selectStartSentence(prompt)}\n                      className={selectedOption === prompt ? 'prompt-item selected' : 'prompt-item'}\n                    >\n                      <div className=\"prompt-text\">{prompt.text}</div>\n                      <div className=\"prompt-info\">\n                        <span className=\"episode\">{formatEpisode(prompt.episode)}</span>\n                        <span className=\"time\">{formatTime(prompt.start_seconds)}</span>\n                        <span className={`sentence-type ${analyzeSentenceType(prompt.text)}`}>{analyzeSentenceType(prompt.text)}</span>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              )}\n              \n              {currentPrompts.length === 0 && !loadingPrompts && (\n                <div className=\"empty-prompts\">\n                  <p>没有可用的提示句子</p>\n                  <button onClick={refreshRandomPrompts}>重新获取</button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              <div className=\"current-sentence-section\">\n                <div className=\"section-header\">\n                  <h2>当前句子</h2>\n                </div>\n                \n                <div className=\"current-sentence\">\n                  <div className=\"sentence-text\">{currentSentence?.text}</div>\n                  <div className=\"sentence-info\">\n                    <span className=\"episode\">{formatEpisode(currentSentence?.episode)}</span>\n                    <span className=\"time\">{formatTime(currentSentence?.start_seconds)}</span>\n                  </div>\n                  <div className=\"sentence-type-tag\">\n                    <span className={analyzeSentenceType(currentSentence?.text)}>{analyzeSentenceType(currentSentence?.text)}</span>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"next-options-section\">\n                <div className=\"section-header\">\n                  <h2>有趣回应</h2>\n                  <button \n                    onClick={refreshNextOptions}\n                    className=\"refresh-btn\"\n                    disabled={loadingNextOptions}\n                  >\n                    换一批\n                  </button>\n                </div>\n                \n                {loadingNextOptions ? (\n                  <div className=\"loading\">查找有趣回应中...</div>\n                ) : (\n                  <ul className=\"options-list\">\n                    {nextOptions.map((option, index) => (\n                      <li \n                        key={index}\n                        onClick={() => selectNextSentence(option)}\n                        className={selectedOption === option ? 'option-item selected' : 'option-item'}\n                      >\n                        <div className=\"option-text\">{option.text}</div>\n                        <div className=\"option-info\">\n                          <span className=\"episode\">{formatEpisode(option.episode)}</span>\n                          <span className=\"time\">{formatTime(option.start_seconds)}</span>\n                          <span className={`sentence-type ${analyzeSentenceType(option.text)}`}>{analyzeSentenceType(option.text)}</span>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n                \n                {nextOptions.length === 0 && !loadingNextOptions && (\n                  <div className=\"empty-options\">\n                    <p>没有找到合适的回应句子</p>\n                    <button onClick={startNewGame}>重新开始</button>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* 对话记录 */}\n          <div className=\"game-log-section\">\n            <h2>对话记录</h2>\n            {gameLog.length > 0 ? (\n              <ol className=\"game-log-list\">\n                {gameLog.map((log, index) => (\n                  <li key={index} className=\"log-item\">\n                    <div className=\"log-text\">{log.text}</div>\n                    <div className=\"log-info\">\n                      <span className=\"episode\">{formatEpisode(log.episode)}</span>\n                      <span className=\"time\">{formatTime(log.start_seconds)}</span>\n                      {log.clipUrl && (\n                        <span className=\"clip-info\">\n                          <i className=\"video-icon\">🎬</i>\n                        </span>\n                      )}\n                    </div>\n                  </li>\n                ))}\n              </ol>\n            ) : (\n              <div className=\"empty-log\">尚未开始对话</div>\n            )}\n          </div>\n        </div>\n\n        {/* 右侧：视频预览区域 */}\n        <div className=\"game-video-preview\">\n          {isConfirmMode && (\n            <div className=\"confirm-section\">\n              <div className=\"selected-sentence\">\n                <div className=\"selected-text\">{selectedOption?.text}</div>\n                <div className=\"selected-info\">\n                  <span className=\"episode\">{formatEpisode(selectedOption?.episode)}</span>\n                  <span className=\"time\">{formatTime(selectedOption?.start_seconds)}</span>\n                </div>\n              </div>\n              \n              <div className=\"video-preview\">\n                {isVideoLoading ? (\n                  <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n                ) : videoUrl ? (\n                  <video \n                    controls \n                    autoPlay \n                    className=\"video-element\"\n                    src={videoUrl}\n                  />\n                ) : (\n                  <div className=\"video-placeholder\">准备生成视频片段...</div>\n                )}\n              </div>\n              \n              <div className=\"confirm-buttons\">\n                <button \n                  className=\"confirm-btn\"\n                  onClick={gameStarted ? confirmNextSentence : confirmStartSentence}\n                  disabled={isVideoLoading || !videoUrl}\n                >\n                  确认选择\n                </button>\n                <button \n                  className=\"cancel-btn\"\n                  onClick={cancelSelection}\n                >\n                  取消选择\n                </button>\n              </div>\n            </div>\n          )}\n          {!isConfirmMode && (\n            <div className=\"video-section\">\n              <h2>视频预览</h2>\n              {isVideoLoading ? (\n                <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder large\">\n                  <div className=\"placeholder-text\">\n                    <p>请从左侧选择一个句子</p>\n                    <p>选择后将在此处预览视频</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nfunction App() {\n  const API_BASE_URL = 'http://localhost:8089';\n  \n  // 搜索页面状态\n  const [query, setQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [apiStatus, setApiStatus] = useState('unknown');\n  const [error, setError] = useState(null);\n  const [selectedResult, setSelectedResult] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState('search');\n  \n  // 剧集相关状态\n  const [availableDramas, setAvailableDramas] = useState([]);\n  const [selectedDramas, setSelectedDramas] = useState([]);\n  const [dramaStats, setDramaStats] = useState({});\n\n  useEffect(() => {\n    checkApiStatus();\n  }, []);\n  \n  // 获取API状态并加载可用剧集\n  const checkApiStatus = async () => {\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/status`);\n      if (response.data && response.data.status === 'ok') {\n        setApiStatus('connected');\n        \n        // 保存剧集信息\n        if (response.data.dramas) {\n          setAvailableDramas(response.data.dramas);\n          // 默认选择所有可用剧集\n          setSelectedDramas(response.data.dramas.map(drama => drama.id));\n        }\n        \n        // 保存剧集统计信息\n        if (response.data.drama_stats) {\n          setDramaStats(response.data.drama_stats);\n        }\n      } else {\n        setApiStatus('error');\n        setError('API服务状态异常');\n      }\n    } catch (error) {\n      console.error('API状态检查错误:', error);\n      setApiStatus('disconnected');\n      setError('无法连接到API服务，请确保服务器已启动');\n    }\n  };\n\n  const handleSearch = async (e) => {\n    if (e) e.preventDefault();\n    if (apiStatus !== 'connected') return;\n    if (!query.trim()) {\n      setError('请输入搜索内容');\n      return;\n    }\n    if (selectedDramas.length === 0) {\n      setError('请至少选择一个剧集');\n      return;\n    }\n    \n    setLoading(true);\n    setError(null);\n    setSearchResults([]);\n    setSelectedResult(null);\n    setVideoUrl('');\n    \n    try {\n      const dramaIdsParam = selectedDramas.join(',');\n      const response = await axios.get(`${API_BASE_URL}/api/search`, {\n        params: {\n          query: query.trim(),\n          drama_ids: dramaIdsParam,\n          case_sensitive: false\n        }\n      });\n      \n      if (response.data && response.data.results) {\n        console.log(\"搜索结果:\", response.data.results);\n        setSearchResults(response.data.results);\n        if (response.data.results.length === 0) {\n          setError(`未找到匹配\"${query}\"的结果`);\n        }\n      } else {\n        setError('未获取到有效的搜索结果');\n      }\n    } catch (error) {\n      console.error('搜索错误:', error);\n      setError('搜索过程中出现错误，请重试');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGenerateClip = async (result) => {\n    if (isVideoLoading) return;\n    \n    setSelectedResult(result);\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: result.drama_id,\n        episode: result.episode,\n        start_time: result.start_seconds,\n        end_time: result.end_seconds,\n        context_seconds: 2\n      });\n      \n      if (response.data && response.data.clip_url) {\n        const url = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(url);\n      } else {\n        setError('无法生成视频片段');\n      }\n    } catch (error) {\n      console.error('生成视频片段失败:', error);\n      setError('请求失败，请检查网络连接');\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const formatEpisode = (episode) => {\n    // 从集数名称中提取数字\n    const match = episode.match(/\\d+/);\n    if (match) {\n      return `第${match[0]}集`;\n    }\n    return episode;\n  };\n  \n  const formatDramaName = (drama) => {\n    // 根据drama_id获取剧名\n    if (!drama || !drama.id) return '未知剧集';\n    \n    // 如果传入的是完整drama对象，则直接返回名称\n    if (drama.name) return drama.name;\n    \n    // 否则在availableDramas中查找\n    const foundDrama = availableDramas.find(d => d.id === drama.id);\n    return foundDrama ? foundDrama.name : drama.id;\n  };\n\n  const highlightText = (text, query) => {\n    if (!query || !text) return text;\n    \n    // 简单的字符串替换，为匹配的文本添加高亮标签\n    const escapedQuery = query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    const regex = new RegExp(escapedQuery, 'gi');\n    return text.replace(regex, match => `<span class=\"highlight\">${match}</span>`);\n  };\n\n  const switchPage = (page) => {\n    setCurrentPage(page);\n    setError(null);\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>字幕搜索系统</h1>\n        \n        <div className=\"api-status\">\n          API服务状态: \n          {apiStatus === 'connected' ? (\n            <span className=\"status-connected\">已连接</span>\n          ) : apiStatus === 'disconnected' ? (\n            <span className=\"status-disconnected\">未连接</span>\n          ) : (\n            <span className=\"status-checking\">检查中...</span>\n          )}\n        </div>\n        \n        <nav className=\"main-nav\">\n          <ul>\n            <li className={currentPage === 'search' ? 'active' : ''}>\n              <button onClick={() => switchPage('search')}>字幕搜索</button>\n            </li>\n            <li className={currentPage === 'chain-game' ? 'active' : ''}>\n              <button onClick={() => switchPage('chain-game')}>字幕接龙</button>\n            </li>\n            <li className={currentPage === 'rhyme-game' ? 'active' : ''}>\n              <button onClick={() => switchPage('rhyme-game')}>字幕押韵</button>\n            </li>\n            <li className={currentPage === 'dialogue-game' ? 'active' : ''}>\n              <button onClick={() => switchPage('dialogue-game')}>奇妙对话</button>\n            </li>\n          </ul>\n        </nav>\n      </header>\n      \n      <main className=\"App-main\">\n        {currentPage === 'search' && (\n          <SearchPage \n            API_BASE_URL={API_BASE_URL}\n            query={query}\n            setQuery={setQuery}\n            searchResults={searchResults}\n            setSearchResults={setSearchResults}\n            loading={loading}\n            setLoading={setLoading}\n            apiStatus={apiStatus}\n            error={error}\n            setError={setError}\n            selectedResult={selectedResult}\n            setSelectedResult={setSelectedResult}\n            videoUrl={videoUrl}\n            setVideoUrl={setVideoUrl}\n            isVideoLoading={isVideoLoading}\n            setIsVideoLoading={setIsVideoLoading}\n            handleSearch={handleSearch}\n            handleGenerateClip={handleGenerateClip}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n            highlightText={highlightText}\n            availableDramas={availableDramas}\n            selectedDramas={selectedDramas}\n            setSelectedDramas={setSelectedDramas}\n            formatDramaName={formatDramaName}\n          />\n        )}\n        \n        {currentPage === 'chain-game' && (\n          <ChainGamePage \n            API_BASE_URL={API_BASE_URL}\n            apiStatus={apiStatus}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n            availableDramas={availableDramas}\n            formatDramaName={formatDramaName}\n          />\n        )}\n        \n        {currentPage === 'rhyme-game' && (\n          <RhymeGamePage \n            API_BASE_URL={API_BASE_URL}\n            apiStatus={apiStatus}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n            availableDramas={availableDramas}\n            formatDramaName={formatDramaName}\n          />\n        )}\n        \n        {currentPage === 'dialogue-game' && (\n          <DialogueGamePage \n            API_BASE_URL={API_BASE_URL}\n            apiStatus={apiStatus}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n            availableDramas={availableDramas}\n            formatDramaName={formatDramaName}\n          />\n        )}\n      </main>\n      \n      <footer className=\"App-footer\">\n        <p>字幕搜索系统 &copy; 2023</p>\n      </footer>\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}