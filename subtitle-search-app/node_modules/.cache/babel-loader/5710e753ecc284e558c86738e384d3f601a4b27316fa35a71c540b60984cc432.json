{"ast":null,"code":"var _jsxFileName = \"/Users/h0270/Documents/code/ai-vedio/create_video/subtitle-search-app/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\n// 子页面组件\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SearchPage = ({\n  API_BASE_URL,\n  query,\n  setQuery,\n  searchResults,\n  setSearchResults,\n  loading,\n  setLoading,\n  apiStatus,\n  error,\n  setError,\n  selectedResult,\n  setSelectedResult,\n  videoUrl,\n  setVideoUrl,\n  isVideoLoading,\n  setIsVideoLoading,\n  handleSearch,\n  handleGenerateClip,\n  formatTime,\n  formatEpisode,\n  highlightText,\n  availableDramas,\n  selectedDramas,\n  setSelectedDramas,\n  formatDramaName\n}) => {\n  // 处理剧集选择变化\n  const handleDramaChange = dramaId => {\n    if (selectedDramas.includes(dramaId)) {\n      // 如果已经选中，则从数组中移除\n      setSelectedDramas(selectedDramas.filter(id => id !== dramaId));\n    } else {\n      // 如果未选中，则添加到数组\n      setSelectedDramas([...selectedDramas, dramaId]);\n    }\n  };\n\n  // 选择/取消选择所有剧集\n  const toggleAllDramas = () => {\n    if (selectedDramas.length === availableDramas.length) {\n      // 如果已选择所有剧集，则取消选择所有\n      setSelectedDramas([]);\n    } else {\n      // 选择所有剧集\n      setSelectedDramas(availableDramas.map(drama => drama.id));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"search-area\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drama-selector\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"drama-selector-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"\\u9009\\u62E9\\u5267\\u96C6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"toggle-all-button\",\n              onClick: toggleAllDramas,\n              children: selectedDramas.length === availableDramas.length ? '取消全选' : '全选'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"drama-checkbox-container\",\n            children: availableDramas.map(drama => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"drama-checkbox\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                id: `drama-${drama.id}`,\n                checked: selectedDramas.includes(drama.id),\n                onChange: () => handleDramaChange(drama.id)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 73,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: `drama-${drama.id}`,\n                children: formatDramaName(drama)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 19\n              }, this)]\n            }, drama.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: query,\n            onChange: e => setQuery(e.target.value),\n            placeholder: \"\\u8F93\\u5165\\u8981\\u641C\\u7D22\\u7684\\u5B57\\u5E55\\u5185\\u5BB9...\",\n            disabled: apiStatus !== 'connected'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading || apiStatus !== 'connected' || selectedDramas.length === 0,\n            children: loading ? '搜索中...' : '搜索'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 19\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content-area\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"results-area\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"\\u641C\\u7D22\\u7ED3\\u679C \", searchResults.length > 0 && `(${searchResults.length})`]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\",\n          children: \"\\u641C\\u7D22\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"results-list\",\n          children: searchResults.map((result, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: selectedResult === result ? 'selected' : '',\n            onClick: () => handleGenerateClip(result),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"result-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"drama-name\",\n                children: formatDramaName({\n                  id: result.drama_id\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"episode\",\n                children: formatEpisode(result.episode)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: [formatTime(result.start_seconds), \" - \", formatTime(result.end_seconds)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"subtitle-text\",\n              dangerouslySetInnerHTML: {\n                __html: highlightText(result.text, query)\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"video-area\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u89C6\\u9891\\u64AD\\u653E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), selectedResult ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-player\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u5267\\u96C6:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 20\n              }, this), \" \", formatDramaName({\n                id: selectedResult.drama_id\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u96C6\\u6570:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 20\n              }, this), \" \", formatEpisode(selectedResult.episode)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u65F6\\u95F4\\u6BB5:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 20\n              }, this), \" \", formatTime(selectedResult.start_seconds), \" - \", formatTime(selectedResult.end_seconds)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"\\u5B57\\u5E55\\u5185\\u5BB9:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 20\n              }, this), \" \", selectedResult.text]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this), isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-video\",\n            children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 17\n          }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            autoPlay: true,\n            className: \"video-element\",\n            src: videoUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-placeholder\",\n            children: selectedResult ? '准备生成视频片段...' : '请从左侧选择一个搜索结果'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-placeholder\",\n          children: \"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u641C\\u7D22\\u7ED3\\u679C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n// 成语接龙游戏组件\n_c = SearchPage;\nconst ChainGamePage = ({\n  API_BASE_URL,\n  apiStatus,\n  formatTime,\n  formatEpisode,\n  availableDramas,\n  formatDramaName\n}) => {\n  _s();\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n  const [selectedDramas, setSelectedDramas] = useState(availableDramas ? availableDramas.map(drama => drama.id) : []);\n\n  // 处理剧集选择变化\n  const handleDramaChange = dramaId => {\n    if (selectedDramas.includes(dramaId)) {\n      // 如果已经选中，则从数组中移除\n      setSelectedDramas(selectedDramas.filter(id => id !== dramaId));\n    } else {\n      // 如果未选中，则添加到数组\n      setSelectedDramas([...selectedDramas, dramaId]);\n    }\n  };\n\n  // 选择/取消选择所有剧集\n  const toggleAllDramas = () => {\n    if (selectedDramas.length === availableDramas.length) {\n      // 如果已选择所有剧集，则取消选择所有\n      setSelectedDramas([]);\n    } else {\n      // 选择所有剧集\n      setSelectedDramas(availableDramas.map(drama => drama.id));\n    }\n  };\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    if (selectedDramas.length === 0) {\n      setGameError('请至少选择一个剧集');\n      return;\n    }\n    setLoadingPrompts(true);\n    setGameError(null);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: {\n          count: 8,\n          drama_ids: selectedDramas.join(',')\n        }\n      });\n      if (response.data && response.data.results) {\n        setCurrentPrompts(response.data.results);\n      } else {\n        setGameError('获取随机句子失败');\n      }\n    } catch (error) {\n      console.error('获取随机句子错误:', error);\n      setGameError('无法获取随机句子');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async subtitle => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: subtitle.drama_id,\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n      if (response.data && response.data.clip_url) {\n        const clipUrl = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = prompt => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([{\n      ...sentence,\n      step: 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n\n  // 选择下一个句子\n  const selectNextSentence = option => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {\n      ...sentence,\n      step: gameLog.length + 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取下一步选项\n  const fetchNextOptions = async text => {\n    if (!text) return;\n    setLoadingNextOptions(true);\n    setGameError(null);\n    try {\n      // 获取最后一个字，排除语气词\n      let lastChar = getLastValidChar(text);\n      if (!lastChar) {\n        setGameError('无法识别有效的结尾字符');\n        setLoadingNextOptions(false);\n        return;\n      }\n      console.log(`正在查找以\"${lastChar}\"开头的句子...`);\n\n      // 确保有选择的剧集\n      if (selectedDramas.length === 0) {\n        setGameError('请至少选择一个剧集');\n        setLoadingNextOptions(false);\n        return;\n      }\n      const dramaIdsParam = selectedDramas.join(',');\n      const response = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(`^${lastChar}`)}&use_regex=true&drama_ids=${dramaIdsParam}`);\n      if (!response.ok) {\n        throw new Error(`API请求失败: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data && data.results) {\n        console.log(`API返回了 ${data.results.length} 条结果`);\n\n        // 过滤结果，保留3-8个字的句子\n        const filteredResults = data.results.filter(item => {\n          const cleanText = item.text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n          return cleanText.length >= 3 && cleanText.length <= 8;\n        });\n        console.log(`过滤后还有 ${filteredResults.length} 条结果`);\n        if (filteredResults.length === 0) {\n          // 如果没有找到结果，尝试不使用正则表达式的精确查询\n          console.log(`尝试使用精确查询搜索以\"${lastChar}\"开头的句子`);\n          const fallbackResponse = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(lastChar)}&drama_ids=${dramaIdsParam}`);\n          const fallbackData = await fallbackResponse.json();\n          if (fallbackData && fallbackData.results) {\n            console.log(`精确查询返回了 ${fallbackData.results.length} 条结果`);\n            // 手动过滤以lastChar开头的结果\n            const manualFilteredResults = fallbackData.results.filter(item => {\n              return item.text.startsWith(lastChar) && item.text.length >= 3 && item.text.length <= 8;\n            });\n            if (manualFilteredResults.length > 0) {\n              console.log(`手动过滤后找到 ${manualFilteredResults.length} 条结果`);\n              // 随机选择最多8个结果\n              const shuffled = [...manualFilteredResults].sort(() => 0.5 - Math.random());\n              setNextOptions(shuffled.slice(0, 8));\n              setLoadingNextOptions(false);\n              return;\n            }\n          }\n          setGameError(`没有找到以\"${lastChar}\"开头的句子`);\n        } else {\n          // 随机选择最多8个结果\n          const shuffled = [...filteredResults].sort(() => 0.5 - Math.random());\n          setNextOptions(shuffled.slice(0, 8));\n        }\n      } else {\n        setGameError('获取接续句子失败');\n      }\n    } catch (error) {\n      console.error('获取接续句子错误:', error);\n      setGameError(`查询错误: ${error.message}`);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = text => {\n    if (!text || text.length === 0) return null;\n\n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchNextOptions(currentSentence.text);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n\n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n\n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n\n      // 重新获取选项\n      fetchNextOptions(prevSentence.text);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    setIsExportingVideo(true);\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      if (response.data && response.data.merged_url) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.merged_url}`;\n\n        // 创建下载链接并强制触发下载\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '接龙视频.mp4';\n        link.target = '_blank';\n        document.body.appendChild(link); // 必须添加到DOM中\n        link.click();\n        setTimeout(() => {\n          document.body.removeChild(link); // 清理DOM\n        }, 100);\n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message));\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chain-game-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drama-selector\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drama-selector-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u9009\\u62E9\\u5267\\u96C6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"toggle-all-button\",\n          onClick: toggleAllDramas,\n          children: selectedDramas.length === availableDramas.length ? '取消全选' : '全选'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drama-checkbox-container\",\n        children: availableDramas.map(drama => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drama-checkbox\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: `chain-drama-${drama.id}`,\n            checked: selectedDramas.includes(drama.id),\n            onChange: () => handleDramaChange(drama.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: `chain-drama-${drama.id}`,\n            children: formatDramaName(drama)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 554,\n            columnNumber: 15\n          }, this)]\n        }, drama.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 534,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startNewGame,\n        className: \"new-game-btn\",\n        disabled: apiStatus !== 'connected',\n        children: \"\\u65B0\\u6E38\\u620F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 9\n      }, this), gameStarted && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goBackOneStep,\n        className: \"back-btn\",\n        disabled: gameLog.length === 0,\n        children: \"\\u4E0A\\u4E00\\u6B65\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 11\n      }, this), clipUrls.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: exportMergedVideo,\n        className: \"export-btn\",\n        disabled: isExportingVideo,\n        children: isExportingVideo ? '导出中...' : '导出接龙视频'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 562,\n      columnNumber: 7\n    }, this), gameError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: gameError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 590,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-candidates\",\n        children: [!gameStarted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"start-game-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u9009\\u62E9\\u5F00\\u59CB\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 598,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              className: \"refresh-btn\",\n              disabled: loadingPrompts || apiStatus !== 'connected',\n              children: \"\\u6362\\u4E00\\u6279\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 599,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 15\n          }, this), loadingPrompts ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"\\u52A0\\u8F7D\\u63D0\\u793A\\u53E5\\u5B50\\u4E2D...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"prompts-list\",\n            children: currentPrompts.map((prompt, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => selectStartSentence(prompt),\n              className: selectedOption === prompt ? 'prompt-item selected' : 'prompt-item',\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-text\",\n                children: prompt.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 618,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"drama-name\",\n                  children: formatDramaName({\n                    id: prompt.drama_id\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(prompt.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 621,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(prompt.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 622,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `sentence-type ${analyzeSentenceType(prompt.text)}`,\n                  children: analyzeSentenceType(prompt.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 623,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 619,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 613,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 17\n          }, this), currentPrompts.length === 0 && !loadingPrompts && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-prompts\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u6CA1\\u6709\\u53EF\\u7528\\u7684\\u63D0\\u793A\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              children: \"\\u91CD\\u65B0\\u83B7\\u53D6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 633,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 596,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"current-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u5F53\\u524D\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"current-sentence\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-text\",\n                children: currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"drama-name\",\n                  children: formatDramaName({\n                    id: currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.drama_id\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 644,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 645,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 646,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 643,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"next-hint\",\n                children: [\"\\u4E0B\\u4E00\\u53E5\\u9700\\u4EE5\\u300C\", getLastValidChar(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text), \"\\u300D\\u5B57\\u5F00\\u5934\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 641,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 639,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"next-options-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u53EF\\u9009\\u63A5\\u7EED\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 656,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: refreshNextOptions,\n                className: \"refresh-btn\",\n                disabled: loadingNextOptions,\n                children: \"\\u6362\\u4E00\\u6279\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 657,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 655,\n              columnNumber: 17\n            }, this), loadingNextOptions ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading\",\n              children: \"\\u52A0\\u8F7D\\u63A5\\u7EED\\u53E5\\u5B50\\u4E2D...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 667,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"options-list\",\n              children: nextOptions.map((option, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => selectNextSentence(option),\n                className: selectedOption === option ? 'option-item selected' : 'option-item',\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-text\",\n                  children: option.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 676,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"drama-name\",\n                    children: formatDramaName({\n                      id: option.drama_id\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 678,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"episode\",\n                    children: formatEpisode(option.episode)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 679,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"time\",\n                    children: formatTime(option.start_seconds)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 680,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `sentence-type ${analyzeSentenceType(option.text)}`,\n                    children: analyzeSentenceType(option.text)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 681,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 677,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 671,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 669,\n              columnNumber: 19\n            }, this), nextOptions.length === 0 && !loadingNextOptions && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-options\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u6CA1\\u6709\\u627E\\u5230\\u5408\\u9002\\u7684\\u63A5\\u7EED\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 689,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startNewGame,\n                children: \"\\u91CD\\u65B0\\u5F00\\u59CB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 690,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 688,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 654,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"game-log-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u63A5\\u9F99\\u8BB0\\u5F55\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 699,\n            columnNumber: 13\n          }, this), gameLog.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"game-log-list\",\n            children: gameLog.map((log, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"log-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-text\",\n                children: log.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 704,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"drama-name\",\n                  children: formatDramaName({\n                    id: log.drama_id\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 706,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(log.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 707,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(log.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 708,\n                  columnNumber: 23\n                }, this), log.clipUrl && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"clip-info\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"video-icon\",\n                    children: \"\\uD83C\\uDFAC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 711,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 710,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 705,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 703,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-log\",\n            children: \"\\u5C1A\\u672A\\u5F00\\u59CB\\u6E38\\u620F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 698,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-video-preview\",\n        children: [isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirm-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-sentence\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-text\",\n              children: selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 729,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"drama-name\",\n                children: formatDramaName({\n                  id: selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.drama_id\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 731,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"episode\",\n                children: formatEpisode(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.episode)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 732,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: formatTime(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.start_seconds)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 733,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 730,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 728,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-preview\",\n            children: isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-video\",\n              children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 739,\n              columnNumber: 19\n            }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n              controls: true,\n              autoPlay: true,\n              className: \"video-element\",\n              src: videoUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"video-placeholder\",\n              children: \"\\u51C6\\u5907\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 748,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 737,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"confirm-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"confirm-btn\",\n              onClick: gameStarted ? confirmNextSentence : confirmStartSentence,\n              disabled: isVideoLoading || !videoUrl,\n              children: \"\\u786E\\u8BA4\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 753,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cancel-btn\",\n              onClick: cancelSelection,\n              children: \"\\u53D6\\u6D88\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 760,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 752,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 727,\n          columnNumber: 13\n        }, this), !isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u89C6\\u9891\\u9884\\u89C8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 771,\n            columnNumber: 15\n          }, this), isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-video\",\n            children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 773,\n            columnNumber: 17\n          }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            autoPlay: true,\n            className: \"video-element\",\n            src: videoUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 775,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-placeholder large\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 784,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u9009\\u62E9\\u540E\\u5C06\\u5728\\u6B64\\u5904\\u9884\\u89C8\\u89C6\\u9891\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 785,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 783,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 782,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 770,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 725,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 592,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 533,\n    columnNumber: 5\n  }, this);\n};\n\n// 押韵游戏组件\n_s(ChainGamePage, \"jTGscrXdtt0JB0KTOqT41MaQ5xc=\");\n_c2 = ChainGamePage;\nconst RhymeGamePage = ({\n  API_BASE_URL,\n  apiStatus,\n  formatTime,\n  formatEpisode,\n  availableDramas,\n  formatDramaName\n}) => {\n  _s2();\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n  const [selectedDramas, setSelectedDramas] = useState(availableDramas ? availableDramas.map(drama => drama.id) : []);\n\n  // 处理剧集选择变化\n  const handleDramaChange = dramaId => {\n    if (selectedDramas.includes(dramaId)) {\n      // 如果已经选中，则从数组中移除\n      setSelectedDramas(selectedDramas.filter(id => id !== dramaId));\n    } else {\n      // 如果未选中，则添加到数组\n      setSelectedDramas([...selectedDramas, dramaId]);\n    }\n  };\n\n  // 选择/取消选择所有剧集\n  const toggleAllDramas = () => {\n    if (selectedDramas.length === availableDramas.length) {\n      // 如果已选择所有剧集，则取消选择所有\n      setSelectedDramas([]);\n    } else {\n      // 选择所有剧集\n      setSelectedDramas(availableDramas.map(drama => drama.id));\n    }\n  };\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    if (selectedDramas.length === 0) {\n      setGameError('请至少选择一个剧集');\n      return;\n    }\n    setLoadingPrompts(true);\n    setGameError(null);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: {\n          count: 8,\n          drama_ids: selectedDramas.join(',')\n        }\n      });\n      if (response.data && response.data.results) {\n        setCurrentPrompts(response.data.results);\n      } else {\n        setGameError('获取随机句子失败');\n      }\n    } catch (error) {\n      console.error('获取随机句子错误:', error);\n      setGameError('无法获取随机句子');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async subtitle => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: subtitle.drama_id,\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n      if (response.data && response.data.clip_url) {\n        const clipUrl = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = prompt => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([{\n      ...sentence,\n      step: 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchRhymingOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n\n  // 选择下一个句子\n  const selectNextSentence = option => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {\n      ...sentence,\n      step: gameLog.length + 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchRhymingOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 查找韵脚匹配的选项\n  const fetchRhymingOptions = async text => {\n    if (!text) return;\n    setLoadingNextOptions(true);\n    setGameError(null);\n    try {\n      // 确保有选择的剧集\n      if (selectedDramas.length === 0) {\n        setGameError('请至少选择一个剧集');\n        setLoadingNextOptions(false);\n        return;\n      }\n      const response = await axios.get(`${API_BASE_URL}/api/rhyming_sentences`, {\n        params: {\n          text: text,\n          min_length: 3,\n          max_length: 20,\n          limit: 8,\n          drama_ids: selectedDramas.join(',')\n        }\n      });\n      if (response.data && response.data.results) {\n        setNextOptions(response.data.results);\n      } else {\n        setGameError('获取押韵选项失败');\n      }\n    } catch (error) {\n      console.error('获取押韵选项错误:', error);\n      setGameError('无法获取押韵选项');\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = text => {\n    if (!text || text.length === 0) return null;\n\n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchRhymingOptions(currentSentence.text);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n\n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n\n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n\n      // 重新获取选项\n      fetchRhymingOptions(prevSentence.text);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    setIsExportingVideo(true);\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      if (response.data && response.data.merged_url) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.merged_url}`;\n\n        // 创建下载链接并强制触发下载\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '押韵视频.mp4';\n        link.target = '_blank';\n        document.body.appendChild(link); // 必须添加到DOM中\n        link.click();\n        setTimeout(() => {\n          document.body.removeChild(link); // 清理DOM\n        }, 100);\n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      var _error$response2, _error$response2$data;\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.error) || error.message));\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chain-game-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drama-selector\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drama-selector-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u9009\\u62E9\\u5267\\u96C6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"toggle-all-button\",\n          onClick: toggleAllDramas,\n          children: selectedDramas.length === availableDramas.length ? '取消全选' : '全选'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drama-checkbox-container\",\n        children: availableDramas.map(drama => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drama-checkbox\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: `rhyme-drama-${drama.id}`,\n            checked: selectedDramas.includes(drama.id),\n            onChange: () => handleDramaChange(drama.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1123,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: `rhyme-drama-${drama.id}`,\n            children: formatDramaName(drama)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1129,\n            columnNumber: 15\n          }, this)]\n        }, drama.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1122,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startNewGame,\n        className: \"new-game-btn\",\n        disabled: apiStatus !== 'connected',\n        children: \"\\u65B0\\u6E38\\u620F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1138,\n        columnNumber: 9\n      }, this), gameStarted && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goBackOneStep,\n        className: \"back-btn\",\n        disabled: gameLog.length === 0,\n        children: \"\\u4E0A\\u4E00\\u6B65\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1146,\n        columnNumber: 11\n      }, this), clipUrls.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: exportMergedVideo,\n        className: \"export-btn\",\n        disabled: isExportingVideo,\n        children: isExportingVideo ? '导出中...' : '导出押韵视频'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1155,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1137,\n      columnNumber: 7\n    }, this), gameError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: gameError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1165,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-candidates\",\n        children: [!gameStarted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"start-game-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u9009\\u62E9\\u5F00\\u59CB\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1173,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              className: \"refresh-btn\",\n              disabled: loadingPrompts || apiStatus !== 'connected',\n              children: \"\\u6362\\u4E00\\u6279\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1174,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1172,\n            columnNumber: 15\n          }, this), loadingPrompts ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"\\u52A0\\u8F7D\\u63D0\\u793A\\u53E5\\u5B50\\u4E2D...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1184,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"prompts-list\",\n            children: currentPrompts.map((prompt, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => selectStartSentence(prompt),\n              className: selectedOption === prompt ? 'prompt-item selected' : 'prompt-item',\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-text\",\n                children: prompt.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1193,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"drama-name\",\n                  children: formatDramaName({\n                    id: prompt.drama_id\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1195,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(prompt.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1196,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(prompt.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1197,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `sentence-type ${analyzeSentenceType(prompt.text)}`,\n                  children: analyzeSentenceType(prompt.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1198,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1194,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1188,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1186,\n            columnNumber: 17\n          }, this), currentPrompts.length === 0 && !loadingPrompts && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-prompts\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u6CA1\\u6709\\u53EF\\u7528\\u7684\\u63D0\\u793A\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1207,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              children: \"\\u91CD\\u65B0\\u83B7\\u53D6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1208,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1206,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1171,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"current-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u5F53\\u524D\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1215,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"current-sentence\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-text\",\n                children: currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1217,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"drama-name\",\n                  children: formatDramaName({\n                    id: currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.drama_id\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1219,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1220,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1221,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1218,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"next-hint\",\n                children: \"\\u4E0B\\u4E00\\u53E5\\u9700\\u4E0E\\u6B64\\u53E5\\u97F5\\u811A\\u76F8\\u540C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1223,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1216,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1214,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"next-options-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u62BC\\u97F5\\u9009\\u9879\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1231,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: refreshNextOptions,\n                className: \"refresh-btn\",\n                disabled: loadingNextOptions,\n                children: \"\\u6362\\u4E00\\u6279\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1232,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1230,\n              columnNumber: 17\n            }, this), loadingNextOptions ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading\",\n              children: \"\\u67E5\\u627E\\u62BC\\u97F5\\u53E5\\u5B50\\u4E2D...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1242,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"options-list\",\n              children: nextOptions.map((option, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => selectNextSentence(option),\n                className: selectedOption === option ? 'option-item selected' : 'option-item',\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-text\",\n                  children: option.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1251,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"drama-name\",\n                    children: formatDramaName({\n                      id: option.drama_id\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1253,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"episode\",\n                    children: formatEpisode(option.episode)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1254,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"time\",\n                    children: formatTime(option.start_seconds)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1255,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `sentence-type ${analyzeSentenceType(option.text)}`,\n                    children: analyzeSentenceType(option.text)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1256,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1252,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1246,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1244,\n              columnNumber: 19\n            }, this), nextOptions.length === 0 && !loadingNextOptions && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-options\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u6CA1\\u6709\\u627E\\u5230\\u5408\\u9002\\u7684\\u62BC\\u97F5\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1264,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startNewGame,\n                children: \"\\u91CD\\u65B0\\u5F00\\u59CB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1265,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1263,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1229,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"game-log-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u62BC\\u97F5\\u8BB0\\u5F55\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1274,\n            columnNumber: 13\n          }, this), gameLog.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"game-log-list\",\n            children: gameLog.map((log, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"log-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-text\",\n                children: log.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1279,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"drama-name\",\n                  children: formatDramaName({\n                    id: log.drama_id\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1281,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(log.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1282,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(log.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1283,\n                  columnNumber: 23\n                }, this), log.clipUrl && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"clip-info\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"video-icon\",\n                    children: \"\\uD83C\\uDFAC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1286,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1285,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1280,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1278,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1276,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-log\",\n            children: \"\\u5C1A\\u672A\\u5F00\\u59CB\\u6E38\\u620F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1294,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1273,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-video-preview\",\n        children: [isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirm-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-sentence\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-text\",\n              children: selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1304,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"drama-name\",\n                children: formatDramaName({\n                  id: selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.drama_id\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1306,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"episode\",\n                children: formatEpisode(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.episode)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1307,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: formatTime(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.start_seconds)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1308,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1305,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1303,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-preview\",\n            children: isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-video\",\n              children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1314,\n              columnNumber: 19\n            }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n              controls: true,\n              autoPlay: true,\n              className: \"video-element\",\n              src: videoUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1316,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"video-placeholder\",\n              children: \"\\u51C6\\u5907\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1323,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1312,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"confirm-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"confirm-btn\",\n              onClick: gameStarted ? confirmNextSentence : confirmStartSentence,\n              disabled: isVideoLoading || !videoUrl,\n              children: \"\\u786E\\u8BA4\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1328,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cancel-btn\",\n              onClick: cancelSelection,\n              children: \"\\u53D6\\u6D88\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1335,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1327,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1302,\n          columnNumber: 13\n        }, this), !isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u89C6\\u9891\\u9884\\u89C8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1346,\n            columnNumber: 15\n          }, this), isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-video\",\n            children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1348,\n            columnNumber: 17\n          }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            autoPlay: true,\n            className: \"video-element\",\n            src: videoUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1350,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-placeholder large\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1359,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u9009\\u62E9\\u540E\\u5C06\\u5728\\u6B64\\u5904\\u9884\\u89C8\\u89C6\\u9891\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1360,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1358,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1357,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1345,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1300,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1167,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1108,\n    columnNumber: 5\n  }, this);\n};\n\n// 分析句子类型 - 全局辅助函数\n_s2(RhymeGamePage, \"jTGscrXdtt0JB0KTOqT41MaQ5xc=\");\n_c3 = RhymeGamePage;\nconst analyzeSentenceType = text => {\n  if (!text) return '普通句';\n\n  // 判断是否为问句\n  if (text.includes('?') || text.includes('？') || text.includes('吗') || text.includes('呢')) {\n    return '疑问句';\n  }\n\n  // 判断是否为命令句\n  const commandWords = ['去', '来', '给我', '快', '立刻', '马上', '传'];\n  if (commandWords.some(word => text.includes(word))) {\n    return '命令句';\n  }\n\n  // 判断情感色彩\n  const positiveWords = ['好', '愿意', '可以', '是', '对', '喜欢', '爱', '高兴'];\n  const negativeWords = ['不', '没', '别', '莫', '拒绝', '难过', '恨', '讨厌'];\n  if (positiveWords.some(word => text.includes(word))) {\n    return '积极句';\n  }\n  if (negativeWords.some(word => text.includes(word))) {\n    return '消极句';\n  }\n  return '普通句';\n};\n\n// 奇妙对话组件\nconst DialogueGamePage = ({\n  API_BASE_URL,\n  apiStatus,\n  formatTime,\n  formatEpisode,\n  availableDramas,\n  formatDramaName\n}) => {\n  _s3();\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n  const [selectedDramas, setSelectedDramas] = useState(availableDramas ? availableDramas.map(drama => drama.id) : []);\n\n  // 处理剧集选择变化\n  const handleDramaChange = dramaId => {\n    if (selectedDramas.includes(dramaId)) {\n      // 如果已经选中，则从数组中移除\n      setSelectedDramas(selectedDramas.filter(id => id !== dramaId));\n    } else {\n      // 如果未选中，则添加到数组\n      setSelectedDramas([...selectedDramas, dramaId]);\n    }\n  };\n\n  // 选择/取消选择所有剧集\n  const toggleAllDramas = () => {\n    if (selectedDramas.length === availableDramas.length) {\n      // 如果已选择所有剧集，则取消选择所有\n      setSelectedDramas([]);\n    } else {\n      // 选择所有剧集\n      setSelectedDramas(availableDramas.map(drama => drama.id));\n    }\n  };\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    if (selectedDramas.length === 0) {\n      setGameError('请至少选择一个剧集');\n      return;\n    }\n    setLoadingPrompts(true);\n    setGameError(null);\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: {\n          count: 8,\n          drama_ids: selectedDramas.join(',')\n        }\n      });\n      if (response.data && response.data.results) {\n        setCurrentPrompts(response.data.results);\n      } else {\n        setGameError('获取随机句子失败');\n      }\n    } catch (error) {\n      console.error('获取随机句子错误:', error);\n      setGameError('无法获取随机句子');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async subtitle => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: subtitle.drama_id,\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n      if (response.data && response.data.clip_url) {\n        const clipUrl = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = prompt => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([{\n      ...sentence,\n      step: 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchDialogueResponses(sentence);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n\n  // 选择下一个句子\n  const selectNextSentence = option => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {\n      ...sentence,\n      step: gameLog.length + 1,\n      clipUrl: videoUrl\n    }]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchDialogueResponses(sentence);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 查找对话回应\n  const fetchDialogueResponses = async sentence => {\n    if (!sentence) return;\n    setLoadingNextOptions(true);\n    setGameError(null);\n    try {\n      // 确保有选择的剧集\n      if (selectedDramas.length === 0) {\n        setGameError('请至少选择一个剧集');\n        setLoadingNextOptions(false);\n        return;\n      }\n      const response = await axios.post(`${API_BASE_URL}/api/dialogue_responses`, {\n        sentence_text: sentence.text,\n        drama_id: sentence.drama_id,\n        episode: sentence.episode,\n        drama_ids: selectedDramas.join(',')\n      });\n      if (response.data && response.data.results) {\n        setNextOptions(response.data.results);\n      } else {\n        setGameError('获取对话回应失败');\n      }\n    } catch (error) {\n      console.error('获取对话回应错误:', error);\n      setGameError('无法获取对话回应');\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = text => {\n    if (!text || text.length === 0) return null;\n\n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchDialogueResponses(currentSentence);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n\n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n\n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n\n      // 重新获取选项\n      fetchDialogueResponses(prevSentence);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    setIsExportingVideo(true);\n    setGameError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      if (response.data && response.data.merged_url) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.merged_url}`;\n\n        // 创建下载链接并强制触发下载\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '对话视频.mp4';\n        link.target = '_blank';\n        document.body.appendChild(link); // 必须添加到DOM中\n        link.click();\n        setTimeout(() => {\n          document.body.removeChild(link); // 清理DOM\n        }, 100);\n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      var _error$response3, _error$response3$data;\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.error) || error.message));\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chain-game-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"drama-selector\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drama-selector-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u9009\\u62E9\\u5267\\u96C6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1713,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"toggle-all-button\",\n          onClick: toggleAllDramas,\n          children: selectedDramas.length === availableDramas.length ? '取消全选' : '全选'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1714,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1712,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"drama-checkbox-container\",\n        children: availableDramas.map(drama => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"drama-checkbox\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"checkbox\",\n            id: `dialogue-drama-${drama.id}`,\n            checked: selectedDramas.includes(drama.id),\n            onChange: () => handleDramaChange(drama.id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1725,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: `dialogue-drama-${drama.id}`,\n            children: formatDramaName(drama)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1731,\n            columnNumber: 15\n          }, this)]\n        }, drama.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1724,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1722,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1711,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startNewGame,\n        className: \"new-game-btn\",\n        disabled: apiStatus !== 'connected',\n        children: \"\\u65B0\\u6E38\\u620F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1740,\n        columnNumber: 9\n      }, this), gameStarted && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: goBackOneStep,\n        className: \"back-btn\",\n        disabled: gameLog.length === 0,\n        children: \"\\u4E0A\\u4E00\\u6B65\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1748,\n        columnNumber: 11\n      }, this), clipUrls.length > 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: exportMergedVideo,\n        className: \"export-btn\",\n        disabled: isExportingVideo,\n        children: isExportingVideo ? '导出中...' : '导出对话视频'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1757,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1739,\n      columnNumber: 7\n    }, this), gameError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: gameError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1767,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"game-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-candidates\",\n        children: [!gameStarted ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"start-game-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"section-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u9009\\u62E9\\u5F00\\u59CB\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1775,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              className: \"refresh-btn\",\n              disabled: loadingPrompts || apiStatus !== 'connected',\n              children: \"\\u6362\\u4E00\\u6279\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1776,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1774,\n            columnNumber: 15\n          }, this), loadingPrompts ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading\",\n            children: \"\\u52A0\\u8F7D\\u63D0\\u793A\\u53E5\\u5B50\\u4E2D...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1786,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"prompts-list\",\n            children: currentPrompts.map((prompt, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              onClick: () => selectStartSentence(prompt),\n              className: selectedOption === prompt ? 'prompt-item selected' : 'prompt-item',\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-text\",\n                children: prompt.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1795,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"prompt-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"drama-name\",\n                  children: formatDramaName({\n                    id: prompt.drama_id\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1797,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(prompt.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1798,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(prompt.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1799,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `sentence-type ${analyzeSentenceType(prompt.text)}`,\n                  children: analyzeSentenceType(prompt.text)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1800,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1796,\n                columnNumber: 23\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1790,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1788,\n            columnNumber: 17\n          }, this), currentPrompts.length === 0 && !loadingPrompts && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-prompts\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"\\u6CA1\\u6709\\u53EF\\u7528\\u7684\\u63D0\\u793A\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1809,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: refreshRandomPrompts,\n              children: \"\\u91CD\\u65B0\\u83B7\\u53D6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1810,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1808,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1773,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"current-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              children: \"\\u5F53\\u524D\\u53E5\\u5B50\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1817,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"current-sentence\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-text\",\n                children: currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1819,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"current-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"drama-name\",\n                  children: formatDramaName({\n                    id: currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.drama_id\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1821,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1822,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(currentSentence === null || currentSentence === void 0 ? void 0 : currentSentence.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1823,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1820,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"next-hint\",\n                children: \"\\u67E5\\u627E\\u9002\\u5408\\u7684\\u56DE\\u5E94\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1825,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1818,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1816,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"next-options-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"section-header\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"\\u56DE\\u5E94\\u9009\\u9879\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1833,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: refreshNextOptions,\n                className: \"refresh-btn\",\n                disabled: loadingNextOptions,\n                children: \"\\u6362\\u4E00\\u6279\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1834,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1832,\n              columnNumber: 17\n            }, this), loadingNextOptions ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading\",\n              children: \"\\u67E5\\u627E\\u56DE\\u5E94\\u53E5\\u5B50\\u4E2D...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1844,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"options-list\",\n              children: nextOptions.map((option, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                onClick: () => selectNextSentence(option),\n                className: selectedOption === option ? 'option-item selected' : 'option-item',\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-text\",\n                  children: option.text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1853,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"option-info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"drama-name\",\n                    children: formatDramaName({\n                      id: option.drama_id\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1855,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"episode\",\n                    children: formatEpisode(option.episode)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1856,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"time\",\n                    children: formatTime(option.start_seconds)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1857,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `sentence-type ${analyzeSentenceType(option.text)}`,\n                    children: analyzeSentenceType(option.text)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1858,\n                    columnNumber: 27\n                  }, this), option.score && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"match-score\",\n                    children: [\"\\u5339\\u914D\\u5EA6: \", Math.round(option.score * 100), \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1860,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1854,\n                  columnNumber: 25\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1848,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1846,\n              columnNumber: 19\n            }, this), nextOptions.length === 0 && !loadingNextOptions && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"no-options\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u6CA1\\u6709\\u627E\\u5230\\u5408\\u9002\\u7684\\u56DE\\u5E94\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1871,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: startNewGame,\n                children: \"\\u91CD\\u65B0\\u5F00\\u59CB\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1872,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1870,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1831,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"game-log-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u5BF9\\u8BDD\\u8BB0\\u5F55\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1881,\n            columnNumber: 13\n          }, this), gameLog.length > 0 ? /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"game-log-list\",\n            children: gameLog.map((log, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"log-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-text\",\n                children: log.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1886,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"log-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"drama-name\",\n                  children: formatDramaName({\n                    id: log.drama_id\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1888,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"episode\",\n                  children: formatEpisode(log.episode)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1889,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"time\",\n                  children: formatTime(log.start_seconds)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1890,\n                  columnNumber: 23\n                }, this), log.clipUrl && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"clip-info\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"video-icon\",\n                    children: \"\\uD83C\\uDFAC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1893,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1892,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1887,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1885,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1883,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-log\",\n            children: \"\\u5C1A\\u672A\\u5F00\\u59CB\\u6E38\\u620F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1901,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1880,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1771,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-video-preview\",\n        children: [isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"confirm-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-sentence\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-text\",\n              children: selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1911,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"selected-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"drama-name\",\n                children: formatDramaName({\n                  id: selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.drama_id\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1913,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"episode\",\n                children: formatEpisode(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.episode)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1914,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"time\",\n                children: formatTime(selectedOption === null || selectedOption === void 0 ? void 0 : selectedOption.start_seconds)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1915,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1912,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1910,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-preview\",\n            children: isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-video\",\n              children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1921,\n              columnNumber: 19\n            }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n              controls: true,\n              autoPlay: true,\n              className: \"video-element\",\n              src: videoUrl\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1923,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"video-placeholder\",\n              children: \"\\u51C6\\u5907\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1930,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1919,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"confirm-buttons\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"confirm-btn\",\n              onClick: gameStarted ? confirmNextSentence : confirmStartSentence,\n              disabled: isVideoLoading || !videoUrl,\n              children: \"\\u786E\\u8BA4\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1935,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"cancel-btn\",\n              onClick: cancelSelection,\n              children: \"\\u53D6\\u6D88\\u9009\\u62E9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1942,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1934,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1909,\n          columnNumber: 13\n        }, this), !isConfirmMode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"video-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"\\u89C6\\u9891\\u9884\\u89C8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1953,\n            columnNumber: 15\n          }, this), isVideoLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-video\",\n            children: \"\\u751F\\u6210\\u89C6\\u9891\\u7247\\u6BB5\\u4E2D\\uFF0C\\u8BF7\\u7A0D\\u5019...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1955,\n            columnNumber: 17\n          }, this) : videoUrl ? /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            autoPlay: true,\n            className: \"video-element\",\n            src: videoUrl\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1957,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"video-placeholder large\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"placeholder-text\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u8BF7\\u4ECE\\u5DE6\\u4FA7\\u9009\\u62E9\\u4E00\\u4E2A\\u53E5\\u5B50\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1966,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u9009\\u62E9\\u540E\\u5C06\\u5728\\u6B64\\u5904\\u9884\\u89C8\\u89C6\\u9891\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1967,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1965,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1964,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1952,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1907,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1769,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1710,\n    columnNumber: 5\n  }, this);\n};\n_s3(DialogueGamePage, \"jTGscrXdtt0JB0KTOqT41MaQ5xc=\");\n_c4 = DialogueGamePage;\nfunction App() {\n  _s4();\n  const API_BASE_URL = 'http://localhost:8089';\n\n  // 搜索页面状态\n  const [query, setQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [apiStatus, setApiStatus] = useState('unknown');\n  const [error, setError] = useState(null);\n  const [selectedResult, setSelectedResult] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState('search');\n\n  // 剧集相关状态\n  const [availableDramas, setAvailableDramas] = useState([]);\n  const [selectedDramas, setSelectedDramas] = useState([]);\n  const [dramaStats, setDramaStats] = useState({});\n  useEffect(() => {\n    checkApiStatus();\n  }, []);\n\n  // 获取API状态并加载可用剧集\n  const checkApiStatus = async () => {\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/status`);\n      if (response.data && response.data.status === 'ok') {\n        setApiStatus('connected');\n\n        // 保存剧集信息\n        if (response.data.dramas) {\n          setAvailableDramas(response.data.dramas);\n          // 默认选择所有可用剧集\n          setSelectedDramas(response.data.dramas.map(drama => drama.id));\n        }\n\n        // 保存剧集统计信息\n        if (response.data.drama_stats) {\n          setDramaStats(response.data.drama_stats);\n        }\n      } else {\n        setApiStatus('error');\n        setError('API服务状态异常');\n      }\n    } catch (error) {\n      console.error('API状态检查错误:', error);\n      setApiStatus('disconnected');\n      setError('无法连接到API服务，请确保服务器已启动');\n    }\n  };\n  const handleSearch = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSearchResults([]);\n    setSelectedResult(null);\n    setVideoUrl('');\n    if (!query.trim()) {\n      setError('请输入搜索关键词');\n      setLoading(false);\n      return;\n    }\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/search`, {\n        params: {\n          query: query,\n          drama_ids: selectedDramas\n        }\n      });\n      if (response.data && response.data.results) {\n        setSearchResults(response.data.results);\n        if (response.data.results.length === 0) {\n          setError('没有找到匹配的结果');\n        }\n      } else {\n        setError('搜索失败');\n      }\n    } catch (error) {\n      console.error('搜索错误:', error);\n      setError('搜索请求失败，请确保API服务正常运行');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleGenerateClip = async result => {\n    if (isVideoLoading) return;\n    setSelectedResult(result);\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setError(null);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: result.drama_id,\n        episode: result.episode,\n        start_time: result.start_seconds,\n        end_time: result.end_seconds,\n        context_seconds: 2\n      });\n      if (response.data && response.data.clip_url) {\n        const url = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(url);\n      } else {\n        setError('无法生成视频片段');\n      }\n    } catch (error) {\n      console.error('生成视频片段失败:', error);\n      setError('请求失败，请检查网络连接');\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  const formatEpisode = episode => {\n    // 从集数名称中提取数字\n    const match = episode.match(/\\d+/);\n    if (match) {\n      return `第${match[0]}集`;\n    }\n    return episode;\n  };\n  const formatDramaName = drama => {\n    // 根据drama_id获取剧名\n    if (!drama || !drama.id) return '未知剧集';\n\n    // 如果传入的是完整drama对象，则直接返回名称\n    if (drama.name) return drama.name;\n\n    // 否则在availableDramas中查找\n    const foundDrama = availableDramas.find(d => d.id === drama.id);\n    return foundDrama ? foundDrama.name : drama.id;\n  };\n  const highlightText = (text, query) => {\n    if (!query || !text) return text;\n\n    // 简单的字符串替换，为匹配的文本添加高亮标签\n    const escapedQuery = query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    const regex = new RegExp(escapedQuery, 'gi');\n    return text.replace(regex, match => `<span class=\"highlight\">${match}</span>`);\n  };\n  const switchPage = page => {\n    setCurrentPage(page);\n    setError(null);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u5B57\\u5E55\\u641C\\u7D22\\u7CFB\\u7EDF\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"api-status\",\n        children: [\"API\\u670D\\u52A1\\u72B6\\u6001:\", apiStatus === 'connected' ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-connected\",\n          children: \"\\u5DF2\\u8FDE\\u63A5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2149,\n          columnNumber: 13\n        }, this) : apiStatus === 'disconnected' ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-disconnected\",\n          children: \"\\u672A\\u8FDE\\u63A5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2151,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"status-checking\",\n          children: \"\\u68C0\\u67E5\\u4E2D...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2153,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"main-nav\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: currentPage === 'search' ? 'active' : '',\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => switchPage('search'),\n              children: \"\\u5B57\\u5E55\\u641C\\u7D22\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2160,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2159,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: currentPage === 'chain-game' ? 'active' : '',\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => switchPage('chain-game'),\n              children: \"\\u5B57\\u5E55\\u63A5\\u9F99\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2163,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: currentPage === 'rhyme-game' ? 'active' : '',\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => switchPage('rhyme-game'),\n              children: \"\\u5B57\\u5E55\\u62BC\\u97F5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2166,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: currentPage === 'dialogue-game' ? 'active' : '',\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => switchPage('dialogue-game'),\n              children: \"\\u5947\\u5999\\u5BF9\\u8BDD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 2169,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 2168,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 2158,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"App-main\",\n      children: [currentPage === 'search' && /*#__PURE__*/_jsxDEV(SearchPage, {\n        API_BASE_URL: API_BASE_URL,\n        query: query,\n        setQuery: setQuery,\n        searchResults: searchResults,\n        setSearchResults: setSearchResults,\n        loading: loading,\n        setLoading: setLoading,\n        apiStatus: apiStatus,\n        error: error,\n        setError: setError,\n        selectedResult: selectedResult,\n        setSelectedResult: setSelectedResult,\n        videoUrl: videoUrl,\n        setVideoUrl: setVideoUrl,\n        isVideoLoading: isVideoLoading,\n        setIsVideoLoading: setIsVideoLoading,\n        handleSearch: handleSearch,\n        handleGenerateClip: handleGenerateClip,\n        formatTime: formatTime,\n        formatEpisode: formatEpisode,\n        highlightText: highlightText,\n        availableDramas: availableDramas,\n        selectedDramas: selectedDramas,\n        setSelectedDramas: setSelectedDramas,\n        formatDramaName: formatDramaName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2177,\n        columnNumber: 11\n      }, this), currentPage === 'chain-game' && /*#__PURE__*/_jsxDEV(ChainGamePage, {\n        API_BASE_URL: API_BASE_URL,\n        apiStatus: apiStatus,\n        formatTime: formatTime,\n        formatEpisode: formatEpisode,\n        availableDramas: availableDramas,\n        formatDramaName: formatDramaName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2207,\n        columnNumber: 11\n      }, this), currentPage === 'rhyme-game' && /*#__PURE__*/_jsxDEV(RhymeGamePage, {\n        API_BASE_URL: API_BASE_URL,\n        apiStatus: apiStatus,\n        formatTime: formatTime,\n        formatEpisode: formatEpisode,\n        availableDramas: availableDramas,\n        formatDramaName: formatDramaName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2218,\n        columnNumber: 11\n      }, this), currentPage === 'dialogue-game' && /*#__PURE__*/_jsxDEV(DialogueGamePage, {\n        API_BASE_URL: API_BASE_URL,\n        apiStatus: apiStatus,\n        formatTime: formatTime,\n        formatEpisode: formatEpisode,\n        availableDramas: availableDramas,\n        formatDramaName: formatDramaName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2229,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"App-footer\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u5B57\\u5E55\\u641C\\u7D22\\u7CFB\\u7EDF \\xA9 2025\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2241,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2240,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2142,\n    columnNumber: 5\n  }, this);\n}\n_s4(App, \"YHhfkhktu3GjT1YKE5b3+6Q9BPg=\");\n_c5 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"SearchPage\");\n$RefreshReg$(_c2, \"ChainGamePage\");\n$RefreshReg$(_c3, \"RhymeGamePage\");\n$RefreshReg$(_c4, \"DialogueGamePage\");\n$RefreshReg$(_c5, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","SearchPage","API_BASE_URL","query","setQuery","searchResults","setSearchResults","loading","setLoading","apiStatus","error","setError","selectedResult","setSelectedResult","videoUrl","setVideoUrl","isVideoLoading","setIsVideoLoading","handleSearch","handleGenerateClip","formatTime","formatEpisode","highlightText","availableDramas","selectedDramas","setSelectedDramas","formatDramaName","handleDramaChange","dramaId","includes","filter","id","toggleAllDramas","length","map","drama","children","className","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","checked","onChange","htmlFor","value","e","target","placeholder","disabled","result","index","drama_id","episode","start_seconds","end_seconds","dangerouslySetInnerHTML","__html","text","controls","autoPlay","src","_c","ChainGamePage","_s","gameStarted","setGameStarted","currentPrompts","setCurrentPrompts","loadingPrompts","setLoadingPrompts","gameLog","setGameLog","currentSentence","setCurrentSentence","nextOptions","setNextOptions","loadingNextOptions","setLoadingNextOptions","gameError","setGameError","selectedOption","setSelectedOption","isExportingVideo","setIsExportingVideo","clipUrls","setClipUrls","isConfirmMode","setIsConfirmMode","fetchRandomPrompts","response","get","params","count","drama_ids","join","data","results","console","refreshRandomPrompts","generateVideoClip","subtitle","post","start_time","end_time","context_seconds","clip_url","clipUrl","selectStartSentence","prompt","confirmStartSentence","sentence","step","fetchNextOptions","cancelSelection","selectNextSentence","option","confirmNextSentence","lastChar","getLastValidChar","log","dramaIdsParam","fetch","encodeURIComponent","ok","Error","status","json","filteredResults","item","cleanText","replace","fallbackResponse","fallbackData","manualFilteredResults","startsWith","shuffled","sort","Math","random","slice","message","refreshNextOptions","goBackOneStep","newLog","pop","prevSentence","newClipUrls","exportMergedVideo","clip_urls","merged_url","mergedVideoUrl","link","document","createElement","href","download","body","appendChild","click","setTimeout","removeChild","_error$response","_error$response$data","startNewGame","analyzeSentenceType","_c2","RhymeGamePage","_s2","fetchRhymingOptions","min_length","max_length","limit","_error$response2","_error$response2$data","_c3","commandWords","some","word","positiveWords","negativeWords","DialogueGamePage","_s3","fetchDialogueResponses","sentence_text","_error$response3","_error$response3$data","score","round","_c4","App","_s4","setApiStatus","currentPage","setCurrentPage","setAvailableDramas","dramaStats","setDramaStats","checkApiStatus","dramas","drama_stats","preventDefault","trim","url","seconds","mins","floor","secs","toString","padStart","match","name","foundDrama","find","d","escapedQuery","regex","RegExp","switchPage","page","_c5","$RefreshReg$"],"sources":["/Users/h0270/Documents/code/ai-vedio/create_video/subtitle-search-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport axios from 'axios';\n\n// 子页面组件\nconst SearchPage = ({ \n  API_BASE_URL, \n  query, \n  setQuery, \n  searchResults,\n  setSearchResults,\n  loading,\n  setLoading,\n  apiStatus,\n  error,\n  setError,\n  selectedResult,\n  setSelectedResult,\n  videoUrl,\n  setVideoUrl,\n  isVideoLoading,\n  setIsVideoLoading,\n  handleSearch,\n  handleGenerateClip,\n  formatTime,\n  formatEpisode,\n  highlightText,\n  availableDramas,\n  selectedDramas,\n  setSelectedDramas,\n  formatDramaName\n}) => {\n  // 处理剧集选择变化\n  const handleDramaChange = (dramaId) => {\n    if (selectedDramas.includes(dramaId)) {\n      // 如果已经选中，则从数组中移除\n      setSelectedDramas(selectedDramas.filter(id => id !== dramaId));\n    } else {\n      // 如果未选中，则添加到数组\n      setSelectedDramas([...selectedDramas, dramaId]);\n    }\n  };\n\n  // 选择/取消选择所有剧集\n  const toggleAllDramas = () => {\n    if (selectedDramas.length === availableDramas.length) {\n      // 如果已选择所有剧集，则取消选择所有\n      setSelectedDramas([]);\n    } else {\n      // 选择所有剧集\n      setSelectedDramas(availableDramas.map(drama => drama.id));\n    }\n  };\n\n  return (\n    <>\n      <section className=\"search-area\">\n        <form onSubmit={handleSearch}>\n          <div className=\"drama-selector\">\n            <div className=\"drama-selector-header\">\n              <h3>选择剧集</h3>\n              <button \n                type=\"button\" \n                className=\"toggle-all-button\"\n                onClick={toggleAllDramas}\n              >\n                {selectedDramas.length === availableDramas.length ? '取消全选' : '全选'}\n              </button>\n            </div>\n            <div className=\"drama-checkbox-container\">\n              {availableDramas.map(drama => (\n                <div className=\"drama-checkbox\" key={drama.id}>\n                  <input\n                    type=\"checkbox\"\n                    id={`drama-${drama.id}`}\n                    checked={selectedDramas.includes(drama.id)}\n                    onChange={() => handleDramaChange(drama.id)}\n                  />\n                  <label htmlFor={`drama-${drama.id}`}>\n                    {formatDramaName(drama)}\n                  </label>\n                </div>\n              ))}\n            </div>\n          </div>\n          <div className=\"search-box\">\n            <input\n              type=\"text\"\n              value={query}\n              onChange={(e) => setQuery(e.target.value)}\n              placeholder=\"输入要搜索的字幕内容...\"\n              disabled={apiStatus !== 'connected'}\n            />\n            <button \n              type=\"submit\" \n              disabled={loading || apiStatus !== 'connected' || selectedDramas.length === 0}\n            >\n              {loading ? '搜索中...' : '搜索'}\n            </button>\n          </div>\n        </form>\n\n        {error && <div className=\"error-message\">{error}</div>}\n      </section>\n\n      <div className=\"content-area\">\n        <section className=\"results-area\">\n          <h2>搜索结果 {searchResults.length > 0 && `(${searchResults.length})`}</h2>\n          \n          {loading ? (\n            <div className=\"loading\">搜索中，请稍候...</div>\n          ) : (\n            <ul className=\"results-list\">\n              {searchResults.map((result, index) => (\n                <li \n                  key={index} \n                  className={selectedResult === result ? 'selected' : ''}\n                  onClick={() => handleGenerateClip(result)}\n                >\n                  <div className=\"result-header\">\n                    <span className=\"drama-name\">{formatDramaName({id: result.drama_id})}</span>\n                    <span className=\"episode\">{formatEpisode(result.episode)}</span>\n                    <span className=\"time\">{formatTime(result.start_seconds)} - {formatTime(result.end_seconds)}</span>\n                  </div>\n                  <div \n                    className=\"subtitle-text\"\n                    dangerouslySetInnerHTML={{__html: highlightText(result.text, query)}}\n                  />\n                </li>\n              ))}\n            </ul>\n          )}\n        </section>\n\n        <section className=\"video-area\">\n          <h2>视频播放</h2>\n          {selectedResult ? (\n            <div className=\"video-player\">\n              <div className=\"video-info\">\n                <p><strong>剧集:</strong> {formatDramaName({id: selectedResult.drama_id})}</p>\n                <p><strong>集数:</strong> {formatEpisode(selectedResult.episode)}</p>\n                <p><strong>时间段:</strong> {formatTime(selectedResult.start_seconds)} - {formatTime(selectedResult.end_seconds)}</p>\n                <p><strong>字幕内容:</strong> {selectedResult.text}</p>\n              </div>\n              \n              {isVideoLoading ? (\n                <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder\">\n                  {selectedResult ? '准备生成视频片段...' : '请从左侧选择一个搜索结果'}\n                </div>\n              )}\n            </div>\n          ) : (\n            <div className=\"video-placeholder\">\n              请从左侧选择一个搜索结果\n            </div>\n          )}\n        </section>\n      </div>\n    </>\n  );\n};\n\n// 成语接龙游戏组件\nconst ChainGamePage = ({ \n  API_BASE_URL, \n  apiStatus,\n  formatTime,\n  formatEpisode,\n  availableDramas,\n  formatDramaName\n}) => {\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n  const [selectedDramas, setSelectedDramas] = useState(\n    availableDramas ? availableDramas.map(drama => drama.id) : []\n  );\n\n  // 处理剧集选择变化\n  const handleDramaChange = (dramaId) => {\n    if (selectedDramas.includes(dramaId)) {\n      // 如果已经选中，则从数组中移除\n      setSelectedDramas(selectedDramas.filter(id => id !== dramaId));\n    } else {\n      // 如果未选中，则添加到数组\n      setSelectedDramas([...selectedDramas, dramaId]);\n    }\n  };\n\n  // 选择/取消选择所有剧集\n  const toggleAllDramas = () => {\n    if (selectedDramas.length === availableDramas.length) {\n      // 如果已选择所有剧集，则取消选择所有\n      setSelectedDramas([]);\n    } else {\n      // 选择所有剧集\n      setSelectedDramas(availableDramas.map(drama => drama.id));\n    }\n  };\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    if (selectedDramas.length === 0) {\n      setGameError('请至少选择一个剧集');\n      return;\n    }\n    \n    setLoadingPrompts(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: {\n          count: 8,\n          drama_ids: selectedDramas.join(',')\n        }\n      });\n      \n      if (response.data && response.data.results) {\n        setCurrentPrompts(response.data.results);\n      } else {\n        setGameError('获取随机句子失败');\n      }\n    } catch (error) {\n      console.error('获取随机句子错误:', error);\n      setGameError('无法获取随机句子');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async (subtitle) => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: subtitle.drama_id,\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n\n      if (response.data && response.data.clip_url) {\n        const clipUrl = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = (prompt) => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([{...sentence, step: 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n  \n  // 选择下一个句子\n  const selectNextSentence = (option) => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {...sentence, step: gameLog.length + 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchNextOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 获取下一步选项\n  const fetchNextOptions = async (text) => {\n    if (!text) return;\n    \n    setLoadingNextOptions(true);\n    setGameError(null);\n    \n    try {\n      // 获取最后一个字，排除语气词\n      let lastChar = getLastValidChar(text);\n      \n      if (!lastChar) {\n        setGameError('无法识别有效的结尾字符');\n        setLoadingNextOptions(false);\n        return;\n      }\n      \n      console.log(`正在查找以\"${lastChar}\"开头的句子...`);\n      \n      // 确保有选择的剧集\n      if (selectedDramas.length === 0) {\n        setGameError('请至少选择一个剧集');\n        setLoadingNextOptions(false);\n        return;\n      }\n      \n      const dramaIdsParam = selectedDramas.join(',');\n      const response = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(`^${lastChar}`)}&use_regex=true&drama_ids=${dramaIdsParam}`);\n      \n      if (!response.ok) {\n        throw new Error(`API请求失败: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      \n      if (data && data.results) {\n        console.log(`API返回了 ${data.results.length} 条结果`);\n        \n        // 过滤结果，保留3-8个字的句子\n        const filteredResults = data.results.filter(item => {\n          const cleanText = item.text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n          return cleanText.length >= 3 && cleanText.length <= 8;\n        });\n        \n        console.log(`过滤后还有 ${filteredResults.length} 条结果`);\n        \n        if (filteredResults.length === 0) {\n          // 如果没有找到结果，尝试不使用正则表达式的精确查询\n          console.log(`尝试使用精确查询搜索以\"${lastChar}\"开头的句子`);\n          const fallbackResponse = await fetch(`${API_BASE_URL}/api/search?query=${encodeURIComponent(lastChar)}&drama_ids=${dramaIdsParam}`);\n          const fallbackData = await fallbackResponse.json();\n          \n          if (fallbackData && fallbackData.results) {\n            console.log(`精确查询返回了 ${fallbackData.results.length} 条结果`);\n            // 手动过滤以lastChar开头的结果\n            const manualFilteredResults = fallbackData.results.filter(item => {\n              return item.text.startsWith(lastChar) && \n                     item.text.length >= 3 && \n                     item.text.length <= 8;\n            });\n            \n            if (manualFilteredResults.length > 0) {\n              console.log(`手动过滤后找到 ${manualFilteredResults.length} 条结果`);\n              // 随机选择最多8个结果\n              const shuffled = [...manualFilteredResults].sort(() => 0.5 - Math.random());\n              setNextOptions(shuffled.slice(0, 8));\n              setLoadingNextOptions(false);\n              return;\n            }\n          }\n          \n          setGameError(`没有找到以\"${lastChar}\"开头的句子`);\n        } else {\n          // 随机选择最多8个结果\n          const shuffled = [...filteredResults].sort(() => 0.5 - Math.random());\n          setNextOptions(shuffled.slice(0, 8));\n        }\n      } else {\n        setGameError('获取接续句子失败');\n      }\n    } catch (error) {\n      console.error('获取接续句子错误:', error);\n      setGameError(`查询错误: ${error.message}`);\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = (text) => {\n    if (!text || text.length === 0) return null;\n    \n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchNextOptions(currentSentence.text);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n      \n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n      \n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n      \n      // 重新获取选项\n      fetchNextOptions(prevSentence.text);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    \n    setIsExportingVideo(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      \n      if (response.data && response.data.merged_url) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.merged_url}`;\n        \n        // 创建下载链接并强制触发下载\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '接龙视频.mp4';\n        link.target = '_blank';\n        document.body.appendChild(link); // 必须添加到DOM中\n        link.click();\n        setTimeout(() => {\n          document.body.removeChild(link); // 清理DOM\n        }, 100);\n        \n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + (error.response?.data?.error || error.message));\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n\n  return (\n    <div className=\"chain-game-container\">\n      <div className=\"drama-selector\">\n        <div className=\"drama-selector-header\">\n          <h3>选择剧集</h3>\n          <button \n            type=\"button\" \n            className=\"toggle-all-button\"\n            onClick={toggleAllDramas}\n          >\n            {selectedDramas.length === availableDramas.length ? '取消全选' : '全选'}\n          </button>\n        </div>\n        <div className=\"drama-checkbox-container\">\n          {availableDramas.map(drama => (\n            <div className=\"drama-checkbox\" key={drama.id}>\n              <input\n                type=\"checkbox\"\n                id={`chain-drama-${drama.id}`}\n                checked={selectedDramas.includes(drama.id)}\n                onChange={() => handleDramaChange(drama.id)}\n              />\n              <label htmlFor={`chain-drama-${drama.id}`}>\n                {formatDramaName(drama)}\n              </label>\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      <div className=\"game-controls\">\n        <button \n          onClick={startNewGame}\n          className=\"new-game-btn\"\n          disabled={apiStatus !== 'connected'}\n        >\n          新游戏\n        </button>\n        {gameStarted && (\n          <button \n            onClick={goBackOneStep}\n            className=\"back-btn\"\n            disabled={gameLog.length === 0}\n          >\n            上一步\n          </button>\n        )}\n        {clipUrls.length > 1 && (\n          <button\n            onClick={exportMergedVideo}\n            className=\"export-btn\"\n            disabled={isExportingVideo}\n          >\n            {isExportingVideo ? '导出中...' : '导出接龙视频'}\n          </button>\n        )}\n      </div>\n      \n      {gameError && <div className=\"error-message\">{gameError}</div>}\n      \n      <div className=\"game-content\">\n        {/* 左侧：候选词区域 */}\n        <div className=\"game-candidates\">\n          {!gameStarted ? (\n            <div className=\"start-game-section\">\n              <div className=\"section-header\">\n                <h2>选择开始句子</h2>\n                <button \n                  onClick={refreshRandomPrompts}\n                  className=\"refresh-btn\"\n                  disabled={loadingPrompts || apiStatus !== 'connected'}\n                >\n                  换一批\n                </button>\n              </div>\n              \n              {loadingPrompts ? (\n                <div className=\"loading\">加载提示句子中...</div>\n              ) : (\n                <ul className=\"prompts-list\">\n                  {currentPrompts.map((prompt, index) => (\n                    <li \n                      key={index} \n                      onClick={() => selectStartSentence(prompt)}\n                      className={selectedOption === prompt ? 'prompt-item selected' : 'prompt-item'}\n                    >\n                      <div className=\"prompt-text\">{prompt.text}</div>\n                      <div className=\"prompt-info\">\n                        <span className=\"drama-name\">{formatDramaName({id: prompt.drama_id})}</span>\n                        <span className=\"episode\">{formatEpisode(prompt.episode)}</span>\n                        <span className=\"time\">{formatTime(prompt.start_seconds)}</span>\n                        <span className={`sentence-type ${analyzeSentenceType(prompt.text)}`}>{analyzeSentenceType(prompt.text)}</span>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              )}\n              \n              {currentPrompts.length === 0 && !loadingPrompts && (\n                <div className=\"empty-prompts\">\n                  <p>没有可用的提示句子</p>\n                  <button onClick={refreshRandomPrompts}>重新获取</button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              <div className=\"current-section\">\n                <h2>当前句子</h2>\n                <div className=\"current-sentence\">\n                  <div className=\"current-text\">{currentSentence?.text}</div>\n                  <div className=\"current-info\">\n                    <span className=\"drama-name\">{formatDramaName({id: currentSentence?.drama_id})}</span>\n                    <span className=\"episode\">{formatEpisode(currentSentence?.episode)}</span>\n                    <span className=\"time\">{formatTime(currentSentence?.start_seconds)}</span>\n                  </div>\n                  <div className=\"next-hint\">\n                    下一句需以「{getLastValidChar(currentSentence?.text)}」字开头\n                  </div>\n                </div>\n              </div>\n                \n              <div className=\"next-options-section\">\n                <div className=\"section-header\">\n                  <h2>可选接续</h2>\n                  <button \n                    onClick={refreshNextOptions}\n                    className=\"refresh-btn\"\n                    disabled={loadingNextOptions}\n                  >\n                    换一批\n                  </button>\n                </div>\n                \n                {loadingNextOptions ? (\n                  <div className=\"loading\">加载接续句子中...</div>\n                ) : (\n                  <ul className=\"options-list\">\n                    {nextOptions.map((option, index) => (\n                      <li \n                        key={index}\n                        onClick={() => selectNextSentence(option)}\n                        className={selectedOption === option ? 'option-item selected' : 'option-item'}\n                      >\n                        <div className=\"option-text\">{option.text}</div>\n                        <div className=\"option-info\">\n                          <span className=\"drama-name\">{formatDramaName({id: option.drama_id})}</span>\n                          <span className=\"episode\">{formatEpisode(option.episode)}</span>\n                          <span className=\"time\">{formatTime(option.start_seconds)}</span>\n                          <span className={`sentence-type ${analyzeSentenceType(option.text)}`}>{analyzeSentenceType(option.text)}</span>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n                {nextOptions.length === 0 && !loadingNextOptions && (\n                  <div className=\"no-options\">\n                    <p>没有找到合适的接续句子</p>\n                    <button onClick={startNewGame}>重新开始</button>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* 接龙记录 */}\n          <div className=\"game-log-section\">\n            <h2>接龙记录</h2>\n            {gameLog.length > 0 ? (\n              <ol className=\"game-log-list\">\n                {gameLog.map((log, index) => (\n                  <li key={index} className=\"log-item\">\n                    <div className=\"log-text\">{log.text}</div>\n                    <div className=\"log-info\">\n                      <span className=\"drama-name\">{formatDramaName({id: log.drama_id})}</span>\n                      <span className=\"episode\">{formatEpisode(log.episode)}</span>\n                      <span className=\"time\">{formatTime(log.start_seconds)}</span>\n                      {log.clipUrl && (\n                        <span className=\"clip-info\">\n                          <i className=\"video-icon\">🎬</i>\n                        </span>\n                      )}\n                    </div>\n                  </li>\n                ))}\n              </ol>\n            ) : (\n              <div className=\"empty-log\">尚未开始游戏</div>\n            )}\n          </div>\n        </div>\n\n        {/* 右侧：视频预览区域 */}\n        <div className=\"game-video-preview\">\n          {isConfirmMode && (\n            <div className=\"confirm-section\">\n              <div className=\"selected-sentence\">\n                <div className=\"selected-text\">{selectedOption?.text}</div>\n                <div className=\"selected-info\">\n                  <span className=\"drama-name\">{formatDramaName({id: selectedOption?.drama_id})}</span>\n                  <span className=\"episode\">{formatEpisode(selectedOption?.episode)}</span>\n                  <span className=\"time\">{formatTime(selectedOption?.start_seconds)}</span>\n                </div>\n              </div>\n              \n              <div className=\"video-preview\">\n                {isVideoLoading ? (\n                  <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n                ) : videoUrl ? (\n                  <video \n                    controls \n                    autoPlay \n                    className=\"video-element\"\n                    src={videoUrl}\n                  />\n                ) : (\n                  <div className=\"video-placeholder\">准备生成视频片段...</div>\n                )}\n              </div>\n              \n              <div className=\"confirm-buttons\">\n                <button \n                  className=\"confirm-btn\"\n                  onClick={gameStarted ? confirmNextSentence : confirmStartSentence}\n                  disabled={isVideoLoading || !videoUrl}\n                >\n                  确认选择\n                </button>\n                <button \n                  className=\"cancel-btn\"\n                  onClick={cancelSelection}\n                >\n                  取消选择\n                </button>\n              </div>\n            </div>\n          )}\n          {!isConfirmMode && (\n            <div className=\"video-section\">\n              <h2>视频预览</h2>\n              {isVideoLoading ? (\n                <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder large\">\n                  <div className=\"placeholder-text\">\n                    <p>请从左侧选择一个句子</p>\n                    <p>选择后将在此处预览视频</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// 押韵游戏组件\nconst RhymeGamePage = ({ \n  API_BASE_URL, \n  apiStatus,\n  formatTime,\n  formatEpisode,\n  availableDramas,\n  formatDramaName\n}) => {\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n  const [selectedDramas, setSelectedDramas] = useState(\n    availableDramas ? availableDramas.map(drama => drama.id) : []\n  );\n\n  // 处理剧集选择变化\n  const handleDramaChange = (dramaId) => {\n    if (selectedDramas.includes(dramaId)) {\n      // 如果已经选中，则从数组中移除\n      setSelectedDramas(selectedDramas.filter(id => id !== dramaId));\n    } else {\n      // 如果未选中，则添加到数组\n      setSelectedDramas([...selectedDramas, dramaId]);\n    }\n  };\n\n  // 选择/取消选择所有剧集\n  const toggleAllDramas = () => {\n    if (selectedDramas.length === availableDramas.length) {\n      // 如果已选择所有剧集，则取消选择所有\n      setSelectedDramas([]);\n    } else {\n      // 选择所有剧集\n      setSelectedDramas(availableDramas.map(drama => drama.id));\n    }\n  };\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    if (selectedDramas.length === 0) {\n      setGameError('请至少选择一个剧集');\n      return;\n    }\n    \n    setLoadingPrompts(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: {\n          count: 8,\n          drama_ids: selectedDramas.join(',')\n        }\n      });\n      \n      if (response.data && response.data.results) {\n        setCurrentPrompts(response.data.results);\n      } else {\n        setGameError('获取随机句子失败');\n      }\n    } catch (error) {\n      console.error('获取随机句子错误:', error);\n      setGameError('无法获取随机句子');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async (subtitle) => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: subtitle.drama_id,\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n\n      if (response.data && response.data.clip_url) {\n        const clipUrl = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = (prompt) => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([{...sentence, step: 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchRhymingOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n  \n  // 选择下一个句子\n  const selectNextSentence = (option) => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {...sentence, step: gameLog.length + 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchRhymingOptions(sentence.text);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 查找韵脚匹配的选项\n  const fetchRhymingOptions = async (text) => {\n    if (!text) return;\n    \n    setLoadingNextOptions(true);\n    setGameError(null);\n    \n    try {\n      // 确保有选择的剧集\n      if (selectedDramas.length === 0) {\n        setGameError('请至少选择一个剧集');\n        setLoadingNextOptions(false);\n        return;\n      }\n      \n      const response = await axios.get(`${API_BASE_URL}/api/rhyming_sentences`, {\n        params: {\n          text: text,\n          min_length: 3,\n          max_length: 20,\n          limit: 8,\n          drama_ids: selectedDramas.join(',')\n        }\n      });\n      \n      if (response.data && response.data.results) {\n        setNextOptions(response.data.results);\n      } else {\n        setGameError('获取押韵选项失败');\n      }\n    } catch (error) {\n      console.error('获取押韵选项错误:', error);\n      setGameError('无法获取押韵选项');\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = (text) => {\n    if (!text || text.length === 0) return null;\n    \n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchRhymingOptions(currentSentence.text);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n      \n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n      \n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n      \n      // 重新获取选项\n      fetchRhymingOptions(prevSentence.text);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    \n    setIsExportingVideo(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      \n      if (response.data && response.data.merged_url) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.merged_url}`;\n        \n        // 创建下载链接并强制触发下载\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '押韵视频.mp4';\n        link.target = '_blank';\n        document.body.appendChild(link); // 必须添加到DOM中\n        link.click();\n        setTimeout(() => {\n          document.body.removeChild(link); // 清理DOM\n        }, 100);\n        \n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + (error.response?.data?.error || error.message));\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n\n  return (\n    <div className=\"chain-game-container\">\n      <div className=\"drama-selector\">\n        <div className=\"drama-selector-header\">\n          <h3>选择剧集</h3>\n          <button \n            type=\"button\" \n            className=\"toggle-all-button\"\n            onClick={toggleAllDramas}\n          >\n            {selectedDramas.length === availableDramas.length ? '取消全选' : '全选'}\n          </button>\n        </div>\n        <div className=\"drama-checkbox-container\">\n          {availableDramas.map(drama => (\n            <div className=\"drama-checkbox\" key={drama.id}>\n              <input\n                type=\"checkbox\"\n                id={`rhyme-drama-${drama.id}`}\n                checked={selectedDramas.includes(drama.id)}\n                onChange={() => handleDramaChange(drama.id)}\n              />\n              <label htmlFor={`rhyme-drama-${drama.id}`}>\n                {formatDramaName(drama)}\n              </label>\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      <div className=\"game-controls\">\n        <button \n          onClick={startNewGame}\n          className=\"new-game-btn\"\n          disabled={apiStatus !== 'connected'}\n        >\n          新游戏\n        </button>\n        {gameStarted && (\n          <button \n            onClick={goBackOneStep}\n            className=\"back-btn\"\n            disabled={gameLog.length === 0}\n          >\n            上一步\n          </button>\n        )}\n        {clipUrls.length > 1 && (\n          <button\n            onClick={exportMergedVideo}\n            className=\"export-btn\"\n            disabled={isExportingVideo}\n          >\n            {isExportingVideo ? '导出中...' : '导出押韵视频'}\n          </button>\n        )}\n      </div>\n      \n      {gameError && <div className=\"error-message\">{gameError}</div>}\n      \n      <div className=\"game-content\">\n        {/* 左侧：候选词区域 */}\n        <div className=\"game-candidates\">\n          {!gameStarted ? (\n            <div className=\"start-game-section\">\n              <div className=\"section-header\">\n                <h2>选择开始句子</h2>\n                <button \n                  onClick={refreshRandomPrompts}\n                  className=\"refresh-btn\"\n                  disabled={loadingPrompts || apiStatus !== 'connected'}\n                >\n                  换一批\n                </button>\n              </div>\n              \n              {loadingPrompts ? (\n                <div className=\"loading\">加载提示句子中...</div>\n              ) : (\n                <ul className=\"prompts-list\">\n                  {currentPrompts.map((prompt, index) => (\n                    <li \n                      key={index} \n                      onClick={() => selectStartSentence(prompt)}\n                      className={selectedOption === prompt ? 'prompt-item selected' : 'prompt-item'}\n                    >\n                      <div className=\"prompt-text\">{prompt.text}</div>\n                      <div className=\"prompt-info\">\n                        <span className=\"drama-name\">{formatDramaName({id: prompt.drama_id})}</span>\n                        <span className=\"episode\">{formatEpisode(prompt.episode)}</span>\n                        <span className=\"time\">{formatTime(prompt.start_seconds)}</span>\n                        <span className={`sentence-type ${analyzeSentenceType(prompt.text)}`}>{analyzeSentenceType(prompt.text)}</span>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              )}\n              \n              {currentPrompts.length === 0 && !loadingPrompts && (\n                <div className=\"empty-prompts\">\n                  <p>没有可用的提示句子</p>\n                  <button onClick={refreshRandomPrompts}>重新获取</button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              <div className=\"current-section\">\n                <h2>当前句子</h2>\n                <div className=\"current-sentence\">\n                  <div className=\"current-text\">{currentSentence?.text}</div>\n                  <div className=\"current-info\">\n                    <span className=\"drama-name\">{formatDramaName({id: currentSentence?.drama_id})}</span>\n                    <span className=\"episode\">{formatEpisode(currentSentence?.episode)}</span>\n                    <span className=\"time\">{formatTime(currentSentence?.start_seconds)}</span>\n                  </div>\n                  <div className=\"next-hint\">\n                    下一句需与此句韵脚相同\n                  </div>\n                </div>\n              </div>\n                \n              <div className=\"next-options-section\">\n                <div className=\"section-header\">\n                  <h2>押韵选项</h2>\n                  <button \n                    onClick={refreshNextOptions}\n                    className=\"refresh-btn\"\n                    disabled={loadingNextOptions}\n                  >\n                    换一批\n                  </button>\n                </div>\n                \n                {loadingNextOptions ? (\n                  <div className=\"loading\">查找押韵句子中...</div>\n                ) : (\n                  <ul className=\"options-list\">\n                    {nextOptions.map((option, index) => (\n                      <li \n                        key={index}\n                        onClick={() => selectNextSentence(option)}\n                        className={selectedOption === option ? 'option-item selected' : 'option-item'}\n                      >\n                        <div className=\"option-text\">{option.text}</div>\n                        <div className=\"option-info\">\n                          <span className=\"drama-name\">{formatDramaName({id: option.drama_id})}</span>\n                          <span className=\"episode\">{formatEpisode(option.episode)}</span>\n                          <span className=\"time\">{formatTime(option.start_seconds)}</span>\n                          <span className={`sentence-type ${analyzeSentenceType(option.text)}`}>{analyzeSentenceType(option.text)}</span>\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n                {nextOptions.length === 0 && !loadingNextOptions && (\n                  <div className=\"no-options\">\n                    <p>没有找到合适的押韵句子</p>\n                    <button onClick={startNewGame}>重新开始</button>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* 押韵记录 */}\n          <div className=\"game-log-section\">\n            <h2>押韵记录</h2>\n            {gameLog.length > 0 ? (\n              <ol className=\"game-log-list\">\n                {gameLog.map((log, index) => (\n                  <li key={index} className=\"log-item\">\n                    <div className=\"log-text\">{log.text}</div>\n                    <div className=\"log-info\">\n                      <span className=\"drama-name\">{formatDramaName({id: log.drama_id})}</span>\n                      <span className=\"episode\">{formatEpisode(log.episode)}</span>\n                      <span className=\"time\">{formatTime(log.start_seconds)}</span>\n                      {log.clipUrl && (\n                        <span className=\"clip-info\">\n                          <i className=\"video-icon\">🎬</i>\n                        </span>\n                      )}\n                    </div>\n                  </li>\n                ))}\n              </ol>\n            ) : (\n              <div className=\"empty-log\">尚未开始游戏</div>\n            )}\n          </div>\n        </div>\n\n        {/* 右侧：视频预览区域 */}\n        <div className=\"game-video-preview\">\n          {isConfirmMode && (\n            <div className=\"confirm-section\">\n              <div className=\"selected-sentence\">\n                <div className=\"selected-text\">{selectedOption?.text}</div>\n                <div className=\"selected-info\">\n                  <span className=\"drama-name\">{formatDramaName({id: selectedOption?.drama_id})}</span>\n                  <span className=\"episode\">{formatEpisode(selectedOption?.episode)}</span>\n                  <span className=\"time\">{formatTime(selectedOption?.start_seconds)}</span>\n                </div>\n              </div>\n              \n              <div className=\"video-preview\">\n                {isVideoLoading ? (\n                  <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n                ) : videoUrl ? (\n                  <video \n                    controls \n                    autoPlay \n                    className=\"video-element\"\n                    src={videoUrl}\n                  />\n                ) : (\n                  <div className=\"video-placeholder\">准备生成视频片段...</div>\n                )}\n              </div>\n              \n              <div className=\"confirm-buttons\">\n                <button \n                  className=\"confirm-btn\"\n                  onClick={gameStarted ? confirmNextSentence : confirmStartSentence}\n                  disabled={isVideoLoading || !videoUrl}\n                >\n                  确认选择\n                </button>\n                <button \n                  className=\"cancel-btn\"\n                  onClick={cancelSelection}\n                >\n                  取消选择\n                </button>\n              </div>\n            </div>\n          )}\n          {!isConfirmMode && (\n            <div className=\"video-section\">\n              <h2>视频预览</h2>\n              {isVideoLoading ? (\n                <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder large\">\n                  <div className=\"placeholder-text\">\n                    <p>请从左侧选择一个句子</p>\n                    <p>选择后将在此处预览视频</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// 分析句子类型 - 全局辅助函数\nconst analyzeSentenceType = (text) => {\n  if (!text) return '普通句';\n  \n  // 判断是否为问句\n  if (text.includes('?') || text.includes('？') || text.includes('吗') || text.includes('呢')) {\n    return '疑问句';\n  }\n  \n  // 判断是否为命令句\n  const commandWords = ['去', '来', '给我', '快', '立刻', '马上', '传'];\n  if (commandWords.some(word => text.includes(word))) {\n    return '命令句';\n  }\n  \n  // 判断情感色彩\n  const positiveWords = ['好', '愿意', '可以', '是', '对', '喜欢', '爱', '高兴'];\n  const negativeWords = ['不', '没', '别', '莫', '拒绝', '难过', '恨', '讨厌'];\n  \n  if (positiveWords.some(word => text.includes(word))) {\n    return '积极句';\n  }\n  \n  if (negativeWords.some(word => text.includes(word))) {\n    return '消极句';\n  }\n  \n  return '普通句';\n};\n\n// 奇妙对话组件\nconst DialogueGamePage = ({ \n  API_BASE_URL, \n  apiStatus,\n  formatTime,\n  formatEpisode,\n  availableDramas,\n  formatDramaName\n}) => {\n  const [gameStarted, setGameStarted] = useState(false);\n  const [currentPrompts, setCurrentPrompts] = useState([]);\n  const [loadingPrompts, setLoadingPrompts] = useState(false);\n  const [gameLog, setGameLog] = useState([]);\n  const [currentSentence, setCurrentSentence] = useState(null);\n  const [nextOptions, setNextOptions] = useState([]);\n  const [loadingNextOptions, setLoadingNextOptions] = useState(false);\n  const [gameError, setGameError] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [selectedOption, setSelectedOption] = useState(null);\n  const [isExportingVideo, setIsExportingVideo] = useState(false);\n  const [clipUrls, setClipUrls] = useState([]);\n  const [isConfirmMode, setIsConfirmMode] = useState(false);\n  const [selectedDramas, setSelectedDramas] = useState(\n    availableDramas ? availableDramas.map(drama => drama.id) : []\n  );\n\n  // 处理剧集选择变化\n  const handleDramaChange = (dramaId) => {\n    if (selectedDramas.includes(dramaId)) {\n      // 如果已经选中，则从数组中移除\n      setSelectedDramas(selectedDramas.filter(id => id !== dramaId));\n    } else {\n      // 如果未选中，则添加到数组\n      setSelectedDramas([...selectedDramas, dramaId]);\n    }\n  };\n\n  // 选择/取消选择所有剧集\n  const toggleAllDramas = () => {\n    if (selectedDramas.length === availableDramas.length) {\n      // 如果已选择所有剧集，则取消选择所有\n      setSelectedDramas([]);\n    } else {\n      // 选择所有剧集\n      setSelectedDramas(availableDramas.map(drama => drama.id));\n    }\n  };\n\n  // 获取随机提示句子\n  const fetchRandomPrompts = async () => {\n    if (selectedDramas.length === 0) {\n      setGameError('请至少选择一个剧集');\n      return;\n    }\n    \n    setLoadingPrompts(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/random_sentences`, {\n        params: {\n          count: 8,\n          drama_ids: selectedDramas.join(',')\n        }\n      });\n      \n      if (response.data && response.data.results) {\n        setCurrentPrompts(response.data.results);\n      } else {\n        setGameError('获取随机句子失败');\n      }\n    } catch (error) {\n      console.error('获取随机句子错误:', error);\n      setGameError('无法获取随机句子');\n    } finally {\n      setLoadingPrompts(false);\n    }\n  };\n\n  // 刷新随机提示\n  const refreshRandomPrompts = () => {\n    if (apiStatus === 'connected' && !loadingPrompts) {\n      fetchRandomPrompts();\n    }\n  };\n\n  // 生成视频片段\n  const generateVideoClip = async (subtitle) => {\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: subtitle.drama_id,\n        episode: subtitle.episode,\n        start_time: subtitle.start_seconds,\n        end_time: subtitle.end_seconds,\n        context_seconds: 2\n      });\n\n      if (response.data && response.data.clip_url) {\n        const clipUrl = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(clipUrl);\n        return clipUrl;\n      } else {\n        setGameError('生成视频片段失败');\n        return null;\n      }\n    } catch (error) {\n      console.error('生成视频片段出错:', error);\n      setGameError('视频服务出现错误，请确保视频文件存在且可访问');\n      return null;\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  // 选择开始句子\n  const selectStartSentence = (prompt) => {\n    setSelectedOption(prompt);\n    setIsConfirmMode(true);\n    generateVideoClip(prompt);\n  };\n\n  // 确认选择开始句子\n  const confirmStartSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([{...sentence, step: 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    setGameStarted(true);\n    fetchDialogueResponses(sentence);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 取消选择\n  const cancelSelection = () => {\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n    setVideoUrl('');\n  };\n  \n  // 选择下一个句子\n  const selectNextSentence = (option) => {\n    setSelectedOption(option);\n    setIsConfirmMode(true);\n    generateVideoClip(option);\n  };\n\n  // 确认选择下一个句子\n  const confirmNextSentence = () => {\n    const sentence = selectedOption;\n    if (!sentence) return;\n    \n    setCurrentSentence(sentence);\n    setGameLog([...gameLog, {...sentence, step: gameLog.length + 1, clipUrl: videoUrl}]);\n    setClipUrls([...clipUrls, videoUrl]);\n    fetchDialogueResponses(sentence);\n    setIsConfirmMode(false);\n    setSelectedOption(null);\n  };\n\n  // 查找对话回应\n  const fetchDialogueResponses = async (sentence) => {\n    if (!sentence) return;\n    \n    setLoadingNextOptions(true);\n    setGameError(null);\n    \n    try {\n      // 确保有选择的剧集\n      if (selectedDramas.length === 0) {\n        setGameError('请至少选择一个剧集');\n        setLoadingNextOptions(false);\n        return;\n      }\n      \n      const response = await axios.post(`${API_BASE_URL}/api/dialogue_responses`, {\n        sentence_text: sentence.text,\n        drama_id: sentence.drama_id,\n        episode: sentence.episode,\n        drama_ids: selectedDramas.join(',')\n      });\n      \n      if (response.data && response.data.results) {\n        setNextOptions(response.data.results);\n      } else {\n        setGameError('获取对话回应失败');\n      }\n    } catch (error) {\n      console.error('获取对话回应错误:', error);\n      setGameError('无法获取对话回应');\n    } finally {\n      setLoadingNextOptions(false);\n    }\n  };\n\n  // 获取最后一个有效字符（排除语气词）\n  const getLastValidChar = (text) => {\n    if (!text || text.length === 0) return null;\n    \n    // 排除常见语气词\n    const cleanText = text.replace(/[啊呢吗吧呀嘛哦哎嗯呐呵呦诶哈哟]$/, '');\n    return cleanText.length > 0 ? cleanText[cleanText.length - 1] : null;\n  };\n\n  // 刷新下一步选项\n  const refreshNextOptions = () => {\n    if (currentSentence && !loadingNextOptions) {\n      fetchDialogueResponses(currentSentence);\n    }\n  };\n\n  // 回到上一步\n  const goBackOneStep = () => {\n    if (gameLog.length <= 1) {\n      // 只有一步，回到选择开始句子\n      setGameStarted(false);\n      setGameLog([]);\n      setCurrentSentence(null);\n      setNextOptions([]);\n      setClipUrls([]);\n      setVideoUrl('');\n      fetchRandomPrompts();\n    } else {\n      // 移除最后一步\n      const newLog = [...gameLog];\n      newLog.pop();\n      setGameLog(newLog);\n      \n      // 更新当前句子和视频\n      const prevSentence = newLog[newLog.length - 1];\n      setCurrentSentence(prevSentence);\n      \n      // 更新剪辑URL列表\n      const newClipUrls = [...clipUrls];\n      newClipUrls.pop();\n      setClipUrls(newClipUrls);\n      \n      // 重新获取选项\n      fetchDialogueResponses(prevSentence);\n    }\n  };\n\n  // 合并视频并导出\n  const exportMergedVideo = async () => {\n    if (clipUrls.length === 0) return;\n    \n    setIsExportingVideo(true);\n    setGameError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/merge_clips`, {\n        clip_urls: clipUrls\n      });\n      \n      if (response.data && response.data.merged_url) {\n        const mergedVideoUrl = `${API_BASE_URL}${response.data.merged_url}`;\n        \n        // 创建下载链接并强制触发下载\n        const link = document.createElement('a');\n        link.href = mergedVideoUrl;\n        link.download = '对话视频.mp4';\n        link.target = '_blank';\n        document.body.appendChild(link); // 必须添加到DOM中\n        link.click();\n        setTimeout(() => {\n          document.body.removeChild(link); // 清理DOM\n        }, 100);\n        \n        console.log('视频合并成功，已触发下载');\n      } else {\n        setGameError('视频合并失败: ' + (response.data.error || '未知错误'));\n      }\n    } catch (error) {\n      console.error('视频合并错误:', error);\n      setGameError('视频合并服务出错: ' + (error.response?.data?.error || error.message));\n    } finally {\n      setIsExportingVideo(false);\n    }\n  };\n\n  // 开始新游戏\n  const startNewGame = () => {\n    setGameLog([]);\n    fetchRandomPrompts();\n    setGameStarted(false);\n    setCurrentSentence(null);\n    setNextOptions([]);\n    setClipUrls([]);\n    setVideoUrl('');\n    setSelectedOption(null);\n    setIsConfirmMode(false);\n  };\n\n  // 初始加载时获取随机提示\n  useEffect(() => {\n    if (apiStatus === 'connected') {\n      fetchRandomPrompts();\n    }\n  }, [apiStatus]);\n\n  return (\n    <div className=\"chain-game-container\">\n      <div className=\"drama-selector\">\n        <div className=\"drama-selector-header\">\n          <h3>选择剧集</h3>\n          <button \n            type=\"button\" \n            className=\"toggle-all-button\"\n            onClick={toggleAllDramas}\n          >\n            {selectedDramas.length === availableDramas.length ? '取消全选' : '全选'}\n          </button>\n        </div>\n        <div className=\"drama-checkbox-container\">\n          {availableDramas.map(drama => (\n            <div className=\"drama-checkbox\" key={drama.id}>\n              <input\n                type=\"checkbox\"\n                id={`dialogue-drama-${drama.id}`}\n                checked={selectedDramas.includes(drama.id)}\n                onChange={() => handleDramaChange(drama.id)}\n              />\n              <label htmlFor={`dialogue-drama-${drama.id}`}>\n                {formatDramaName(drama)}\n              </label>\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      <div className=\"game-controls\">\n        <button \n          onClick={startNewGame}\n          className=\"new-game-btn\"\n          disabled={apiStatus !== 'connected'}\n        >\n          新游戏\n        </button>\n        {gameStarted && (\n          <button \n            onClick={goBackOneStep}\n            className=\"back-btn\"\n            disabled={gameLog.length === 0}\n          >\n            上一步\n          </button>\n        )}\n        {clipUrls.length > 1 && (\n          <button\n            onClick={exportMergedVideo}\n            className=\"export-btn\"\n            disabled={isExportingVideo}\n          >\n            {isExportingVideo ? '导出中...' : '导出对话视频'}\n          </button>\n        )}\n      </div>\n      \n      {gameError && <div className=\"error-message\">{gameError}</div>}\n      \n      <div className=\"game-content\">\n        {/* 左侧：候选词区域 */}\n        <div className=\"game-candidates\">\n          {!gameStarted ? (\n            <div className=\"start-game-section\">\n              <div className=\"section-header\">\n                <h2>选择开始句子</h2>\n                <button \n                  onClick={refreshRandomPrompts}\n                  className=\"refresh-btn\"\n                  disabled={loadingPrompts || apiStatus !== 'connected'}\n                >\n                  换一批\n                </button>\n              </div>\n              \n              {loadingPrompts ? (\n                <div className=\"loading\">加载提示句子中...</div>\n              ) : (\n                <ul className=\"prompts-list\">\n                  {currentPrompts.map((prompt, index) => (\n                    <li \n                      key={index} \n                      onClick={() => selectStartSentence(prompt)}\n                      className={selectedOption === prompt ? 'prompt-item selected' : 'prompt-item'}\n                    >\n                      <div className=\"prompt-text\">{prompt.text}</div>\n                      <div className=\"prompt-info\">\n                        <span className=\"drama-name\">{formatDramaName({id: prompt.drama_id})}</span>\n                        <span className=\"episode\">{formatEpisode(prompt.episode)}</span>\n                        <span className=\"time\">{formatTime(prompt.start_seconds)}</span>\n                        <span className={`sentence-type ${analyzeSentenceType(prompt.text)}`}>{analyzeSentenceType(prompt.text)}</span>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              )}\n              \n              {currentPrompts.length === 0 && !loadingPrompts && (\n                <div className=\"empty-prompts\">\n                  <p>没有可用的提示句子</p>\n                  <button onClick={refreshRandomPrompts}>重新获取</button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <>\n              <div className=\"current-section\">\n                <h2>当前句子</h2>\n                <div className=\"current-sentence\">\n                  <div className=\"current-text\">{currentSentence?.text}</div>\n                  <div className=\"current-info\">\n                    <span className=\"drama-name\">{formatDramaName({id: currentSentence?.drama_id})}</span>\n                    <span className=\"episode\">{formatEpisode(currentSentence?.episode)}</span>\n                    <span className=\"time\">{formatTime(currentSentence?.start_seconds)}</span>\n                  </div>\n                  <div className=\"next-hint\">\n                    查找适合的回应句子\n                  </div>\n                </div>\n              </div>\n                \n              <div className=\"next-options-section\">\n                <div className=\"section-header\">\n                  <h2>回应选项</h2>\n                  <button \n                    onClick={refreshNextOptions}\n                    className=\"refresh-btn\"\n                    disabled={loadingNextOptions}\n                  >\n                    换一批\n                  </button>\n                </div>\n                \n                {loadingNextOptions ? (\n                  <div className=\"loading\">查找回应句子中...</div>\n                ) : (\n                  <ul className=\"options-list\">\n                    {nextOptions.map((option, index) => (\n                      <li \n                        key={index}\n                        onClick={() => selectNextSentence(option)}\n                        className={selectedOption === option ? 'option-item selected' : 'option-item'}\n                      >\n                        <div className=\"option-text\">{option.text}</div>\n                        <div className=\"option-info\">\n                          <span className=\"drama-name\">{formatDramaName({id: option.drama_id})}</span>\n                          <span className=\"episode\">{formatEpisode(option.episode)}</span>\n                          <span className=\"time\">{formatTime(option.start_seconds)}</span>\n                          <span className={`sentence-type ${analyzeSentenceType(option.text)}`}>{analyzeSentenceType(option.text)}</span>\n                          {option.score && (\n                            <span className=\"match-score\">\n                              匹配度: {Math.round(option.score * 100)}%\n                            </span>\n                          )}\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                )}\n                {nextOptions.length === 0 && !loadingNextOptions && (\n                  <div className=\"no-options\">\n                    <p>没有找到合适的回应句子</p>\n                    <button onClick={startNewGame}>重新开始</button>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n\n          {/* 对话记录 */}\n          <div className=\"game-log-section\">\n            <h2>对话记录</h2>\n            {gameLog.length > 0 ? (\n              <ol className=\"game-log-list\">\n                {gameLog.map((log, index) => (\n                  <li key={index} className=\"log-item\">\n                    <div className=\"log-text\">{log.text}</div>\n                    <div className=\"log-info\">\n                      <span className=\"drama-name\">{formatDramaName({id: log.drama_id})}</span>\n                      <span className=\"episode\">{formatEpisode(log.episode)}</span>\n                      <span className=\"time\">{formatTime(log.start_seconds)}</span>\n                      {log.clipUrl && (\n                        <span className=\"clip-info\">\n                          <i className=\"video-icon\">🎬</i>\n                        </span>\n                      )}\n                    </div>\n                  </li>\n                ))}\n              </ol>\n            ) : (\n              <div className=\"empty-log\">尚未开始游戏</div>\n            )}\n          </div>\n        </div>\n\n        {/* 右侧：视频预览区域 */}\n        <div className=\"game-video-preview\">\n          {isConfirmMode && (\n            <div className=\"confirm-section\">\n              <div className=\"selected-sentence\">\n                <div className=\"selected-text\">{selectedOption?.text}</div>\n                <div className=\"selected-info\">\n                  <span className=\"drama-name\">{formatDramaName({id: selectedOption?.drama_id})}</span>\n                  <span className=\"episode\">{formatEpisode(selectedOption?.episode)}</span>\n                  <span className=\"time\">{formatTime(selectedOption?.start_seconds)}</span>\n                </div>\n              </div>\n              \n              <div className=\"video-preview\">\n                {isVideoLoading ? (\n                  <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n                ) : videoUrl ? (\n                  <video \n                    controls \n                    autoPlay \n                    className=\"video-element\"\n                    src={videoUrl}\n                  />\n                ) : (\n                  <div className=\"video-placeholder\">准备生成视频片段...</div>\n                )}\n              </div>\n              \n              <div className=\"confirm-buttons\">\n                <button \n                  className=\"confirm-btn\"\n                  onClick={gameStarted ? confirmNextSentence : confirmStartSentence}\n                  disabled={isVideoLoading || !videoUrl}\n                >\n                  确认选择\n                </button>\n                <button \n                  className=\"cancel-btn\"\n                  onClick={cancelSelection}\n                >\n                  取消选择\n                </button>\n              </div>\n            </div>\n          )}\n          {!isConfirmMode && (\n            <div className=\"video-section\">\n              <h2>视频预览</h2>\n              {isVideoLoading ? (\n                <div className=\"loading-video\">生成视频片段中，请稍候...</div>\n              ) : videoUrl ? (\n                <video \n                  controls \n                  autoPlay \n                  className=\"video-element\"\n                  src={videoUrl}\n                />\n              ) : (\n                <div className=\"video-placeholder large\">\n                  <div className=\"placeholder-text\">\n                    <p>请从左侧选择一个句子</p>\n                    <p>选择后将在此处预览视频</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nfunction App() {\n  const API_BASE_URL = 'http://localhost:8089';\n  \n  // 搜索页面状态\n  const [query, setQuery] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [apiStatus, setApiStatus] = useState('unknown');\n  const [error, setError] = useState(null);\n  const [selectedResult, setSelectedResult] = useState(null);\n  const [videoUrl, setVideoUrl] = useState('');\n  const [isVideoLoading, setIsVideoLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState('search');\n  \n  // 剧集相关状态\n  const [availableDramas, setAvailableDramas] = useState([]);\n  const [selectedDramas, setSelectedDramas] = useState([]);\n  const [dramaStats, setDramaStats] = useState({});\n\n  useEffect(() => {\n    checkApiStatus();\n  }, []);\n  \n  // 获取API状态并加载可用剧集\n  const checkApiStatus = async () => {\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/status`);\n      if (response.data && response.data.status === 'ok') {\n        setApiStatus('connected');\n        \n        // 保存剧集信息\n        if (response.data.dramas) {\n          setAvailableDramas(response.data.dramas);\n          // 默认选择所有可用剧集\n          setSelectedDramas(response.data.dramas.map(drama => drama.id));\n        }\n        \n        // 保存剧集统计信息\n        if (response.data.drama_stats) {\n          setDramaStats(response.data.drama_stats);\n        }\n      } else {\n        setApiStatus('error');\n        setError('API服务状态异常');\n      }\n    } catch (error) {\n      console.error('API状态检查错误:', error);\n      setApiStatus('disconnected');\n      setError('无法连接到API服务，请确保服务器已启动');\n    }\n  };\n\n  const handleSearch = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSearchResults([]);\n    setSelectedResult(null);\n    setVideoUrl('');\n    \n    if (!query.trim()) {\n      setError('请输入搜索关键词');\n      setLoading(false);\n      return;\n    }\n    \n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/search`, {\n        params: {\n          query: query,\n          drama_ids: selectedDramas\n        }\n      });\n      \n      if (response.data && response.data.results) {\n        setSearchResults(response.data.results);\n        if (response.data.results.length === 0) {\n          setError('没有找到匹配的结果');\n        }\n      } else {\n        setError('搜索失败');\n      }\n    } catch (error) {\n      console.error('搜索错误:', error);\n      setError('搜索请求失败，请确保API服务正常运行');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleGenerateClip = async (result) => {\n    if (isVideoLoading) return;\n    \n    setSelectedResult(result);\n    setIsVideoLoading(true);\n    setVideoUrl('');\n    setError(null);\n    \n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/generate_clip`, {\n        drama_id: result.drama_id,\n        episode: result.episode,\n        start_time: result.start_seconds,\n        end_time: result.end_seconds,\n        context_seconds: 2\n      });\n      \n      if (response.data && response.data.clip_url) {\n        const url = `${API_BASE_URL}${response.data.clip_url}`;\n        setVideoUrl(url);\n      } else {\n        setError('无法生成视频片段');\n      }\n    } catch (error) {\n      console.error('生成视频片段失败:', error);\n      setError('请求失败，请检查网络连接');\n    } finally {\n      setIsVideoLoading(false);\n    }\n  };\n\n  const formatTime = (seconds) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const formatEpisode = (episode) => {\n    // 从集数名称中提取数字\n    const match = episode.match(/\\d+/);\n    if (match) {\n      return `第${match[0]}集`;\n    }\n    return episode;\n  };\n \n  const formatDramaName = (drama) => {\n    // 根据drama_id获取剧名\n    if (!drama || !drama.id) return '未知剧集';\n    \n    // 如果传入的是完整drama对象，则直接返回名称\n    if (drama.name) return drama.name;\n    \n    // 否则在availableDramas中查找\n    const foundDrama = availableDramas.find(d => d.id === drama.id);\n    return foundDrama ? foundDrama.name : drama.id;\n  };\n\n  const highlightText = (text, query) => {\n    if (!query || !text) return text;\n    \n    // 简单的字符串替换，为匹配的文本添加高亮标签\n    const escapedQuery = query.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    const regex = new RegExp(escapedQuery, 'gi');\n    return text.replace(regex, match => `<span class=\"highlight\">${match}</span>`);\n  };\n\n  const switchPage = (page) => {\n    setCurrentPage(page);\n    setError(null);\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>字幕搜索系统</h1>\n        \n        <div className=\"api-status\">\n          API服务状态: \n          {apiStatus === 'connected' ? (\n            <span className=\"status-connected\">已连接</span>\n          ) : apiStatus === 'disconnected' ? (\n            <span className=\"status-disconnected\">未连接</span>\n          ) : (\n            <span className=\"status-checking\">检查中...</span>\n          )}\n        </div>\n        \n        <nav className=\"main-nav\">\n          <ul>\n            <li className={currentPage === 'search' ? 'active' : ''}>\n              <button onClick={() => switchPage('search')}>字幕搜索</button>\n            </li>\n            <li className={currentPage === 'chain-game' ? 'active' : ''}>\n              <button onClick={() => switchPage('chain-game')}>字幕接龙</button>\n            </li>\n            <li className={currentPage === 'rhyme-game' ? 'active' : ''}>\n              <button onClick={() => switchPage('rhyme-game')}>字幕押韵</button>\n            </li>\n            <li className={currentPage === 'dialogue-game' ? 'active' : ''}>\n              <button onClick={() => switchPage('dialogue-game')}>奇妙对话</button>\n            </li>\n          </ul>\n        </nav>\n      </header>\n      \n      <main className=\"App-main\">\n        {currentPage === 'search' && (\n          <SearchPage \n            API_BASE_URL={API_BASE_URL}\n            query={query}\n            setQuery={setQuery}\n            searchResults={searchResults}\n            setSearchResults={setSearchResults}\n            loading={loading}\n            setLoading={setLoading}\n            apiStatus={apiStatus}\n            error={error}\n            setError={setError}\n            selectedResult={selectedResult}\n            setSelectedResult={setSelectedResult}\n            videoUrl={videoUrl}\n            setVideoUrl={setVideoUrl}\n            isVideoLoading={isVideoLoading}\n            setIsVideoLoading={setIsVideoLoading}\n            handleSearch={handleSearch}\n            handleGenerateClip={handleGenerateClip}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n            highlightText={highlightText}\n            availableDramas={availableDramas}\n            selectedDramas={selectedDramas}\n            setSelectedDramas={setSelectedDramas}\n            formatDramaName={formatDramaName}\n          />\n        )}\n        \n        {currentPage === 'chain-game' && (\n          <ChainGamePage \n            API_BASE_URL={API_BASE_URL}\n            apiStatus={apiStatus}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n            availableDramas={availableDramas}\n            formatDramaName={formatDramaName}\n          />\n        )}\n        \n        {currentPage === 'rhyme-game' && (\n          <RhymeGamePage \n            API_BASE_URL={API_BASE_URL}\n            apiStatus={apiStatus}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n            availableDramas={availableDramas}\n            formatDramaName={formatDramaName}\n          />\n        )}\n        \n        {currentPage === 'dialogue-game' && (\n          <DialogueGamePage \n            API_BASE_URL={API_BASE_URL}\n            apiStatus={apiStatus}\n            formatTime={formatTime}\n            formatEpisode={formatEpisode}\n            availableDramas={availableDramas}\n            formatDramaName={formatDramaName}\n          />\n        )}\n      </main>\n      \n      <footer className=\"App-footer\">\n        <p>字幕搜索系统 &copy; 2025</p>\n      </footer>\n    </div>\n  );\n}\n\nexport default App; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}